!function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(r,n,function(t){return e[t]}.bind(null,n));return r},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=54)}([function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,"",""]),t.locals={NORMAL_BUTTON_HEIGHT:"32px",MIDDLE_BUTTON_HEIGHT:"40px",NORMAL_BUTTON_LEFT_RIGHT_MARGIN:"8px",MIDDLE_BUTTON_LEFT_RIGHT_MARGIN:"12px"}},function(e,t,i){var r;!function(){"use strict";function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var s=i.apply(null,r);s&&e.push(s)}else if("object"===o)for(var a in r)n.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var n={}.hasOwnProperty;e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,i){"use strict";function r(e,t){var i,r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"===typeof btoa){var o=(i=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),s=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[r].concat(s).concat([o]).join("\n")}return[r].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=r(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,i){"string"===typeof e&&(e=[[null,e,""]]);for(var r={},n=0;n<this.length;n++){var o=this[n][0];null!=o&&(r[o]=!0)}for(n=0;n<e.length;n++){var s=e[n];null!=s[0]&&r[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),t.push(s))}},t}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,"",""]),t.locals={STICKY_ANIMATION_DURATION_STYLE_VALUE:"400ms",STICKY_ANIMATION_HALF_DURATION:"200ms"}},function(e,t,i){(t=e.exports=i(2)(!1)).i(i(0),""),t.push([e.i,".QgGlfxmNUQ{position:static}.kxLOKeL{position:relative}.ffYX3{display:flex;position:relative;align-items:center;margin-left:"+i(0).locals.NORMAL_BUTTON_LEFT_RIGHT_MARGIN+";bottom:1px}.ffYX3.u00ymygjH{margin-left:"+i(0).locals.MIDDLE_BUTTON_LEFT_RIGHT_MARGIN+"}.i8jNctl{position:relative;justify-content:center;width:28px;text-align:center}.AnVGM{width:35px}.iehw{display:flex}.ohxHNQqO8O{text-align:right;width:12px}.w00gLtjN{width:16px}.Bp0{margin-left:4px}.kaaj{position:relative;width:14px;right:1px;top:1px}.H7qIuuNWG{height:13px;width:19px;top:0}",""]),t.locals={NORMAL_BUTTON_LEFT_RIGHT_MARGIN:""+i(0).locals.NORMAL_BUTTON_LEFT_RIGHT_MARGIN,MIDDLE_BUTTON_LEFT_RIGHT_MARGIN:""+i(0).locals.MIDDLE_BUTTON_LEFT_RIGHT_MARGIN,SkipButton:"QgGlfxmNUQ",SkipButton__text:"kxLOKeL",SkipButton__content:"ffYX3",SkipButton__content_middle:"u00ymygjH",SkipButton__timeToSkipString:"i8jNctl",SkipButton__timeToSkipString_middle:"AnVGM",SkipButton__digitsContainer:"iehw",SkipButton__digitsContainer__leftDigit:"ohxHNQqO8O",SkipButton__digitsContainer__leftDigit_middle:"w00gLtjN",SkipButton__text_middle:"Bp0",SkipButton__icon:"kaaj",SkipButton__icon_middle:"H7qIuuNWG"}},function(e,t,i){(t=e.exports=i(2)(!1)).i(i(7),""),t.push([e.i,".JBlLw{position:absolute;left:0;top:0;display:flex;flex-direction:column;justify-content:center;align-items:center;font-family:"+i(7).locals.AD_FONT+";font-weight:300;color:#fff;background-color:rgba(0,0,0,.8);width:100%;height:100%;pointer-events:auto}.yUiX8jfPH{position:absolute;left:60px;top:45px;bottom:0}.pD9nPFQz{position:relative;top:0;left:0;display:flex;flex-direction:column;justify-content:center}.TeHcaGBCQ{text-align:center}.K7a{margin-left:-4px;width:calc(100% + 8px)}.Wl7Iz1r{margin:1px 0}.SXXP{width:100%;height:100%}.ti4C{position:absolute;padding:12px;cursor:pointer;top:0;right:0;width:17px;height:17px}.fhJMx{padding:27px;width:26px;height:26px}",""]),t.locals={AD_FONT:""+i(7).locals.AD_FONT,AbuseScreen:"JBlLw",AbuseScreen__content:"yUiX8jfPH",AbuseScreen__content_centered:"pD9nPFQz",AbuseScreen__title_centered:"TeHcaGBCQ",AbuseScreen__buttons:"K7a",AbuseScreen__button:"Wl7Iz1r",AbuseScreen__cross:"SXXP",AbuseScreen__crossContainer:"ti4C",AbuseScreen__crossContainer_medium:"fhJMx"}},function(e,t,i){(t=e.exports=i(2)(!1)).i(i(7),""),t.i(i(12),""),t.i(i(0),""),t.push([e.i,".SxsdO{display:inline-block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"+i(7).locals.AD_FONT+";font-weight:"+i(12).locals.AD_FONT_WEIGHT+";font-size:16px;cursor:default}.PagzjS0dGW{cursor:pointer}.PagzjS0dGW .vNws8oZVJ{opacity:.915}.PagzjS0dGW:hover .vNws8oZVJ{opacity:1}.oNBa{font-size:18px}.oNBa .vNws8oZVJ{height:"+i(0).locals.MIDDLE_BUTTON_HEIGHT+"}.JCBh{padding:4px;pointer-events:auto}.vNws8oZVJ{display:flex;align-items:center;height:"+i(0).locals.NORMAL_BUTTON_HEIGHT+";opacity:.6}.GcLYPlE{color:#000}.otZGq7DdsS{color:#fff;text-shadow:0 2px 2px rgba(0,0,0,.1)}.otZGq7DdsS .RXqBwJsa{position:relative;border-radius:4px;background-color:rgba(38,38,38,.65)}.otZGq7DdsS.PagzjS0dGW:hover .RXqBwJsa{background-color:rgba(0,0,0,.65)}",""]),t.locals={AD_FONT:""+i(7).locals.AD_FONT,AD_FONT_WEIGHT:""+i(12).locals.AD_FONT_WEIGHT,NORMAL_BUTTON_HEIGHT:""+i(0).locals.NORMAL_BUTTON_HEIGHT,MIDDLE_BUTTON_HEIGHT:""+i(0).locals.MIDDLE_BUTTON_HEIGHT,NORMAL_BUTTON_LEFT_RIGHT_MARGIN:""+i(0).locals.NORMAL_BUTTON_LEFT_RIGHT_MARGIN,MIDDLE_BUTTON_LEFT_RIGHT_MARGIN:""+i(0).locals.MIDDLE_BUTTON_LEFT_RIGHT_MARGIN,Button:"SxsdO",Button_active:"PagzjS0dGW",Button__content:"vNws8oZVJ",Button_middle:"oNBa",Button__clickable:"JCBh",Button_inline:"GcLYPlE",Button_block:"otZGq7DdsS",Button__button:"RXqBwJsa"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,"",""]),t.locals={AD_FONT:'-apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica", "Arial", sans-serif'}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,".VGAdoG{position:static;margin:0;padding:0;font-family:Arial,sans-serif;font-size:12px;color:#fff;text-align:left;line-height:normal;background-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.VGAdoG .XG5RT1Rwz{position:absolute;top:10px;left:10px;background-color:rgba(51,51,51,.7);padding:6px!important;cursor:default;width:auto}.VGAdoG.guEZUGRH .XG5RT1Rwz{font-size:12px}.VGAdoG .BTlfqZj{position:absolute;top:10px;right:10px;padding:6px 27px 6px 8px;background:rgba(51,51,51,.7) url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='18px' height='17px'%3E %3Cdefs/%3E %3Cg%3E %3Cpath stroke='none' fill='%23FFFFFF' d='M0 14.85 L6.35 8.5 0 2.15 2.15 0 10.65 8.5 2.15 17 0 14.85'/%3E %3C/g%3E%3C/svg%3E\") no-repeat 100%;cursor:pointer}.VGAdoG.guEZUGRH .BTlfqZj{font-size:12px}.VGAdoG .Hr4904K{background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3Evolume-on%3C/title%3E%3Cdefs%3E%3ClinearGradient x1='50%25' y1='2.186%25' x2='50%25' y2='100%25' id='a'%3E%3Cstop stop-color='%235B5B5B' offset='0%25'/%3E%3Cstop stop-color='%23444' offset='100%25'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill-rule='nonzero'%3E%3Ccircle cx='11' cy='11' r='11' fill='%23000' transform='translate(1 1)'/%3E%3Ccircle cx='11' cy='11' r='11' stroke='%23242424' fill='url(%23a)' transform='translate(1 1)'/%3E%3C/g%3E%3Cpath fill='%23FFF' fill-rule='nonzero' d='M8 9.5h5v5H8z'/%3E%3Cpath fill='%23FFF' fill-rule='nonzero' d='M8 12l5.5-5v10z'/%3E%3Cpath d='M15.208 13.5c.626-1.085.596-2.093 0-3' stroke='%23FFF' stroke-width='1.3' stroke-linecap='round'/%3E%3C/g%3E%3C/svg%3E\") 0 0 no-repeat}.VGAdoG .Hr4904K,.VGAdoG .gl2BBR{position:absolute;top:2px;left:0;width:24px;height:25px;cursor:pointer}.VGAdoG .gl2BBR{background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3Evolume-off%3C/title%3E%3Cdefs%3E%3ClinearGradient x1='50%25' y1='2.186%25' x2='50%25' y2='100%25' id='a'%3E%3Cstop stop-color='%235B5B5B' offset='0%25'/%3E%3Cstop stop-color='%23444' offset='100%25'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill-rule='nonzero'%3E%3Ccircle cx='11' cy='11' r='11' fill='%23000' transform='translate(1 1)'/%3E%3Ccircle cx='11' cy='11' r='11' stroke='%23242424' fill='url(%23a)' transform='translate(1 1)'/%3E%3C/g%3E%3Cpath fill='%23000' fill-rule='nonzero' d='M8 9.5h5v5H8z'/%3E%3Cpath fill='%23000' fill-rule='nonzero' d='M8 12l5.5-5v10z'/%3E%3Cpath d='M15.25 10.25l3.5 3.5m0-3.5l-3.5 3.5' stroke='%23000' stroke-width='1.5' stroke-linecap='round'/%3E%3C/g%3E%3C/svg%3E\") 0 0 no-repeat}.VGAdoG.guEZUGRH .Hr4904K,.VGAdoG.guEZUGRH .gl2BBR{background-size:100% 100%;width:30px;height:30px;top:-1px;left:55px;max-width:none}.VGAdoG .kcnRWhyKe{position:absolute;top:50%;margin-top:-65px;left:50%;margin-left:-65px;width:130px;height:130px;cursor:pointer;background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='130' height='130' viewBox='0 0 130 130' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EGroup 3%3C/title%3E%3Cg fill='none' fill-rule='evenodd' opacity='.7'%3E%3Ccircle fill='%23000' cx='65' cy='65' r='65'/%3E%3Ccircle stroke='%23B2B2B2' stroke-width='12' cx='65' cy='65' r='52'/%3E%3Cpath fill='%23D8D8D8' d='M90.188 65L50 88V42z'/%3E%3C/g%3E%3C/svg%3E\") 0 0 no-repeat}.VGAdoG .lio9VcGe{position:absolute;top:10px;margin:0 150px 0 100px;background-color:rgba(51,51,51,.7);font-size:12px;cursor:default;padding:6px 8px}.VGAdoG.dz4zt1XGNj .lio9VcGe{display:none}.VGAdoG .QyBaUk{position:absolute;top:10px;right:10px;width:135px}.VGAdoG.guEZUGRH .QyBaUk{width:190px}.VGAdoG .C8Sn0rOHuB{position:absolute;top:10px;right:10px;width:85px}.VGAdoG.guEZUGRH .C8Sn0rOHuB{position:absolute;top:auto;bottom:40px;right:10px;width:85px}.NNG{cursor:pointer}.VGcb1{position:static;z-index:1;padding:0;margin:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.lcILUuYL{position:absolute;width:100%;height:100%;top:0}",""]),t.locals={yaAdSdkGui:"VGAdoG",timeLeft:"XG5RT1Rwz",yaAdSdkGui_mobile:"guEZUGRH",skip:"BTlfqZj",mute:"Hr4904K",unMute:"gl2BBR",play:"kcnRWhyKe",title:"lio9VcGe",yaAdSdkGui_small:"dz4zt1XGNj",topRightBlock:"QyBaUk",topRightBlockMinimal:"C8Sn0rOHuB",pointer:"NNG",yaAdSdk_iosVideoCurtain_wrapper:"VGcb1",yaAdSdk_iosVideoCurtain:"lcILUuYL"}},function(e,t,i){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var n="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!==typeof i)throw new TypeError(i+"must be non-object");for(var n in i)r(i,n)&&(e[n]=i[n])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,i,r,n){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+r),n);else for(var o=0;o<r;o++)e[n+o]=t[i+o]},flattenChunks:function(e){var t,i,r,n,o,s;for(r=0,t=0,i=e.length;t<i;t++)r+=e[t].length;for(s=new Uint8Array(r),n=0,t=0,i=e.length;t<i;t++)o=e[t],s.set(o,n),n+=o.length;return s}},s={arraySet:function(e,t,i,r,n){for(var o=0;o<r;o++)e[n+o]=t[i+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(n)},function(e,t,i){(t=e.exports=i(2)(!1)).i(i(0),""),t.push([e.i,".nr60swo{position:static}.w59UNrr{position:relative;bottom:1px;margin-right:"+i(0).locals.NORMAL_BUTTON_LEFT_RIGHT_MARGIN+"}.w59UNrr.AAyJ{margin-right:0}.p2l{margin-right:"+i(0).locals.MIDDLE_BUTTON_LEFT_RIGHT_MARGIN+"}.p2l.AAyJ{margin-right:0}.Ao9C{width:"+i(0).locals.NORMAL_BUTTON_HEIGHT+";height:"+i(0).locals.NORMAL_BUTTON_HEIGHT+"}.kcyK7{width:"+i(0).locals.MIDDLE_BUTTON_HEIGHT+";height:"+i(0).locals.MIDDLE_BUTTON_HEIGHT+"}",""]),t.locals={NORMAL_BUTTON_HEIGHT:""+i(0).locals.NORMAL_BUTTON_HEIGHT,MIDDLE_BUTTON_HEIGHT:""+i(0).locals.MIDDLE_BUTTON_HEIGHT,NORMAL_BUTTON_LEFT_RIGHT_MARGIN:""+i(0).locals.NORMAL_BUTTON_LEFT_RIGHT_MARGIN,MIDDLE_BUTTON_LEFT_RIGHT_MARGIN:""+i(0).locals.MIDDLE_BUTTON_LEFT_RIGHT_MARGIN,UnmuteButton:"nr60swo",UnmuteButton__text:"w59UNrr",UnmuteButton__without_text:"AAyJ",UnmuteButton__text_middle:"p2l",UnmuteButton__icon:"Ao9C",UnmuteButton__icon_middle:"kcyK7"}},function(e,t,i){(t=e.exports=i(2)(!1)).i(i(13),""),t.push([e.i,".qwPEtTe,.AoEyabW5{position:absolute;height:"+i(13).locals.TIMELINE_HEIGHT+"}.qwPEtTe{width:100%;transform-origin:0;will-change:transform}.JxBvCPyEL{transform:scaleX(0);background-color:#ff1a2d}.RlV{transform:scaleX(1);background-color:#cdcdcd}",""]),t.locals={TIMELINE_HEIGHT:""+i(13).locals.TIMELINE_HEIGHT,TimelineBar:"qwPEtTe",TimelineBar__container:"AoEyabW5",TimelineBar__progress:"JxBvCPyEL",TimelineBar__background:"RlV"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,"",""]),t.locals={AD_FONT_WEIGHT:"500"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,"",""]),t.locals={TIMELINE_HEIGHT:"2px"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,".Fnb8B{width:100%}.Fnb8B:hover .xD3zcycVo{border-color:#fff}.xD3zcycVo{font-size:11px;width:calc(100% - 20px);height:32px;padding:0 10px;border-radius:4px;background-color:hsla(0,0%,100%,.2);font-weight:400;color:#fff;display:flex;white-space:nowrap;justify-content:space-between;align-items:center}.EjeiaYh9s{font-size:13px;width:calc(100% - 27px);height:40px;padding:0 12px 0 15px}.EVM6{height:15px;width:15px}",""]),t.locals={AbuseVariantButton:"Fnb8B",AbuseVariantButton__content:"xD3zcycVo",AbuseVariantButton__content_middle:"EjeiaYh9s",AbuseVariantButton__icon_middle:"EVM6"}},function(e,t,i){(t=e.exports=i(2)(!1)).i(i(3),""),t.push([e.i,".CmMqX{height:100%}.bMGR0t{display:flex;justify-content:center;align-items:center;flex-grow:1;flex-shrink:1;box-shadow:none}.Fs6GxYuf{z-index:10000}.omhv5cw8C{box-sizing:content-box;box-shadow:0 12px 12px rgba(25,58,75,.1),0 4px 4px rgba(25,58,75,.05),0 0 4px rgba(25,58,75,.05);border-radius:4px}.omhv5cw8C .Ekjl3KWd{width:100%;top:0;left:0;position:absolute;height:32px}.zJdLy6iMT{box-shadow:0 0 20px 20px rgba(96,109,128,.15)}.bSxrg5TY2c{background-color:#fff}.n55zfS{background-color:#283459}.SYrPb{position:relative;height:100%;width:100%;overflow:hidden;flex-shrink:0;font-size:0;z-index:2}.IaAOcj{position:relative;flex-grow:1;flex-shrink:1;display:flex;align-items:stretch}.Nw7CnCSg{width:100%;min-width:0}.Ekjl3KWd{display:none;opacity:0;font-family:Helvetica,Arial,sans-serif;z-index:1;overflow:hidden}.qpbX6WcV{position:absolute;right:0;top:0;width:12px;height:12px;padding:10px;box-sizing:content-box;cursor:pointer;z-index:2}.qpbX6WcV svg{vertical-align:top;width:12px;height:12px}.qpbX6WcV polygon{fill:#bebebe}.qpbX6WcV:hover polygon{fill:#a5a5a5}.Kb9JDpAmYA .qpbX6WcV polygon{fill:#8fa3bf}.Kb9JDpAmYA .qpbX6WcV:hover polygon{fill:#a3b9d9}.l06{font-size:18px}.iJCq .l06{margin:0 3.5vh 0 3vh;min-width:0;max-width:44vh}.kZ4wWJ{font-style:normal;font-weight:700;font-size:12px;line-height:14px;display:flex;align-items:flex-end;letter-spacing:.05em;text-transform:uppercase;color:#afc5cf;position:absolute;left:13px;top:9px}.PlO0,.MlnC{cursor:pointer}.MlnC{min-width:5em;margin-bottom:.7em;text-align:left;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:1.5em;color:#000;line-height:1.2em;max-height:2.4em;overflow:hidden}.PlO0{position:relative;display:inline-block;min-width:10em;text-align:center;box-sizing:border-box;padding:.6em 1.2em .7em;border-radius:.3em;font-size:1em;font-weight:300;color:#006aff;background-color:#e5f0ff}.PlO0:hover{background-color:#d9e9ff}.xAo7N{position:absolute;top:-15px;left:-15px;padding:15px;width:100%;height:100%}.fHKy .MlnC{color:#fff}.fHKy .PlO0{color:#fff;background-color:#535c7a}.fHKy .PlO0:hover{background-color:#5d6682}.iJCq{will-change:width,height,left,top,bottom,right;transition-duration:"+i(3).locals.STICKY_ANIMATION_HALF_DURATION+","+i(3).locals.STICKY_ANIMATION_HALF_DURATION+","+i(3).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+","+i(3).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+","+i(3).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+","+i(3).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+","+i(3).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+","+i(3).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+";transition-property:box-shadow,background-color,width,height,left,top,bottom,right;transition-timing-function:linear,linear,ease,ease,ease,ease,ease,ease}.O72Mw{transition-duration:"+i(3).locals.STICKY_ANIMATION_HALF_DURATION+","+i(3).locals.STICKY_ANIMATION_HALF_DURATION+","+i(3).locals.STICKY_ANIMATION_HALF_DURATION+","+i(3).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+";transition-property:box-shadow,background-color,margin-top,transform;transition-timing-function:linear,linear,linear,ease}.iJCq .SYrPb{transition-duration:"+i(3).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE+";transition-property:width,height;will-change:width,height}.RMRcyNnoGJ{transition:none}.Ekjl3KWd{transition:opacity "+i(3).locals.STICKY_ANIMATION_HALF_DURATION+"}.FHuXDNi .Ekjl3KWd{display:block;opacity:0}.bMGR0t:not(.UjRanQ) .Ekjl3KWd,.a6ib4 .Ekjl3KWd{opacity:0}.bMGR0t:not(.UjRanQ) .qpbX6WcV,.a6ib4 .qpbX6WcV{display:none}.yNjYq.UjRanQ.O72Mw{margin-top:32px}.Fs6GxYuf .Ekjl3KWd{opacity:1}.Fs6GxYuf .qpbX6WcV{display:block}.zJdLy6iMT .SYrPb{width:auto}.omhv5cw8C{padding-top:32px;background-color:#ecf4f9}",""]),t.locals={STICKY_ANIMATION_DURATION_STYLE_VALUE:""+i(3).locals.STICKY_ANIMATION_DURATION_STYLE_VALUE,STICKY_ANIMATION_HALF_DURATION:""+i(3).locals.STICKY_ANIMATION_HALF_DURATION,yaInPageShadowContainerElement:"CmMqX",yaInPageStickyWrapper:"bMGR0t",yaInPageStickyWrapper__sticky:"Fs6GxYuf",yaInPageStickyWrapper__sticky__flyroll:"omhv5cw8C",yaInpageAdditionalContentContainer:"Ekjl3KWd",yaInPageStickyWrapper__sticky__covering:"zJdLy6iMT",yaInPageStickyWrapper__sticky__covering_color_scheme_light:"bSxrg5TY2c",yaInPageStickyWrapper__sticky__covering_color_scheme_dark:"n55zfS",yaInPageWrapper:"SYrPb",yaInPagePlaceholderElement:"IaAOcj",yaInPageVideo:"Nw7CnCSg",yaInpageCross:"qpbX6WcV",yaInpageCross_dark:"Kb9JDpAmYA",yaInpageAdditionalContent:"l06",yaInPageStickyWrapper__variant__covering:"iJCq",yaInpageAdditionalContent__adTitle:"kZ4wWJ",yaInpageAdditionalContent__button:"PlO0",yaInpageAdditionalContent__description:"MlnC",yaInpageAdditionalContent__buttonClickableArea:"xAo7N",yaInpageAdditionalContent_dark:"fHKy",yaInPageStickyWrapper__variant__flyroll:"O72Mw",yaInPageStickyWrapper__unAnimated:"RMRcyNnoGJ",yaInPageStickyWrapper__additionalContent_enabled:"FHuXDNi",yaInPageStickyWrapper__detached:"UjRanQ",yaInPageStickyWrapper__inline:"a6ib4",yaInPageStickyWrapper__isAnimating:"yNjYq"}},function(e,t,i){(t=e.exports=i(2)(!1)).i(i(0),""),t.push([e.i,".WMjrps5{position:static}.am5CdVoiJn{width:"+i(0).locals.NORMAL_BUTTON_HEIGHT+";height:"+i(0).locals.NORMAL_BUTTON_HEIGHT+"}.mTlkZk6u{width:"+i(0).locals.MIDDLE_BUTTON_HEIGHT+";height:"+i(0).locals.MIDDLE_BUTTON_HEIGHT+"}",""]),t.locals={NORMAL_BUTTON_HEIGHT:""+i(0).locals.NORMAL_BUTTON_HEIGHT,MIDDLE_BUTTON_HEIGHT:""+i(0).locals.MIDDLE_BUTTON_HEIGHT,MuteButton:"WMjrps5",MuteButton__icon:"am5CdVoiJn",MuteButton__icon_middle:"mTlkZk6u"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,".QTVJ00kw{cursor:pointer}.Pk1RJX5w72{width:60px;height:60px}.tM2VEueP9Z{width:80px;height:80px}",""]),t.locals={CirclePlayButton:"QTVJ00kw",CirclePlayButton__icon:"Pk1RJX5w72",CirclePlayButton__icon_middle:"tM2VEueP9Z"}},function(e,t,i){(t=e.exports=i(2)(!1)).i(i(0),""),t.push([e.i,".vk0S5{position:static}.vfAbHzV{width:"+i(0).locals.NORMAL_BUTTON_HEIGHT+";height:"+i(0).locals.NORMAL_BUTTON_HEIGHT+"}.bho{width:"+i(0).locals.MIDDLE_BUTTON_HEIGHT+";height:"+i(0).locals.MIDDLE_BUTTON_HEIGHT+"}",""]),t.locals={NORMAL_BUTTON_HEIGHT:""+i(0).locals.NORMAL_BUTTON_HEIGHT,MIDDLE_BUTTON_HEIGHT:""+i(0).locals.MIDDLE_BUTTON_HEIGHT,PauseButton:"vk0S5",PauseButton__icon:"vfAbHzV",PauseButton__icon_middle:"bho"}},function(e,t,i){(t=e.exports=i(2)(!1)).i(i(0),""),t.push([e.i,".OoW2hpiAxX{position:static}.pU5ONGhcY{width:"+i(0).locals.NORMAL_BUTTON_HEIGHT+";height:"+i(0).locals.NORMAL_BUTTON_HEIGHT+"}.N5GeV{width:"+i(0).locals.MIDDLE_BUTTON_HEIGHT+";height:"+i(0).locals.MIDDLE_BUTTON_HEIGHT+"}",""]),t.locals={NORMAL_BUTTON_HEIGHT:""+i(0).locals.NORMAL_BUTTON_HEIGHT,MIDDLE_BUTTON_HEIGHT:""+i(0).locals.MIDDLE_BUTTON_HEIGHT,SquarePlayButton:"OoW2hpiAxX",SquarePlayButton__icon:"pU5ONGhcY",SquarePlayButton__icon_middle:"N5GeV"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,".ktWc9xb{position:absolute;top:0;left:0;width:40px;height:40px;pointer-events:auto;cursor:pointer}.OBMEYyqJ{position:absolute;width:15px;height:15px;top:10px;left:9px}.ESe{width:20px;height:20px;left:8px}",""]),t.locals={AbuseButton:"ktWc9xb",AbuseButton__icon:"OBMEYyqJ",AbuseButton__icon_middle:"ESe"}},function(e,t,i){(t=e.exports=i(2)(!1)).i(i(7),""),t.i(i(12),""),t.i(i(23),""),t.i(i(24),""),t.push([e.i,".tGFi{font-family:"+i(7).locals.AD_FONT+";font-weight:"+i(12).locals.AD_FONT_WEIGHT+";letter-spacing:1px;text-transform:uppercase;color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-decoration:none;pointer-events:auto;padding:4px;display:inline-block;position:absolute;top:3px;left:23px;transform-origin:bottom left;text-shadow:0 0 20px rgba(0,0,0,.2),1px 0 1px rgba(0,0,0,.1),0 1px 1px rgba(0,0,0,.1);font-size:10px;line-height:"+i(23).locals.AD_LABEL_SMALL_HEIGHT+"}.hHomFlW{font-size:12px;line-height:"+i(24).locals.AD_LABEL_MIDDLE_HEIGHT+";left:28px;top:5px}",""]),t.locals={AD_FONT:""+i(7).locals.AD_FONT,AD_FONT_WEIGHT:""+i(12).locals.AD_FONT_WEIGHT,AD_LABEL_SMALL_HEIGHT:""+i(23).locals.AD_LABEL_SMALL_HEIGHT,AD_LABEL_MIDDLE_HEIGHT:""+i(24).locals.AD_LABEL_MIDDLE_HEIGHT,AdLabel:"tGFi",AdLabel_middle:"hHomFlW"}},function(e,t,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,"",""]),t.locals={AD_LABEL_SMALL_HEIGHT:"18px"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,"",""]),t.locals={AD_LABEL_MIDDLE_HEIGHT:"20px"}},function(e,t,i){(t=e.exports=i(2)(!1)).i(i(13),""),t.push([e.i,".OWEXmPB{position:absolute;bottom:0;left:0;height:"+i(13).locals.TIMELINE_HEIGHT+";width:100%}",""]),t.locals={TIMELINE_HEIGHT:""+i(13).locals.TIMELINE_HEIGHT,Timeline:"OWEXmPB"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,".P6IPSEqLp{position:absolute;display:flex;justify-content:space-between;bottom:16px;left:6px;right:6px}",""]),t.locals={ButtonControls:"P6IPSEqLp"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,".DwEz9PX{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);display:flex}",""]),t.locals={CenterControls:"DwEz9PX"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,".hREglaB{position:absolute;display:flex;justify-content:space-between;top:8px;left:8px}",""]),t.locals={TgoButtonControls:"hREglaB"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,".N3WOBnP{position:absolute;top:0;left:0;right:0}",""]),t.locals={TopControls:"N3WOBnP"}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,".d7HAmn{z-index:2;width:100%;height:100%;background:50% #000;background-size:cover;position:absolute;top:0;left:0}.d7HAmn .BnwqVIY6b{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.d7HAmn .tSS1X48{text-align:center}.d7HAmn .M7mNn0E{border-radius:8px;border:none;background-color:#fc0;color:#332900;box-shadow:0 2px 2px 0 rgba(0,0,0,.1);font-size:21px;padding:9px 26px;margin-bottom:18px}.d7HAmn .M7mNn0E,.d7HAmn .IwrRsgXt{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;cursor:pointer;display:inline-block}.d7HAmn .IwrRsgXt{background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='18' height='20' viewBox='0 0 18 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cdefs%3E %3Cfilter id='a' x='-2.7%25' y='-5.3%25' width='105.5%25' height='121.1%25'%3E %3CfeOffset dx='0' dy='2' in='SourceAlpha' result='shadowOffsetOuter1'/%3E %3CfeGaussianBlur in='shadowOffsetOuter1' result='shadowBlurOuter1' stdDeviation='1'/%3E %3CfeColorMatrix in='shadowBlurOuter1' result='shadowMatrixOuter1' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0'/%3E %3CfeMerge%3E %3CfeMergeNode in='shadowMatrixOuter1'/%3E %3CfeMergeNode in='SourceGraphic'/%3E %3C/feMerge%3E %3C/filter%3E %3C/defs%3E %3Cg fill='none' fill-rule='evenodd'%3E %3Cg transform='translate(-375 -273)' fill='%23fff' fill-rule='nonzero'%3E %3Cg transform='translate(362 263)' filter='url(%23a)'%3E %3Cg transform='translate(15 7)'%3E %3Cpath d='m7 4.4325v-1.4325l-4.0367 2.3794 4.0133 2.4522 0.023333-1.481c2.8467 0 5.1567 2.4036 5.1567 5.3657-0.023333 2.9621-2.3333 5.3657-5.1567 5.3657-2.8467 0-5.1567-2.4036-5.1567-5.3657h-1.8433c0 4.0061 3.1267 7.2838 7 7.2838 3.85 0 7-3.2534 7-7.2838-0.023333-4.0061-3.15-7.2595-7-7.2838z'/%3E %3C/g%3E %3C/g%3E %3C/g%3E %3C/g%3E %3C/svg%3E\") 15px 10px no-repeat;border:1px solid hsla(0,0%,100%,.4);border-radius:8px;color:#fff;font-size:18px;padding:7px 15px 7px 36px;text-shadow:0 2px 2px rgba(0,0,0,.1)}",""]),t.locals={yaAdSdkEndScreen:"d7HAmn",buttonsContainer:"BnwqVIY6b",buttonsContainer__row:"tSS1X48",row__goButton:"M7mNn0E",row__replayButton:"IwrRsgXt"}},function(e,t,i){"use strict";e.exports=function(e,t,i,r){for(var n=65535&e|0,o=e>>>16&65535|0,s=0;0!==i;){i-=s=i>2e3?2e3:i;do{o=o+(n=n+t[r++]|0)|0}while(--s);n%=65521,o%=65521}return n|o<<16|0}},function(e,t,i){"use strict";var r=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();e.exports=function(e,t,i,n){var o=r,s=n+i;e^=-1;for(var a=n;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},function(e,t,i){"use strict";function r(e,t){if(t<65534&&(e.subarray&&s||!e.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var i="",r=0;r<t;r++)i+=String.fromCharCode(e[r]);return i}var n=i(9),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(l){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(l){s=!1}for(var a=new n.Buf8(256),d=0;d<256;d++)a[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;a[254]=a[254]=1,t.string2buf=function(e){var t,i,r,o,s,a=e.length,d=0;for(o=0;o<a;o++)55296===(64512&(i=e.charCodeAt(o)))&&o+1<a&&56320===(64512&(r=e.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(r-56320),o++),d+=i<128?1:i<2048?2:i<65536?3:4;for(t=new n.Buf8(d),s=0,o=0;s<d;o++)55296===(64512&(i=e.charCodeAt(o)))&&o+1<a&&56320===(64512&(r=e.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(r-56320),o++),i<128?t[s++]=i:i<2048?(t[s++]=192|i>>>6,t[s++]=128|63&i):i<65536?(t[s++]=224|i>>>12,t[s++]=128|i>>>6&63,t[s++]=128|63&i):(t[s++]=240|i>>>18,t[s++]=128|i>>>12&63,t[s++]=128|i>>>6&63,t[s++]=128|63&i);return t},t.buf2binstring=function(e){return r(e,e.length)},t.binstring2buf=function(e){for(var t=new n.Buf8(e.length),i=0,r=t.length;i<r;i++)t[i]=e.charCodeAt(i);return t},t.buf2string=function(e,t){var i,n,o,s,d=t||e.length,l=new Array(2*d);for(n=0,i=0;i<d;)if((o=e[i++])<128)l[n++]=o;else if((s=a[o])>4)l[n++]=65533,i+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&i<d;)o=o<<6|63&e[i++],s--;s>1?l[n++]=65533:o<65536?l[n++]=o:(o-=65536,l[n++]=55296|o>>10&1023,l[n++]=56320|1023&o)}return r(l,n)},t.utf8border=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;i>=0&&128===(192&e[i]);)i--;return i<0?t:0===i?t:i+a[e[i]]>t?i:t}},function(e,t,i){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,i){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,i){(t=e.exports=i(2)(!1)).push([e.i,"",""]),t.locals={STICKY_ANIMATION_DURATION_STYLE_VALUE:"400ms",STICKY_ANIMATION_HALF_DURATION:"200ms"}},function(e,t){e.exports=function(e){e||(e=window);var t=e.navigator.userAgent,i=t.indexOf("MSIE ");if(i>0)return parseInt(t.substring(i+5,t.indexOf(".",i)),10);if(t.indexOf("Trident/")>0){var r=t.indexOf("rv:");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}},function(e,t){e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i]);return e})},function(e,t){Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),r=i.length>>>0,n=arguments[1],o=0;o<r;o++)if(t=i[o],e.call(n,t,o,i))return t})},function(e,t,i){"use strict";var r={};(0,i(9).assign)(r,i(41),i(44),i(35)),e.exports=r},function(e,t,i){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({level:h,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==u)throw new Error(d[i]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"===typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(i=o.deflateSetDictionary(this.strm,n))!==u)throw new Error(d[i]);this._dict_set=!0}}function n(e,t){var i=new r(t);if(i.push(e,!0),i.err)throw i.msg||d[i.err];return i.result}var o=i(42),s=i(9),a=i(33),d=i(22),l=i(34),c=Object.prototype.toString,u=0,h=-1,p=0,f=8;r.prototype.push=function(e,t){var i,r,n=this.strm,d=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"===typeof e?n.input=a.string2buf(e):"[object ArrayBuffer]"===c.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new s.Buf8(d),n.next_out=0,n.avail_out=d),1!==(i=o.deflate(n,r))&&i!==u)return this.onEnd(i),this.ended=!0,!1;0!==n.avail_out&&(0!==n.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(a.buf2binstring(s.shrinkBuf(n.output,n.next_out))):this.onData(s.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||0===n.avail_out)&&1!==i);return 4===r?(i=o.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===u):2!==r||(this.onEnd(u),n.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=r,t.deflate=n,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,n(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,n(e,t)}},function(e,t,i){"use strict";function r(e,t){return e.msg=b[t],t}function n(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function s(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(_.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function a(e,t){w._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,s(e.strm)}function d(e,t){e.pending_buf[e.pending++]=t}function l(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t){var i,r,n=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,d=e.strstart>e.w_size-$?e.strstart-(e.w_size-$):0,l=e.window,c=e.w_mask,u=e.prev,h=e.strstart+Z,p=l[o+s-1],f=l[o+s];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do{if(l[(i=t)+s]===f&&l[i+s-1]===p&&l[i]===l[o]&&l[++i]===l[o+1]){o+=2,i++;do{}while(l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&o<h);if(r=Z-(h-o),o=h-Z,r>s){if(e.match_start=t,s=r,r>=a)break;p=l[o+s-1],f=l[o+s]}}}while((t=u[t&c])>d&&0!==--n);return s<=e.lookahead?s:e.lookahead}function u(e){var t,i,r,n,o,s,a,d,l,c,u=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=u+(u-$)){_.arraySet(e.window,e.window,u,u,0),e.match_start-=u,e.strstart-=u,e.block_start-=u,t=i=e.hash_size;do{r=e.head[--t],e.head[t]=r>=u?r-u:0}while(--i);t=i=u;do{r=e.prev[--t],e.prev[t]=r>=u?r-u:0}while(--i);n+=u}if(0===e.strm.avail_in)break;if(s=e.strm,a=e.window,d=e.strstart+e.lookahead,l=n,c=void 0,(c=s.avail_in)>l&&(c=l),i=0===c?0:(s.avail_in-=c,_.arraySet(a,s.input,s.next_in,c,d),1===s.state.wrap?s.adler=E(s.adler,a,c,d):2===s.state.wrap&&(s.adler=S(s.adler,a,c,d)),s.next_in+=c,s.total_in+=c,c),e.lookahead+=i,e.lookahead+e.insert>=J)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+J-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<J)););}while(e.lookahead<$&&0!==e.strm.avail_in)}function h(e,t){for(var i,r;;){if(e.lookahead<$){if(u(e),e.lookahead<$&&t===T)return de;if(0===e.lookahead)break}if(i=0,e.lookahead>=J&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+J-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-$&&(e.match_length=c(e,i)),e.match_length>=J)if(r=w._tr_tally(e,e.strstart-e.match_start,e.match_length-J),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=J){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+J-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=w._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(a(e,!1),0===e.strm.avail_out))return de}return e.insert=e.strstart<J-1?e.strstart:J-1,t===I?(a(e,!0),0===e.strm.avail_out?ce:ue):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?de:le}function p(e,t){for(var i,r,n;;){if(e.lookahead<$){if(u(e),e.lookahead<$&&t===T)return de;if(0===e.lookahead)break}if(i=0,e.lookahead>=J&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+J-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=J-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-$&&(e.match_length=c(e,i),e.match_length<=5&&(e.strategy===M||e.match_length===J&&e.strstart-e.match_start>4096)&&(e.match_length=J-1)),e.prev_length>=J&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-J,r=w._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-J),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+J-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=J-1,e.strstart++,r&&(a(e,!1),0===e.strm.avail_out))return de}else if(e.match_available){if((r=w._tr_tally(e,0,e.window[e.strstart-1]))&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return de}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=w._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<J-1?e.strstart:J-1,t===I?(a(e,!0),0===e.strm.avail_out?ce:ue):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?de:le}function f(e,t,i,r,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=r,this.func=n}function A(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new _.Buf16(2*X),this.dyn_dtree=new _.Buf16(2*(2*q+1)),this.bl_tree=new _.Buf16(2*(2*K+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new _.Buf16(Q+1),this.heap=new _.Buf16(2*Y+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new _.Buf16(2*Y+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function m(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=H,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?te:se,e.adler=2===t.wrap?0:1,t.last_flush=T,w._tr_init(t),N):r(e,O)}function g(e){var t,i=m(e);return i===N&&((t=e.state).window_size=2*t.w_size,o(t.head),t.max_lazy_match=v[t.level].max_lazy,t.good_match=v[t.level].good_length,t.nice_match=v[t.level].nice_length,t.max_chain_length=v[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=J-1,t.match_available=0,t.ins_h=0),i}function y(e,t,i,n,o,s){if(!e)return O;var a=1;if(t===B&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>G||i!==z||n<8||n>15||t<0||t>9||s<0||s>F)return r(e,O);8===n&&(n=9);var d=new A;return e.state=d,d.strm=e,d.wrap=a,d.gzhead=null,d.w_bits=n,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=o+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+J-1)/J),d.window=new _.Buf8(2*d.w_size),d.head=new _.Buf16(d.hash_size),d.prev=new _.Buf16(d.w_size),d.lit_bufsize=1<<o+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new _.Buf8(d.pending_buf_size),d.d_buf=1*d.lit_bufsize,d.l_buf=3*d.lit_bufsize,d.level=t,d.strategy=s,d.method=i,g(e)}var v,_=i(9),w=i(43),E=i(31),S=i(32),b=i(22),T=0,C=1,k=3,I=4,P=5,N=0,D=1,O=-2,R=-3,V=-5,B=-1,M=1,x=2,L=3,F=4,U=0,H=2,z=8,G=9,W=15,j=8,Y=286,q=30,K=19,X=2*Y+1,Q=15,J=3,Z=258,$=Z+J+1,ee=32,te=42,ie=69,re=73,ne=91,oe=103,se=113,ae=666,de=1,le=2,ce=3,ue=4,he=3;v=[new f(0,0,0,0,(function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(u(e),0===e.lookahead&&t===T)return de;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+i;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,a(e,!1),0===e.strm.avail_out))return de;if(e.strstart-e.block_start>=e.w_size-$&&(a(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===I?(a(e,!0),0===e.strm.avail_out?ce:ue):(e.strstart>e.block_start&&(a(e,!1),e.strm.avail_out),de)})),new f(4,4,8,4,h),new f(4,5,16,8,h),new f(4,6,32,32,h),new f(4,4,16,16,p),new f(8,16,32,32,p),new f(8,16,128,128,p),new f(8,32,128,256,p),new f(32,128,258,1024,p),new f(32,258,258,4096,p)],t.deflateInit=function(e,t){return y(e,t,z,W,j,U)},t.deflateInit2=y,t.deflateReset=g,t.deflateResetKeep=m,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?O:(e.state.gzhead=t,N):O},t.deflate=function(e,t){var i,c,h,p;if(!e||!e.state||t>P||t<0)return e?r(e,O):O;if(c=e.state,!e.output||!e.input&&0!==e.avail_in||c.status===ae&&t!==I)return r(e,0===e.avail_out?V:O);if(c.strm=e,i=c.last_flush,c.last_flush=t,c.status===te)if(2===c.wrap)e.adler=0,d(c,31),d(c,139),d(c,8),c.gzhead?(d(c,(c.gzhead.text?1:0)+(c.gzhead.hcrc?2:0)+(c.gzhead.extra?4:0)+(c.gzhead.name?8:0)+(c.gzhead.comment?16:0)),d(c,255&c.gzhead.time),d(c,c.gzhead.time>>8&255),d(c,c.gzhead.time>>16&255),d(c,c.gzhead.time>>24&255),d(c,9===c.level?2:c.strategy>=x||c.level<2?4:0),d(c,255&c.gzhead.os),c.gzhead.extra&&c.gzhead.extra.length&&(d(c,255&c.gzhead.extra.length),d(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(e.adler=S(e.adler,c.pending_buf,c.pending,0)),c.gzindex=0,c.status=ie):(d(c,0),d(c,0),d(c,0),d(c,0),d(c,0),d(c,9===c.level?2:c.strategy>=x||c.level<2?4:0),d(c,he),c.status=se);else{var f=z+(c.w_bits-8<<4)<<8;f|=(c.strategy>=x||c.level<2?0:c.level<6?1:6===c.level?2:3)<<6,0!==c.strstart&&(f|=ee),f+=31-f%31,c.status=se,l(c,f),0!==c.strstart&&(l(c,e.adler>>>16),l(c,65535&e.adler)),e.adler=1}if(c.status===ie)if(c.gzhead.extra){for(h=c.pending;c.gzindex<(65535&c.gzhead.extra.length)&&(c.pending!==c.pending_buf_size||(c.gzhead.hcrc&&c.pending>h&&(e.adler=S(e.adler,c.pending_buf,c.pending-h,h)),s(e),h=c.pending,c.pending!==c.pending_buf_size));)d(c,255&c.gzhead.extra[c.gzindex]),c.gzindex++;c.gzhead.hcrc&&c.pending>h&&(e.adler=S(e.adler,c.pending_buf,c.pending-h,h)),c.gzindex===c.gzhead.extra.length&&(c.gzindex=0,c.status=re)}else c.status=re;if(c.status===re)if(c.gzhead.name){h=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>h&&(e.adler=S(e.adler,c.pending_buf,c.pending-h,h)),s(e),h=c.pending,c.pending===c.pending_buf_size)){p=1;break}p=c.gzindex<c.gzhead.name.length?255&c.gzhead.name.charCodeAt(c.gzindex++):0,d(c,p)}while(0!==p);c.gzhead.hcrc&&c.pending>h&&(e.adler=S(e.adler,c.pending_buf,c.pending-h,h)),0===p&&(c.gzindex=0,c.status=ne)}else c.status=ne;if(c.status===ne)if(c.gzhead.comment){h=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>h&&(e.adler=S(e.adler,c.pending_buf,c.pending-h,h)),s(e),h=c.pending,c.pending===c.pending_buf_size)){p=1;break}p=c.gzindex<c.gzhead.comment.length?255&c.gzhead.comment.charCodeAt(c.gzindex++):0,d(c,p)}while(0!==p);c.gzhead.hcrc&&c.pending>h&&(e.adler=S(e.adler,c.pending_buf,c.pending-h,h)),0===p&&(c.status=oe)}else c.status=oe;if(c.status===oe&&(c.gzhead.hcrc?(c.pending+2>c.pending_buf_size&&s(e),c.pending+2<=c.pending_buf_size&&(d(c,255&e.adler),d(c,e.adler>>8&255),e.adler=0,c.status=se)):c.status=se),0!==c.pending){if(s(e),0===e.avail_out)return c.last_flush=-1,N}else if(0===e.avail_in&&n(t)<=n(i)&&t!==I)return r(e,V);if(c.status===ae&&0!==e.avail_in)return r(e,V);if(0!==e.avail_in||0!==c.lookahead||t!==T&&c.status!==ae){var A=c.strategy===x?function(e,t){for(var i;;){if(0===e.lookahead&&(u(e),0===e.lookahead)){if(t===T)return de;break}if(e.match_length=0,i=w._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(a(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===I?(a(e,!0),0===e.strm.avail_out?ce:ue):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?de:le}(c,t):c.strategy===L?function(e,t){for(var i,r,n,o,s=e.window;;){if(e.lookahead<=Z){if(u(e),e.lookahead<=Z&&t===T)return de;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=J&&e.strstart>0&&(r=s[n=e.strstart-1])===s[++n]&&r===s[++n]&&r===s[++n]){o=e.strstart+Z;do{}while(r===s[++n]&&r===s[++n]&&r===s[++n]&&r===s[++n]&&r===s[++n]&&r===s[++n]&&r===s[++n]&&r===s[++n]&&n<o);e.match_length=Z-(o-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=J?(i=w._tr_tally(e,1,e.match_length-J),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=w._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(a(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===I?(a(e,!0),0===e.strm.avail_out?ce:ue):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?de:le}(c,t):v[c.level].func(c,t);if(A!==ce&&A!==ue||(c.status=ae),A===de||A===ce)return 0===e.avail_out&&(c.last_flush=-1),N;if(A===le&&(t===C?w._tr_align(c):t!==P&&(w._tr_stored_block(c,0,0,!1),t===k&&(o(c.head),0===c.lookahead&&(c.strstart=0,c.block_start=0,c.insert=0))),s(e),0===e.avail_out))return c.last_flush=-1,N}return t!==I?N:c.wrap<=0?D:(2===c.wrap?(d(c,255&e.adler),d(c,e.adler>>8&255),d(c,e.adler>>16&255),d(c,e.adler>>24&255),d(c,255&e.total_in),d(c,e.total_in>>8&255),d(c,e.total_in>>16&255),d(c,e.total_in>>24&255)):(l(c,e.adler>>>16),l(c,65535&e.adler)),s(e),c.wrap>0&&(c.wrap=-c.wrap),0!==c.pending?N:D)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==te&&t!==ie&&t!==re&&t!==ne&&t!==oe&&t!==se&&t!==ae?r(e,O):(e.state=null,t===se?r(e,R):N):O},t.deflateSetDictionary=function(e,t){var i,r,n,s,a,d,l,c,h=t.length;if(!e||!e.state)return O;if(2===(s=(i=e.state).wrap)||1===s&&i.status!==te||i.lookahead)return O;for(1===s&&(e.adler=E(e.adler,t,h,0)),i.wrap=0,h>=i.w_size&&(0===s&&(o(i.head),i.strstart=0,i.block_start=0,i.insert=0),c=new _.Buf8(i.w_size),_.arraySet(c,t,h-i.w_size,i.w_size,0),t=c,h=i.w_size),a=e.avail_in,d=e.next_in,l=e.input,e.avail_in=h,e.next_in=0,e.input=t,u(i);i.lookahead>=J;){r=i.strstart,n=i.lookahead-(J-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+J-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++}while(--n);i.strstart=r,i.lookahead=J-1,u(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=J-1,i.match_available=0,e.next_in=d,e.input=l,e.avail_in=a,i.wrap=s,N},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,i){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function n(e,t,i,r,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=r,this.max_length=n,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function s(e){return e<256?K[e]:K[256+(e>>>7)]}function a(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function d(e,t,i){e.bi_valid>M-i?(e.bi_buf|=t<<e.bi_valid&65535,a(e,e.bi_buf),e.bi_buf=t>>M-e.bi_valid,e.bi_valid+=i-M):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function l(e,t,i){d(e,i[2*t],i[2*t+1])}function c(e,t){var i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1}function u(e,t,i){var r,n,o=new Array(B+1),s=0;for(r=1;r<=B;r++)o[r]=s=s+i[r-1]<<1;for(n=0;n<=t;n++){var a=e[2*n+1];0!==a&&(e[2*n]=c(o[a]++,a))}}function h(e){var t;for(t=0;t<D;t++)e.dyn_ltree[2*t]=0;for(t=0;t<O;t++)e.dyn_dtree[2*t]=0;for(t=0;t<R;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*L]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function f(e,t,i,r){var n=2*t,o=2*i;return e[n]<e[o]||e[n]===e[o]&&r[t]<=r[i]}function A(e,t,i){for(var r=e.heap[i],n=i<<1;n<=e.heap_len&&(n<e.heap_len&&f(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!f(t,r,e.heap[n],e.depth));)e.heap[i]=e.heap[n],i=n,n<<=1;e.heap[i]=r}function m(e,t,i){var r,n,o,a,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],n=e.pending_buf[e.l_buf+c],c++,0===r?l(e,n,t):(l(e,(o=X[n])+N+1,t),0!==(a=z[o])&&d(e,n-=Q[o],a),l(e,o=s(--r),i),0!==(a=G[o])&&d(e,r-=ee[o],a))}while(c<e.last_lit);l(e,L,t)}function g(e,t){var i,r,n,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,d=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=V,i=0;i<d;i++)0!==o[2*i]?(e.heap[++e.heap_len]=l=i,e.depth[i]=0):o[2*i+1]=0;for(;e.heap_len<2;)o[2*(n=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[n]=0,e.opt_len--,a&&(e.static_len-=s[2*n+1]);for(t.max_code=l,i=e.heap_len>>1;i>=1;i--)A(e,o,i);n=d;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],A(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=r,o[2*n]=o[2*i]+o[2*r],e.depth[n]=(e.depth[i]>=e.depth[r]?e.depth[i]:e.depth[r])+1,o[2*i+1]=o[2*r+1]=n,e.heap[1]=n++,A(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,r,n,o,s,a,d=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,u=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,f=t.stat_desc.max_length,A=0;for(o=0;o<=B;o++)e.bl_count[o]=0;for(d[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<V;i++)(o=d[2*d[2*(r=e.heap[i])+1]+1]+1)>f&&(o=f,A++),d[2*r+1]=o,r>l||(e.bl_count[o]++,s=0,r>=p&&(s=h[r-p]),a=d[2*r],e.opt_len+=a*(o+s),u&&(e.static_len+=a*(c[2*r+1]+s)));if(0!==A){do{for(o=f-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[f]--,A-=2}while(A>0);for(o=f;0!==o;o--)for(r=e.bl_count[o];0!==r;)(n=e.heap[--i])>l||(d[2*n+1]!==o&&(e.opt_len+=(o-d[2*n+1])*d[2*n],d[2*n+1]=o),r--)}}(e,t),u(o,l,e.bl_count)}function y(e,t,i){var r,n,o=-1,s=t[1],a=0,d=7,l=4;for(0===s&&(d=138,l=3),t[2*(i+1)+1]=65535,r=0;r<=i;r++)n=s,s=t[2*(r+1)+1],++a<d&&n===s||(a<l?e.bl_tree[2*n]+=a:0!==n?(n!==o&&e.bl_tree[2*n]++,e.bl_tree[2*F]++):a<=10?e.bl_tree[2*U]++:e.bl_tree[2*H]++,a=0,o=n,0===s?(d=138,l=3):n===s?(d=6,l=3):(d=7,l=4))}function v(e,t,i){var r,n,o=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),r=0;r<=i;r++)if(n=s,s=t[2*(r+1)+1],!(++a<c&&n===s)){if(a<u)do{l(e,n,e.bl_tree)}while(0!==--a);else 0!==n?(n!==o&&(l(e,n,e.bl_tree),a--),l(e,F,e.bl_tree),d(e,a-3,2)):a<=10?(l(e,U,e.bl_tree),d(e,a-3,3)):(l(e,H,e.bl_tree),d(e,a-11,7));a=0,o=n,0===s?(c=138,u=3):n===s?(c=6,u=3):(c=7,u=4)}}function _(e,t,i,r){d(e,(C<<1)+(r?1:0),3),function(e,t,i,r){p(e),r&&(a(e,i),a(e,~i)),w.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}(e,t,i,!0)}var w=i(9),E=4,S=0,b=1,T=2,C=0,k=1,I=2,P=29,N=256,D=N+1+P,O=30,R=19,V=2*D+1,B=15,M=16,x=7,L=256,F=16,U=17,H=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(D+2));r(Y);var q=new Array(2*O);r(q);var K=new Array(512);r(K);var X=new Array(256);r(X);var Q=new Array(P);r(Q);var J,Z,$,ee=new Array(O);r(ee);var te=!1;t._tr_init=function(e){te||(!function(){var e,t,i,r,o,s=new Array(B+1);for(i=0,r=0;r<P-1;r++)for(Q[r]=i,e=0;e<1<<z[r];e++)X[i++]=r;for(X[i-1]=r,o=0,r=0;r<16;r++)for(ee[r]=o,e=0;e<1<<G[r];e++)K[o++]=r;for(o>>=7;r<O;r++)for(ee[r]=o<<7,e=0;e<1<<G[r]-7;e++)K[256+o++]=r;for(t=0;t<=B;t++)s[t]=0;for(e=0;e<=143;)Y[2*e+1]=8,e++,s[8]++;for(;e<=255;)Y[2*e+1]=9,e++,s[9]++;for(;e<=279;)Y[2*e+1]=7,e++,s[7]++;for(;e<=287;)Y[2*e+1]=8,e++,s[8]++;for(u(Y,D+1,s),e=0;e<O;e++)q[2*e+1]=5,q[2*e]=c(e,5);J=new n(Y,z,N+1,D,B),Z=new n(q,G,0,O,B),$=new n(new Array(0),W,0,R,x)}(),te=!0),e.l_desc=new o(e.dyn_ltree,J),e.d_desc=new o(e.dyn_dtree,Z),e.bl_desc=new o(e.bl_tree,$),e.bi_buf=0,e.bi_valid=0,h(e)},t._tr_stored_block=_,t._tr_flush_block=function(e,t,i,r){var n,o,s=0;e.level>0?(e.strm.data_type===T&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return S;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return b;for(t=32;t<N;t++)if(0!==e.dyn_ltree[2*t])return b;return S}(e)),g(e,e.l_desc),g(e,e.d_desc),s=function(e){var t;for(y(e,e.dyn_ltree,e.l_desc.max_code),y(e,e.dyn_dtree,e.d_desc.max_code),g(e,e.bl_desc),t=R-1;t>=3&&0===e.bl_tree[2*j[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=n&&(n=o)):n=o=i+5,i+4<=n&&-1!==t?_(e,t,i,r):e.strategy===E||o===n?(d(e,(k<<1)+(r?1:0),3),m(e,Y,q)):(d(e,(I<<1)+(r?1:0),3),function(e,t,i,r){var n;for(d(e,t-257,5),d(e,i-1,5),d(e,r-4,4),n=0;n<r;n++)d(e,e.bl_tree[2*j[n]+1],3);v(e,e.dyn_ltree,t-1),v(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),m(e,e.dyn_ltree,e.dyn_dtree)),h(e),r&&p(e)},t._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(X[i]+N+1)]++,e.dyn_dtree[2*s(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){d(e,k<<1,3),l(e,L,Y),function(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,i){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=o.inflateInit2(this.strm,t.windowBits);if(i!==d.Z_OK)throw new Error(l[i]);if(this.header=new u,o.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=a.string2buf(t.dictionary):"[object ArrayBuffer]"===h.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=o.inflateSetDictionary(this.strm,t.dictionary))!==d.Z_OK))throw new Error(l[i])}function n(e,t){var i=new r(t);if(i.push(e,!0),i.err)throw i.msg||l[i.err];return i.result}var o=i(45),s=i(9),a=i(33),d=i(35),l=i(22),c=i(34),u=i(48),h=Object.prototype.toString;r.prototype.push=function(e,t){var i,r,n,l,c,u=this.strm,p=this.options.chunkSize,f=this.options.dictionary,A=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?d.Z_FINISH:d.Z_NO_FLUSH,"string"===typeof e?u.input=a.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?u.input=new Uint8Array(e):u.input=e,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new s.Buf8(p),u.next_out=0,u.avail_out=p),(i=o.inflate(u,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&f&&(i=o.inflateSetDictionary(this.strm,f)),i===d.Z_BUF_ERROR&&!0===A&&(i=d.Z_OK,A=!1),i!==d.Z_STREAM_END&&i!==d.Z_OK)return this.onEnd(i),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&i!==d.Z_STREAM_END&&(0!==u.avail_in||r!==d.Z_FINISH&&r!==d.Z_SYNC_FLUSH)||("string"===this.options.to?(n=a.utf8border(u.output,u.next_out),l=u.next_out-n,c=a.buf2string(u.output,n),u.next_out=l,u.avail_out=p-l,l&&s.arraySet(u.output,u.output,n,l,0),this.onData(c)):this.onData(s.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(A=!0)}while((u.avail_in>0||0===u.avail_out)&&i!==d.Z_STREAM_END);return i===d.Z_STREAM_END&&(r=d.Z_FINISH),r===d.Z_FINISH?(i=o.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===d.Z_OK):r!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),u.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===d.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=r,t.inflate=n,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,n(e,t)},t.ungzip=n},function(e,t,i){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=O,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new p.Buf32(ce),t.distcode=t.distdyn=new p.Buf32(ue),t.sane=1,t.back=-1,b):k}function s(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,o(e)):k}function a(e,t){var i,r;return e&&e.state?(r=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?k:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=i,r.wbits=t,s(e))):k}function d(e,t){var i,r;return e?(r=new n,e.state=r,r.window=null,(i=a(e,t))!==b&&(e.state=null),i):k}function l(e){if(pe){var t;for(u=new p.Buf32(512),h=new p.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(g(v,e.lens,0,288,u,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;g(_,e.lens,0,32,h,0,e.work,{bits:5}),pe=!1}e.lencode=u,e.lenbits=9,e.distcode=h,e.distbits=5}function c(e,t,i,r){var n,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new p.Buf8(o.wsize)),r>=o.wsize?(p.arraySet(o.window,t,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((n=o.wsize-o.wnext)>r&&(n=r),p.arraySet(o.window,t,i-r,n,o.wnext),(r-=n)?(p.arraySet(o.window,t,i-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=n,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=n))),0}var u,h,p=i(9),f=i(31),A=i(32),m=i(46),g=i(47),y=0,v=1,_=2,w=4,E=5,S=6,b=0,T=1,C=2,k=-2,I=-3,P=-4,N=-5,D=8,O=1,R=2,V=3,B=4,M=5,x=6,L=7,F=8,U=9,H=10,z=11,G=12,W=13,j=14,Y=15,q=16,K=17,X=18,Q=19,J=20,Z=21,$=22,ee=23,te=24,ie=25,re=26,ne=27,oe=28,se=29,ae=30,de=31,le=32,ce=852,ue=592,he=15,pe=!0;t.inflateReset=s,t.inflateReset2=a,t.inflateResetKeep=o,t.inflateInit=function(e){return d(e,he)},t.inflateInit2=d,t.inflate=function(e,t){var i,n,o,s,a,d,u,h,ce,ue,he,pe,fe,Ae,me,ge,ye,ve,_e,we,Ee,Se,be,Te,Ce=0,ke=new p.Buf8(4),Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return k;(i=e.state).mode===G&&(i.mode=W),a=e.next_out,o=e.output,u=e.avail_out,s=e.next_in,n=e.input,d=e.avail_in,h=i.hold,ce=i.bits,ue=d,he=u,Se=b;e:for(;;)switch(i.mode){case O:if(0===i.wrap){i.mode=W;break}for(;ce<16;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}if(2&i.wrap&&35615===h){i.check=0,ke[0]=255&h,ke[1]=h>>>8&255,i.check=A(i.check,ke,2,0),h=0,ce=0,i.mode=R;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",i.mode=ae;break}if((15&h)!==D){e.msg="unknown compression method",i.mode=ae;break}if(ce-=4,Ee=8+(15&(h>>>=4)),0===i.wbits)i.wbits=Ee;else if(Ee>i.wbits){e.msg="invalid window size",i.mode=ae;break}i.dmax=1<<Ee,e.adler=i.check=1,i.mode=512&h?H:G,h=0,ce=0;break;case R:for(;ce<16;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}if(i.flags=h,(255&i.flags)!==D){e.msg="unknown compression method",i.mode=ae;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=ae;break}i.head&&(i.head.text=h>>8&1),512&i.flags&&(ke[0]=255&h,ke[1]=h>>>8&255,i.check=A(i.check,ke,2,0)),h=0,ce=0,i.mode=V;case V:for(;ce<32;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}i.head&&(i.head.time=h),512&i.flags&&(ke[0]=255&h,ke[1]=h>>>8&255,ke[2]=h>>>16&255,ke[3]=h>>>24&255,i.check=A(i.check,ke,4,0)),h=0,ce=0,i.mode=B;case B:for(;ce<16;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}i.head&&(i.head.xflags=255&h,i.head.os=h>>8),512&i.flags&&(ke[0]=255&h,ke[1]=h>>>8&255,i.check=A(i.check,ke,2,0)),h=0,ce=0,i.mode=M;case M:if(1024&i.flags){for(;ce<16;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}i.length=h,i.head&&(i.head.extra_len=h),512&i.flags&&(ke[0]=255&h,ke[1]=h>>>8&255,i.check=A(i.check,ke,2,0)),h=0,ce=0}else i.head&&(i.head.extra=null);i.mode=x;case x:if(1024&i.flags&&((pe=i.length)>d&&(pe=d),pe&&(i.head&&(Ee=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),p.arraySet(i.head.extra,n,s,pe,Ee)),512&i.flags&&(i.check=A(i.check,n,pe,s)),d-=pe,s+=pe,i.length-=pe),i.length))break e;i.length=0,i.mode=L;case L:if(2048&i.flags){if(0===d)break e;pe=0;do{Ee=n[s+pe++],i.head&&Ee&&i.length<65536&&(i.head.name+=String.fromCharCode(Ee))}while(Ee&&pe<d);if(512&i.flags&&(i.check=A(i.check,n,pe,s)),d-=pe,s+=pe,Ee)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=F;case F:if(4096&i.flags){if(0===d)break e;pe=0;do{Ee=n[s+pe++],i.head&&Ee&&i.length<65536&&(i.head.comment+=String.fromCharCode(Ee))}while(Ee&&pe<d);if(512&i.flags&&(i.check=A(i.check,n,pe,s)),d-=pe,s+=pe,Ee)break e}else i.head&&(i.head.comment=null);i.mode=U;case U:if(512&i.flags){for(;ce<16;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}if(h!==(65535&i.check)){e.msg="header crc mismatch",i.mode=ae;break}h=0,ce=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=G;break;case H:for(;ce<32;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}e.adler=i.check=r(h),h=0,ce=0,i.mode=z;case z:if(0===i.havedict)return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=d,i.hold=h,i.bits=ce,C;e.adler=i.check=1,i.mode=G;case G:if(t===E||t===S)break e;case W:if(i.last){h>>>=7&ce,ce-=7&ce,i.mode=ne;break}for(;ce<3;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}switch(i.last=1&h,ce-=1,3&(h>>>=1)){case 0:i.mode=j;break;case 1:if(l(i),i.mode=J,t===S){h>>>=2,ce-=2;break e}break;case 2:i.mode=K;break;case 3:e.msg="invalid block type",i.mode=ae}h>>>=2,ce-=2;break;case j:for(h>>>=7&ce,ce-=7&ce;ce<32;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}if((65535&h)!==(h>>>16^65535)){e.msg="invalid stored block lengths",i.mode=ae;break}if(i.length=65535&h,h=0,ce=0,i.mode=Y,t===S)break e;case Y:i.mode=q;case q:if(pe=i.length){if(pe>d&&(pe=d),pe>u&&(pe=u),0===pe)break e;p.arraySet(o,n,s,pe,a),d-=pe,s+=pe,u-=pe,a+=pe,i.length-=pe;break}i.mode=G;break;case K:for(;ce<14;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}if(i.nlen=257+(31&h),h>>>=5,ce-=5,i.ndist=1+(31&h),h>>>=5,ce-=5,i.ncode=4+(15&h),h>>>=4,ce-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=ae;break}i.have=0,i.mode=X;case X:for(;i.have<i.ncode;){for(;ce<3;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}i.lens[Ie[i.have++]]=7&h,h>>>=3,ce-=3}for(;i.have<19;)i.lens[Ie[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,be={bits:i.lenbits},Se=g(y,i.lens,0,19,i.lencode,0,i.work,be),i.lenbits=be.bits,Se){e.msg="invalid code lengths set",i.mode=ae;break}i.have=0,i.mode=Q;case Q:for(;i.have<i.nlen+i.ndist;){for(;ge=(Ce=i.lencode[h&(1<<i.lenbits)-1])>>>16&255,ye=65535&Ce,!((me=Ce>>>24)<=ce);){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}if(ye<16)h>>>=me,ce-=me,i.lens[i.have++]=ye;else{if(16===ye){for(Te=me+2;ce<Te;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}if(h>>>=me,ce-=me,0===i.have){e.msg="invalid bit length repeat",i.mode=ae;break}Ee=i.lens[i.have-1],pe=3+(3&h),h>>>=2,ce-=2}else if(17===ye){for(Te=me+3;ce<Te;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}ce-=me,Ee=0,pe=3+(7&(h>>>=me)),h>>>=3,ce-=3}else{for(Te=me+7;ce<Te;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}ce-=me,Ee=0,pe=11+(127&(h>>>=me)),h>>>=7,ce-=7}if(i.have+pe>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=ae;break}for(;pe--;)i.lens[i.have++]=Ee}}if(i.mode===ae)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=ae;break}if(i.lenbits=9,be={bits:i.lenbits},Se=g(v,i.lens,0,i.nlen,i.lencode,0,i.work,be),i.lenbits=be.bits,Se){e.msg="invalid literal/lengths set",i.mode=ae;break}if(i.distbits=6,i.distcode=i.distdyn,be={bits:i.distbits},Se=g(_,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,be),i.distbits=be.bits,Se){e.msg="invalid distances set",i.mode=ae;break}if(i.mode=J,t===S)break e;case J:i.mode=Z;case Z:if(d>=6&&u>=258){e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=d,i.hold=h,i.bits=ce,m(e,he),a=e.next_out,o=e.output,u=e.avail_out,s=e.next_in,n=e.input,d=e.avail_in,h=i.hold,ce=i.bits,i.mode===G&&(i.back=-1);break}for(i.back=0;ge=(Ce=i.lencode[h&(1<<i.lenbits)-1])>>>16&255,ye=65535&Ce,!((me=Ce>>>24)<=ce);){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}if(ge&&0===(240&ge)){for(ve=me,_e=ge,we=ye;ge=(Ce=i.lencode[we+((h&(1<<ve+_e)-1)>>ve)])>>>16&255,ye=65535&Ce,!(ve+(me=Ce>>>24)<=ce);){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}h>>>=ve,ce-=ve,i.back+=ve}if(h>>>=me,ce-=me,i.back+=me,i.length=ye,0===ge){i.mode=re;break}if(32&ge){i.back=-1,i.mode=G;break}if(64&ge){e.msg="invalid literal/length code",i.mode=ae;break}i.extra=15&ge,i.mode=$;case $:if(i.extra){for(Te=i.extra;ce<Te;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}i.length+=h&(1<<i.extra)-1,h>>>=i.extra,ce-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=ee;case ee:for(;ge=(Ce=i.distcode[h&(1<<i.distbits)-1])>>>16&255,ye=65535&Ce,!((me=Ce>>>24)<=ce);){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}if(0===(240&ge)){for(ve=me,_e=ge,we=ye;ge=(Ce=i.distcode[we+((h&(1<<ve+_e)-1)>>ve)])>>>16&255,ye=65535&Ce,!(ve+(me=Ce>>>24)<=ce);){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}h>>>=ve,ce-=ve,i.back+=ve}if(h>>>=me,ce-=me,i.back+=me,64&ge){e.msg="invalid distance code",i.mode=ae;break}i.offset=ye,i.extra=15&ge,i.mode=te;case te:if(i.extra){for(Te=i.extra;ce<Te;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}i.offset+=h&(1<<i.extra)-1,h>>>=i.extra,ce-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=ae;break}i.mode=ie;case ie:if(0===u)break e;if(pe=he-u,i.offset>pe){if((pe=i.offset-pe)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=ae;break}pe>i.wnext?(pe-=i.wnext,fe=i.wsize-pe):fe=i.wnext-pe,pe>i.length&&(pe=i.length),Ae=i.window}else Ae=o,fe=a-i.offset,pe=i.length;pe>u&&(pe=u),u-=pe,i.length-=pe;do{o[a++]=Ae[fe++]}while(--pe);0===i.length&&(i.mode=Z);break;case re:if(0===u)break e;o[a++]=i.length,u--,i.mode=Z;break;case ne:if(i.wrap){for(;ce<32;){if(0===d)break e;d--,h|=n[s++]<<ce,ce+=8}if(he-=u,e.total_out+=he,i.total+=he,he&&(e.adler=i.check=i.flags?A(i.check,o,he,a-he):f(i.check,o,he,a-he)),he=u,(i.flags?h:r(h))!==i.check){e.msg="incorrect data check",i.mode=ae;break}h=0,ce=0}i.mode=oe;case oe:if(i.wrap&&i.flags){for(;ce<32;){if(0===d)break e;d--,h+=n[s++]<<ce,ce+=8}if(h!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=ae;break}h=0,ce=0}i.mode=se;case se:Se=T;break e;case ae:Se=I;break e;case de:return P;case le:default:return k}return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=d,i.hold=h,i.bits=ce,(i.wsize||he!==e.avail_out&&i.mode<ae&&(i.mode<ne||t!==w))&&c(e,e.output,e.next_out,he-e.avail_out)?(i.mode=de,P):(ue-=e.avail_in,he-=e.avail_out,e.total_in+=ue,e.total_out+=he,i.total+=he,i.wrap&&he&&(e.adler=i.check=i.flags?A(i.check,o,he,e.next_out-he):f(i.check,o,he,e.next_out-he)),e.data_type=i.bits+(i.last?64:0)+(i.mode===G?128:0)+(i.mode===J||i.mode===Y?256:0),(0===ue&&0===he||t===w)&&Se===b&&(Se=N),Se)},t.inflateEnd=function(e){if(!e||!e.state)return k;var t=e.state;return t.window&&(t.window=null),e.state=null,b},t.inflateGetHeader=function(e,t){var i;return e&&e.state?0===(2&(i=e.state).wrap)?k:(i.head=t,t.done=!1,b):k},t.inflateSetDictionary=function(e,t){var i,r=t.length;return e&&e.state?0!==(i=e.state).wrap&&i.mode!==z?k:i.mode===z&&f(1,t,r,0)!==i.check?I:c(e,t,r,r)?(i.mode=de,P):(i.havedict=1,b):k},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,i){"use strict";e.exports=function(e,t){var i,r,n,o,s,a,d,l,c,u,h,p,f,A,m,g,y,v,_,w,E,S,b,T,C;i=e.state,r=e.next_in,T=e.input,n=r+(e.avail_in-5),o=e.next_out,C=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),d=i.dmax,l=i.wsize,c=i.whave,u=i.wnext,h=i.window,p=i.hold,f=i.bits,A=i.lencode,m=i.distcode,g=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;e:do{f<15&&(p+=T[r++]<<f,f+=8,p+=T[r++]<<f,f+=8),v=A[p&g];t:for(;;){if(p>>>=_=v>>>24,f-=_,0===(_=v>>>16&255))C[o++]=65535&v;else{if(!(16&_)){if(0===(64&_)){v=A[(65535&v)+(p&(1<<_)-1)];continue t}if(32&_){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}w=65535&v,(_&=15)&&(f<_&&(p+=T[r++]<<f,f+=8),w+=p&(1<<_)-1,p>>>=_,f-=_),f<15&&(p+=T[r++]<<f,f+=8,p+=T[r++]<<f,f+=8),v=m[p&y];i:for(;;){if(p>>>=_=v>>>24,f-=_,!(16&(_=v>>>16&255))){if(0===(64&_)){v=m[(65535&v)+(p&(1<<_)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(E=65535&v,f<(_&=15)&&(p+=T[r++]<<f,(f+=8)<_&&(p+=T[r++]<<f,f+=8)),(E+=p&(1<<_)-1)>d){e.msg="invalid distance too far back",i.mode=30;break e}if(p>>>=_,f-=_,E>(_=o-s)){if((_=E-_)>c&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(S=0,b=h,0===u){if(S+=l-_,_<w){w-=_;do{C[o++]=h[S++]}while(--_);S=o-E,b=C}}else if(u<_){if(S+=l+u-_,(_-=u)<w){w-=_;do{C[o++]=h[S++]}while(--_);if(S=0,u<w){w-=_=u;do{C[o++]=h[S++]}while(--_);S=o-E,b=C}}}else if(S+=u-_,_<w){w-=_;do{C[o++]=h[S++]}while(--_);S=o-E,b=C}for(;w>2;)C[o++]=b[S++],C[o++]=b[S++],C[o++]=b[S++],w-=3;w&&(C[o++]=b[S++],w>1&&(C[o++]=b[S++]))}else{S=o-E;do{C[o++]=C[S++],C[o++]=C[S++],C[o++]=C[S++],w-=3}while(w>2);w&&(C[o++]=C[S++],w>1&&(C[o++]=C[S++]))}break}}break}}while(r<n&&o<a);r-=w=f>>3,p&=(1<<(f-=w<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=o<a?a-o+257:257-(o-a),i.hold=p,i.bits=f}},function(e,t,i){"use strict";var r=i(9),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,i,d,l,c,u,h){var p,f,A,m,g,y,v,_,w,E=h.bits,S=0,b=0,T=0,C=0,k=0,I=0,P=0,N=0,D=0,O=0,R=null,V=0,B=new r.Buf16(16),M=new r.Buf16(16),x=null,L=0;for(S=0;S<=15;S++)B[S]=0;for(b=0;b<d;b++)B[t[i+b]]++;for(k=E,C=15;C>=1&&0===B[C];C--);if(k>C&&(k=C),0===C)return l[c++]=20971520,l[c++]=20971520,h.bits=1,0;for(T=1;T<C&&0===B[T];T++);for(k<T&&(k=T),N=1,S=1;S<=15;S++)if(N<<=1,(N-=B[S])<0)return-1;if(N>0&&(0===e||1!==C))return-1;for(M[1]=0,S=1;S<15;S++)M[S+1]=M[S]+B[S];for(b=0;b<d;b++)0!==t[i+b]&&(u[M[t[i+b]]++]=b);if(0===e?(R=x=u,y=19):1===e?(R=n,V-=257,x=o,L-=257,y=256):(R=s,x=a,y=-1),O=0,b=0,S=T,g=c,I=k,P=0,A=-1,m=(D=1<<k)-1,1===e&&D>852||2===e&&D>592)return 1;for(;;){v=S-P,u[b]<y?(_=0,w=u[b]):u[b]>y?(_=x[L+u[b]],w=R[V+u[b]]):(_=96,w=0),p=1<<S-P,T=f=1<<I;do{l[g+(O>>P)+(f-=p)]=v<<24|_<<16|w|0}while(0!==f);for(p=1<<S-1;O&p;)p>>=1;if(0!==p?(O&=p-1,O+=p):O=0,b++,0===--B[S]){if(S===C)break;S=t[i+u[b]]}if(S>k&&(O&m)!==A){for(0===P&&(P=k),g+=T,N=1<<(I=S-P);I+P<C&&!((N-=B[I+P])<=0);)I++,N<<=1;if(D+=1<<I,1===e&&D>852||2===e&&D>592)return 1;l[A=O&m]=k<<24|I<<16|g-c|0}}return 0!==O&&(l[g+O]=S-P<<24|64<<16|0),h.bits=k,0}},function(e,t,i){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e){e.exports={be:{adsdk:{ABUSE_SCREEN_DESCRIPTION:"",ABUSE_SCREEN_DESCRIPTION_SHORT:"",ABUSE_SCREEN_TITLE:"",ABUSE_VARIANT_ANNOYING:"",ABUSE_VARIANT_NOT_INTERESTED:"",ABUSE_VARIANT_SPAM:"",ABUSE_VARIANT_SPAM_SHORT:"",AD_TITLE:"",LEARN_MORE:"",MORE:"",REPEAT:"",SECONDS:"",SKIP:"",SKIP_TIME_LEFT:"",TIME_LEFT:"",UNMUTE:"",UNMUTE_INVITE:"",VISIT_SITE:"",YANDEX_DIRECT:"",YANDEX_DIRECT_LINK:""}},en:{adsdk:{ABUSE_SCREEN_DESCRIPTION:"",ABUSE_SCREEN_DESCRIPTION_SHORT:"",ABUSE_SCREEN_TITLE:"",ABUSE_VARIANT_ANNOYING:"",ABUSE_VARIANT_NOT_INTERESTED:"I'm not interested in this",ABUSE_VARIANT_SPAM:"Inappropriate content or spam",ABUSE_VARIANT_SPAM_SHORT:"",AD_TITLE:"Ad",LEARN_MORE:"Learn more",MORE:"More",REPEAT:"Repeat",SECONDS:"sec",SKIP:"Skip",SKIP_TIME_LEFT:"Skip ad",TIME_LEFT:"Ad",UNMUTE:"Unmute",UNMUTE_INVITE:"Move mouse over ad<br>to hear sound",VISIT_SITE:"Go to advertiser\u2019s site",YANDEX_DIRECT:"",YANDEX_DIRECT_LINK:""}},kk:{adsdk:{ABUSE_SCREEN_DESCRIPTION:"",ABUSE_SCREEN_DESCRIPTION_SHORT:"",ABUSE_SCREEN_TITLE:"",ABUSE_VARIANT_ANNOYING:"",ABUSE_VARIANT_NOT_INTERESTED:"",ABUSE_VARIANT_SPAM:"",ABUSE_VARIANT_SPAM_SHORT:"",AD_TITLE:"",LEARN_MORE:"",MORE:"",REPEAT:"",SECONDS:"",SKIP:"",SKIP_TIME_LEFT:"",TIME_LEFT:"",UNMUTE:"",UNMUTE_INVITE:"",VISIT_SITE:"",YANDEX_DIRECT:"",YANDEX_DIRECT_LINK:""}},ru:{adsdk:{ABUSE_SCREEN_DESCRIPTION:"\u041c\u044b \u0441\u0442\u0430\u0440\u0430\u0435\u043c\u0441\u044f \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u0443\u044e \u0432\u0430\u043c \u0440\u0435\u043a\u043b\u0430\u043c\u0443, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0432\u0430\u0448\u0438\u043c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0430\u043c. \u041f\u043e\u044f\u0441\u043d\u0438\u0442\u0435, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0447\u0435\u043c\u0443 \u0432\u0430\u043c \u043d\u0435 \u043f\u043e\u0434\u043e\u0448\u0451\u043b \u0440\u043e\u043b\u0438\u043a. \u042d\u0442\u043e \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u043c \u043b\u0443\u0447\u0448\u0435 \u043e\u0442\u0431\u0438\u0440\u0430\u0442\u044c \u0434\u043b\u044f \u0432\u0430\u0441 \u0440\u0435\u043a\u043b\u0430\u043c\u0443.",ABUSE_SCREEN_DESCRIPTION_SHORT:"\u041f\u043e\u044f\u0441\u043d\u0438\u0442\u0435, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0447\u0435\u043c\u0443 \u0432\u0430\u043c \u043d\u0435 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u0441\u044f \u0440\u043e\u043b\u0438\u043a. \u042d\u0442\u043e \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u043c \u043b\u0443\u0447\u0448\u0435 \u043e\u0442\u0431\u0438\u0440\u0430\u0442\u044c \u0434\u043b\u044f \u0432\u0430\u0441 \u0440\u0435\u043a\u043b\u0430\u043c\u0443.",ABUSE_SCREEN_TITLE:"\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430&nbsp;\u0440\u0435\u043a\u043b\u0430\u043c\u0443",ABUSE_VARIANT_ANNOYING:"\u041d\u0430\u0432\u044f\u0437\u0447\u0438\u0432\u043e \u0438\u043b\u0438 \u043d\u0430\u0434\u043e\u0435\u043b\u043e",ABUSE_VARIANT_NOT_INTERESTED:"\u041d\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0441\u044c \u044d\u0442\u043e\u0439 \u0442\u0435\u043c\u043e\u0439",ABUSE_VARIANT_SPAM:"\u0421\u043e\u043c\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f \u0438\u043b\u0438 \u0441\u043f\u0430\u043c",ABUSE_VARIANT_SPAM_SHORT:"\u041f\u043e\u0445\u043e\u0436\u0435 \u043d\u0430 \u0441\u043f\u0430\u043c",AD_TITLE:"\u0420\u0435\u043a\u043b\u0430\u043c\u0430",LEARN_MORE:"\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435",MORE:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435",REPEAT:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",SECONDS:"\u0441\u0435\u043a",SKIP:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c",SKIP_TIME_LEFT:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0440\u0435\u043a\u043b\u0430\u043c\u0443",TIME_LEFT:"\u0420\u0435\u043a\u043b\u0430\u043c\u0430",UNMUTE:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0437\u0432\u0443\u043a",UNMUTE_INVITE:"\u041d\u0430\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u0443\u0440\u0441\u043e\u0440,<br>\u0447\u0442\u043e\u0431\u044b \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0437\u0432\u0443\u043a",VISIT_SITE:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0441\u0430\u0439\u0442 \u0440\u0435\u043a\u043b\u0430\u043c\u043e\u0434\u0430\u0442\u0435\u043b\u044f",YANDEX_DIRECT:"\u042f\u043d\u0434\u0435\u043a\u0441.\u0414\u0438\u0440\u0435\u043a\u0442",YANDEX_DIRECT_LINK:"https://direct.yandex.ru/?partner"}},tr:{adsdk:{ABUSE_SCREEN_DESCRIPTION:"",ABUSE_SCREEN_DESCRIPTION_SHORT:"",ABUSE_SCREEN_TITLE:"",ABUSE_VARIANT_ANNOYING:"",ABUSE_VARIANT_NOT_INTERESTED:"Bu konuyla ilgilenmiyorum",ABUSE_VARIANT_SPAM:"G\xfcvenilir olmayan i\xe7erik veya spam",ABUSE_VARIANT_SPAM_SHORT:"",AD_TITLE:"Reklam",LEARN_MORE:"Daha fazla bilgi edinin",MORE:"Daha fazla",REPEAT:"Tekrarla",SECONDS:"sn",SKIP:"Atla",SKIP_TIME_LEFT:"Reklam\u0131 atla",TIME_LEFT:"Reklam",UNMUTE:"",UNMUTE_INVITE:"Sesi a\xe7mak i\xe7in<br>imleci \xfczerine getirin",VISIT_SITE:"Reklam verenin sitesine git",YANDEX_DIRECT:"",YANDEX_DIRECT_LINK:""}},uk:{adsdk:{ABUSE_SCREEN_DESCRIPTION:"",ABUSE_SCREEN_DESCRIPTION_SHORT:"",ABUSE_SCREEN_TITLE:"",ABUSE_VARIANT_ANNOYING:"",ABUSE_VARIANT_NOT_INTERESTED:"",ABUSE_VARIANT_SPAM:"",ABUSE_VARIANT_SPAM_SHORT:"",AD_TITLE:"",LEARN_MORE:"",MORE:"",REPEAT:"",SECONDS:"",SKIP:"",SKIP_TIME_LEFT:"",TIME_LEFT:"",UNMUTE:"",UNMUTE_INVITE:"",VISIT_SITE:"",YANDEX_DIRECT:"",YANDEX_DIRECT_LINK:""}},uz:{adsdk:{ABUSE_SCREEN_DESCRIPTION:"",ABUSE_SCREEN_DESCRIPTION_SHORT:"",ABUSE_SCREEN_TITLE:"",ABUSE_VARIANT_ANNOYING:"",ABUSE_VARIANT_NOT_INTERESTED:"",ABUSE_VARIANT_SPAM:"",ABUSE_VARIANT_SPAM_SHORT:"",AD_TITLE:"",LEARN_MORE:"",MORE:"",REPEAT:"",SECONDS:"",SKIP:"",SKIP_TIME_LEFT:"",TIME_LEFT:"",UNMUTE:"",UNMUTE_INVITE:"",VISIT_SITE:"",YANDEX_DIRECT:"",YANDEX_DIRECT_LINK:""}}}},function(e,t){e.exports={initMoatTracking:function(e,t,i,r){var n=document.createElement("script"),o={events:[],addEvent:function(e){a.sendEvent?(o.events&&(a.sendEvent(o.events),o.events=!1),a.sendEvent(e)):o.events.push(e)}},s=function(t){return function(){var r,n=-1;if(e&&e.getAdVolume&&(r=e.getAdVolume()),"number"==typeof r&&!isNaN(r)&&0<=r&&(n=r),o.addEvent({type:t,adVolume:n}),-1!==h.indexOf(t)&&e&&e.unsubscribe&&!u)for(var s in u=!0,c)if(c.hasOwnProperty&&c.hasOwnProperty(s))try{e.unsubscribe(c[s],s)}catch(i){}}},a={adData:{ids:i,vpaid:e,build:"cc07a80-clean"},dispatchEvent:o.addEvent};i="_moatApi"+Math.floor(1e8*Math.random());var d,l,c={AdStarted:s("AdStarted"),AdStopped:s("AdStopped"),AdSkipped:s("AdSkipped"),AdLoaded:s("AdLoaded"),AdLinearChange:s("AdLinearChange"),AdSizeChange:s("AdSizeChange"),AdExpandedChange:s("AdExpandedChange"),AdSkippableStateChange:s("AdSkippableStateChange"),AdDurationChange:s("AdDurationChange"),AdRemainingTimeChange:s("AdRemainingTimeChange"),AdVolumeChange:s("AdVolumeChange"),AdImpression:s("AdImpression"),AdClickThru:s("AdClickThru"),AdInteraction:s("AdInteraction"),AdVideoStart:s("AdVideoStart"),AdVideoFirstQuartile:s("AdVideoFirstQuartile"),AdVideoMidpoint:s("AdVideoMidpoint"),AdVideoThirdQuartile:s("AdVideoThirdQuartile"),AdVideoComplete:s("AdVideoComplete"),AdUserAcceptInvitation:s("AdUserAcceptInvitation"),AdUserMinimize:s("AdUserMinimize"),AdUserClose:s("AdUserClose"),AdPaused:s("AdPaused"),AdPlaying:s("AdPlaying"),AdError:s("AdError")},u=!1,h=["AdStopped","AdSkipped","AdVideoComplete"];!function(){if(e&&e.subscribe)for(var t in c)c.hasOwnProperty&&c.hasOwnProperty(t)&&e.subscribe(c[t],t)}();try{l=(d=t.ownerDocument).defaultView||d.parentWindow}catch(p){d=document,l=window}return l[i]=a,n.type="text/javascript",t&&t.insertBefore(n,t.childNodes[0]||null),n.src="https://z.moatads.com/"+r+"/moatvideo.js#"+i,a}}},function(e,t){!function(e){function t(){this.intersectionSupport=!!e.IntersectionObserver,this.intersectionRatio=-1,this.observerData=[{percent:.5,duration:2e3,useFocus:!0,name:"MRC"}],this.audibilityFired=!1,this.secondsAudible=0,this.started=!1}function i(e){return e!=t.eventsMap.AdImpression||o?e==t.eventsMap.AdClickThru?"{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=cl&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&g.lu=":"{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=ev&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&a.evn="+e+"&g.ra={{random}}&a.ycp={{siteID}}":(o=!0,"{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=im&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&a.hr=XC&g.ra={{random}}&a.ycp={{siteID}}")}function r(e,t){for(var i in t)t.hasOwnProperty(i)&&(e=e.replace(new RegExp("{{"+i+"}}","g"),t[i]));return e}function n(e){(new Image).src=e}var o=!1;t.prototype.version=function(){console.log("[Viewability Observer JS] 2018.02.20")},t.VOLUME_ON="Audible",t.VOLUME_OFF="Inaudible",t.INITIALLY_ON="initially_unmuted",t.INITIALLY_OFF="initially_muted",t.FIRE_TIME=2e3,t.DELAY=250,t.ON_PAGE="OnPage",t.S_FRAME="SameDomainFrame",t.X_FRAME="CrossDomainFrame",t.VIEWABLE="Viewable",t.NOT_VIEWABLE="Unviewable",t.UNDETERMINED="Undetermined",t.VISIBILITY_RATIO=.5,t.USE_FOCUS=!0,t.eventsMap={AdLoaded:"load",AdStarted:"creativeView",AdVideoStart:"start",AdImpression:"",AdImpressionYandex:"AdImpressionYandex",AdVideoFirstQuartile:"firstQuartile",AdVideoMidpoint:"midpoint",AdVideoThirdQuartile:"thirdQuartile",AdVideoComplete:"complete",AdUserClose:"close",AdStopped:"stop",AdSkipped:"skip",AdClickThru:"click",AdPaused:"pause",AdPlaying:"resume",AdError:"error"},t.audioEventsMap={AdVideoStart:"start",AdVideoFirstQuartile:"firstQuartile",AdVideoMidpoint:"midpoint",AdVideoThirdQuartile:"thirdQuartile",AdVideoComplete:"complete"},t.playerSizeParams={PlayerSmallDesktop:[0,480],PlayerNormalDesktop:[480,720],PlayerBigDesktop:[720,960],PlayerHugeDesktop:[960,0],PlayerSmallMobile:[0,260],PlayerNormalMobile:[260,320],PlayerBigMobile:[320,380],PlayerHugeMobile:[380,0]},t.prototype.hasFocus=function(){return("undefined"===this.realDocument.hidden||!0!==this.realDocument.hidden)&&(this.getPosition()===t.X_FRAME||"function"!==typeof this.realWindow.top.document.hasFocus||this.realWindow.top.document.hasFocus())},t.prototype.getPosition=function(){if(!this.position)if(e.top===this.realWindow)this.position=t.ON_PAGE;else{this.position=t.S_FRAME;try{for(var i=this.realWindow;i.parent!==i;){if(i.parent.document.domain!==i.document.domain){this.position=t.X_FRAME;break}i=i.parent}}catch(r){this.position=t.X_FRAME}}return this.position},t.prototype.init=function(e,o,s){this.rootElement=e,this.realDocument=this.rootElement.ownerDocument,this.realWindow=this.realDocument.defaultView||this.realDocument.parentWindow,this.adParameters=JSON.parse(o),this.adParameters.agi=Math.round(1e3*Math.random()),this.adParameters.random=Math.round(1e8*Math.random()),this.adParameters.protocol="https:",this.vpaidObject=s,this.volume=-1,this.completeDispatched=this.durationChecked=!1,e={cet:0,pg:0,ulv:0,dnn:0};try{if("undefined"!==typeof this.adParameters.cp){var a=decodeURIComponent(this.adParameters.cp).split("|");for(o=0;o<a.length;o++)if(a[o]){var d=a[o].split(":");e[d[0]]=2!=d.length||("undefined"!==typeof e[d[0]]?isNaN(parseInt(d[1],10))?e[d[0]]:parseInt(d[1],10):d[1])}}}catch(c){}for(var l in this.customParams=e,0<this.customParams.pg&&(this.observerData=[{percent:.5,duration:2e3,useFocus:!0,name:"MRC"},{percent:.7,duration:2e3,useFocus:!0,name:"70and2"},{percent:.99,duration:2e3,useFocus:!0,name:"100and2"},{percent:.75,duration:5e3,useFocus:!0,name:"MRC75Prc"}]),0<this.customParams.ulv&&(this.observerData=[{percent:.5,duration:2e3,useFocus:!0,name:"MRC"},{percent:.5,duration:2e3,useFocus:!0,name:"visibility_2sec"},{percent:.5,duration:4e3,useFocus:!0,name:"visibility_4sec"},{percent:.5,duration:7e3,useFocus:!0,name:"visibility_7sec"},{percent:.5,duration:1e4,useFocus:!0,name:"visibility_10sec"},{percent:.5,duration:15e3,useFocus:!0,name:"visibility_15sec"},{percent:.5,duration:2e4,useFocus:!0,name:"visibility_20sec"},{percent:.5,duration:3e4,useFocus:!0,name:"visibility_30sec"}]),0<this.customParams.dnn&&(this.observerData=[{percent:.5,duration:2e3,useFocus:!0,name:"MRC"},{percent:.7,duration:5e3,useFocus:!0,name:"MRC70"}]),n(r(i(this.getPosition()),this.adParameters)),t.eventsMap)t.eventsMap.hasOwnProperty(l)&&s.subscribe(this.onVPAIDEvent.bind(this,l),l);if(this.intersectionSupport)this.intersectionObserver=new IntersectionObserver(function(e){this.intersectionRatio=Math.round(100*e[0].intersectionRatio)/100}.bind(this),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(this.rootElement);else if(this.getPosition()==t.X_FRAME)return n(r(i(this.observerData.shift().name+t.UNDETERMINED),this.adParameters)),!1},t.prototype.checkDuration=function(){if(this.vpaidObject&&"function"==typeof this.vpaidObject.getAdDuration&&this.vpaidObject.getAdDuration()){var e=Math.round(this.vpaidObject.getAdDuration());if(0<e){this.durationChecked=!0;for(var t=0;t<this.observerData.length;t++)this.observerData[t].duration>1e3*e&&(this.observerData.splice(t,1),t--)}else setTimeout(this.checkDuration,250)}},t.prototype.onVPAIDEvent=function(e){if(0<this.customParams.ulv&&!this.durationChecked&&"AdVideoStart"==e&&this.checkDuration(),"AdVideoStart"==e){this.onVPAIDEvent("AdImpression"),this.onVPAIDEvent("AdImpressionYandex"),this.started||(this.started=!0,this.updater=setInterval(t.updateTime.bind(this),t.DELAY),this.updaterAudibility=setInterval(t.updateTimeAudibility.bind(this),t.DELAY)),this.volume=parseFloat(this.vpaidObject.getAdVolume(),10),n(r(i(c=this.volume>0?t.INITIALLY_ON:t.INITIALLY_OFF),this.adParameters));var o=t.playerSizeParams,s=parseFloat(this.vpaidObject.getAdWidth(),10);for(var a in o)if(o.hasOwnProperty(a)){var d=o[a];(!d[0]||s>=d[0])&&(!d[1]||s<d[1])&&n(r(i(a),this.adParameters))}}if("AdVideoComplete"==e){if(this.completeDispatched)return;if(this.completeDispatched=!0,0<this.customParams.pg)(l=this.getViewAbility(t.VISIBILITY_RATIO,t.USE_FOCUS)).state===t.VIEWABLE&&n(r(i("AdVideoCompleteMRC"),this.adParameters))}if("AdClickThru"==e&&0<this.customParams.cet&&(0<(l=this.vpaidObject.getAdDuration()-this.vpaidObject.getAdRemainingTime())&&n(r(i("AdVideoClick"+parseInt(l,10)),this.adParameters))),"AdPaused"==e&&(clearInterval(this.updater),clearInterval(this.updaterAudibility)),-1!=["AdStopped","AdSkipped","AdUserClose"].indexOf(e)&&this.stop(),t.eventsMap.hasOwnProperty(e)){var l=this.getViewAbility(t.VISIBILITY_RATIO,t.USE_FOCUS);n(r(i(t.eventsMap[e]),this.adParameters)),"AdImpression"!=e&&"AdImpressionYandex"!=e&&l.state&&n(r(i(e+l.state),this.adParameters))}if("AdVideoThirdQuartile"==e&&this.checkTwoSeconds(),t.audioEventsMap.hasOwnProperty(e)){this.volume=parseFloat(this.vpaidObject.getAdVolume(),10);var c=this.volume>0?t.VOLUME_ON:t.VOLUME_OFF;n(r(i(t.eventsMap[e]+c),this.adParameters))}},t.prototype.checkTwoSeconds=function(){if(!this.completeDispatched){var e=this.vpaidObject.getAdRemainingTime();if(0<e&&1.1>e)this.completeDispatched=!0,e=this.getViewAbility(t.VISIBILITY_RATIO,t.USE_FOCUS),0<this.customParams.pg&&e.state===t.VIEWABLE&&n(r(i("AdVideoCompleteMRC"),this.adParameters)),n(r(i(t.eventsMap.AdVideoComplete),this.adParameters)),e.state&&n(r(i("AdVideoComplete"+e.state),this.adParameters)),this.stop();else{var o=this;setTimeout((function(){o.checkTwoSeconds()}),250)}}},t.prototype.stop=function(){if(clearInterval(this.updater),clearInterval(this.updaterAudibility),this.started=!1,t.updateTime.call(this),this.observerData&&this.observerData.length)for(;this.observerData.length;)n(r(i(this.observerData.shift().name+t.NOT_VIEWABLE),this.adParameters));this.updater&&clearInterval(this.updater),this.audibilityFired||(this.audibilityFired=!0,n(r(i(t.VOLUME_OFF),this.adParameters)))},t.prototype.getViewAbility=function(i,r){if(this.intersectionSupport)return t.match(this.hasFocus(),r,this.intersectionRatio,i);if(this.getPosition()==t.X_FRAME)return{error:t.UNDETERMINED,state:t.UNDETERMINED,percent:0,focus:!1};var n=this.realWindow,o=this.rootElement.getBoundingClientRect(),s=t.calculateArea(o,n);try{for(;n!==e.top;){var a=n.name||(n.name="wb-"+Math.round(1e6*Math.random()).toString(16));o=(n=n.parent).frames[a].frameElement.getBoundingClientRect(),s=Math.min(t.calculateArea(o,n),s)}}catch(d){return{error:t.UNDETERMINED,state:t.UNDETERMINED,percent:0,focus:!1}}return t.match(this.hasFocus(),r,s,i)},t.updateTime=function(){var e=this.getViewAbility();if(!this.observerData||!this.observerData.length)return clearInterval(this.updater);for(var o=[],s=0;s<this.observerData.length;s++){var a=this.observerData[s];a.timeInView=(!a.useFocus||e.focus)&&e.percent>=a.percent?t.DELAY+(a.timeInView||0):0,a.timeInView>=a.duration?n(r(i(a.name+t.VIEWABLE),this.adParameters)):o.push(a)}this.observerData=o},t.updateTimeAudibility=function(){if(this.audibilityFired)return clearInterval(this.updaterAudibility);this.volume=parseFloat(this.vpaidObject.getAdVolume(),10),this.volume<=0||isNaN(this.volume)?this.secondsAudible=0:this.secondsAudible+=t.DELAY,this.secondsAudible>=t.FIRE_TIME&&(this.audibilityFired=!0,n(r(i(t.VOLUME_ON),this.adParameters)))},t.match=function(e,i,r,n){var o=t.NOT_VIEWABLE;return(e||!i)&&r>=n&&(o=t.VIEWABLE),{state:o,focus:e,percent:r}},t.calculateArea=function(e,t){var i=e.width*e.height,r=e.width,n=e.height;return 0>e.top&&(n+=e.top),e.bottom>t.innerHeight&&(n-=e.bottom-t.innerHeight),0>e.left&&(r+=e.left),e.right>t.innerWidth&&(r-=e.right-t.innerWidth),r*n/i},e.WBViewAbility=t}(window)},function(e,t,i){"use strict";function r(e,t,i,r,o,s){var a,d,l=document.createElement("script"),c=[],u={vidIntType:"3",vidIntVersion:"1.0",adData:{ids:t,duration:i,url:o},dispatchEvent:function(e){u.sendEvent?(c&&(c.push(e),e=c,c=!1),u.sendEvent(e)):c&&c.push(e)},clientCallback:s};t="_moatApi"+Math.floor(1e8*Math.random());try{d=(a=e.ownerDocument).defaultView||a.parentWindow}catch(h){a=document,d=window}return d[t]=u,l.type="text/javascript",e&&e.insertBefore(l,e.childNodes[0]||null),l.src="https://yastatic.net/pcode-static/measurers/"+n+"/moat/"+r+"/moatvideo.js#"+t,u}i.r(t),i.d(t,"initMoatTracking",(function(){return r}));const n=27},function(e,t){e.exports='<svg width=\'100%\' height=\'100%\' viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M1 1L13 13" stroke="#AFC5CF" stroke-width="2"/>\n<path d="M1 13L13 1" stroke="#AFC5CF" stroke-width="2"/>\n</svg>\n'},function(e,t,i){"use strict";function r(e){return"string"===typeof e}function n(e,t){const i=e.style;for(const r in t)if(t.hasOwnProperty(r)){i[Jo(r)]=t[r]}}function o(e){if(!e||!e.toString)return!1;const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}function s(e,t){let i=e[t];if(!o(i)){const n=i;try{delete e[t];const r=e[t];"function"===typeof r&&(i=r),e[t]=n}catch(r){}}return i}function a(){}function d(e,t,i,r){const n=function(e){let t=!1,i=!1,r=!1;return!0===e?t=!0:"object"===typeof e&&(t=Boolean(e.capture),i=Boolean(e.passive),r=Boolean(e.once)),{capture:t,passive:i,once:r}}(r),o=is?n:n.capture,s=n.once&&!es?function(e){a(),i.call(this,e)}:i,a=()=>{$o(e,t,s,o)};return Zo(e,t,s,o),a}function l(e,t,i){return e>i?i:e<t?t:e}function c(e){return"ontouchstart"in e}function u(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){const t=e.navigator||{},{msMaxTouchPoints:i,maxTouchPoints:r}=t;return i||r||0}(e)>0&&!os(e)}function h(e){return"function"===typeof e||"Function"===ls(e)}function p(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}function f(e,t){if(!h(e.matchMedia))return!1;const i=e.matchMedia(t);return p(i)&&Boolean(i.matches)}function A(e){return void 0===e&&(e=window),u(e)||function(e){return f(e,cs)}(e)||function(e){return f(e,us)}(e)||function(e){const{DocumentTouch:t}=e;return Boolean(t)&&e.document instanceof t}(e)||c(e)}function m(e){void 0===e&&(e=window);const t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!hs(e)}function g(e){void 0===e&&(e=window);try{return(e.navigator||{}).userAgent||""}catch(t){return""}}function y(e,t){if(void 0===t&&(t=!0),fs&&t)return[];{const t=[];let r=e;for(;;)try{if(!(r=r.ownerDocument.defaultView.frameElement))return t;t.push(r)}catch(i){return t}}}function v(e){const t=e.ownerDocument,i=t.defaultView,r=t.documentElement,n=e.getBoundingClientRect();return{winWidth:As?Math.max(r.clientWidth,i.innerWidth||0):i.innerWidth||r.clientWidth||t.body.clientWidth,winHeight:As?Math.max(r.clientHeight,i.innerHeight||0):i.innerHeight||r.clientHeight||t.body.clientHeight,left:n.left,top:n.top,width:n.width,height:n.height}}function _(e){let{width:t,height:i,top:r,left:n,winWidth:o,winHeight:s}=e;const a=n+t,d=r+i,c=l(n,0,o),u=l(r,0,s);return{winWidth:o,winHeight:s,left:c,top:u,width:l(a,c,o)-c,height:l(d,u,s)-u}}function w(e,t){return e.width*e.height/(t.width*t.height)}function E(e){const t=v(e);let i=_(t),r=w(i,t);return y(e).forEach(e=>{const n=v(e),o=function(e,t){return{winWidth:t.winWidth,winHeight:t.winHeight,left:e.left+t.left,top:e.top+t.top,width:e.width,height:e.height}}(i,n);i=_(o),r=w(i,t)}),r}function S(e,t){void 0===t&&(t=!0);const i=ms(e);return i?!e[i]:t}function b(e,t){const i=function(e){const t=ms(e);if(t)return t.replace(/hidden/i,"visibilitychange")}(e);return i?d(e,i,()=>{t(S(e))}):a}function T(e,t){let{content:i,size:r}=void 0===t?{}:t;const n=e.ownerDocument.createElement("iframe");n.scrolling="no",n.setAttribute("allowfullscreen",""),n.style.display="block",r&&(n.height=r.height,n.width=r.width),e.appendChild(n);const o=n.contentDocument;return o.open(),i&&o.write(i),o.close(),o.body.style.margin="0",n.style.borderWidth="0",n}function C(e){if(!e)return;const{parentElement:t}=e;t&&t.removeChild(e)}function k(e){e.src="",C(e)}function I(e){return void 0===e&&(e=window),void 0===Ts&&(Ts=function(e){void 0===e&&(e=window);return e.JSON&&o(e.JSON.stringify)&&o(e.JSON.parse)}(e)?e.JSON:{stringify:ks("stringify"),parse:ks("parse")}),Ts}function P(e){return I().stringify(e,function(){const e=[],t=function(){const e="undefined"!==typeof WeakMap?new WeakMap:void 0,t=[];return{set:(i,r)=>{if(void 0!==e)try{e.set(i,r)}catch(n){t.push({path:r,value:i})}else t.push({path:r,value:i})},get:i=>{const r=bs(t,e=>e.value===i);return void 0!==e&&void 0===r?e.get(i):r?r.path:void 0}}}();return(i,n)=>{if(h(n))return r(n.name)?n.name:"[Function]";if(!p(n))return n;const o=t.get(n);if(o)return"[Circular "+o+"]";for(;e.length>0&&e[e.length-1].value[i]!==n;)e.pop();const s=(e.length>0?e[e.length-1].path:"")+(i?"/"+i:"~");return e.push({path:s,value:n}),t.set(n,s),n}}())}function N(e){let t="";for(let i=0;i<e;i++)t+=(16*Ws()|0).toString(16);return t}function D(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}function O(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];qs(e)&&e.forEach(e=>{"function"===typeof e&&e(...i)})}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function V(e,t){!function(e){return"function"===typeof e.dispatch}(e)?e(t):e.dispatch(t)}function B(e,t){e.forEach(e=>{V(e,t)})}function M(e){return 0===ra.length&&(ia=window.setInterval(()=>{ra.forEach(e=>e())},ta)),ra.push(e),()=>{const t=ra.indexOf(e);t>-1&&ra.splice(t,1),0===ra.length&&clearInterval(ia)}}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function L(e){setTimeout(()=>{throw e},0)}function F(e,t){try{return e()}catch(i){"function"===typeof t&&t(i)}}function U(e){return"number"===typeof e&&isFinite(e)&&e>0}function H(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function z(e){const t={};for(const i in e)H(e,i)&&void 0!==e[i]&&(t[i]=e[i]);return t}function G(e,t){return void 0===t&&(t=1e6),W(function(e,t){e=e.replace(/\r\n/g,"\n");let i="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);let o;if(n<128?o=String.fromCharCode(n):n>127&&n<2048?(o=String.fromCharCode(n>>6|192),o+=String.fromCharCode(63&n|128)):(o=String.fromCharCode(n>>12|224),o+=String.fromCharCode(n>>6&63|128),o+=String.fromCharCode(63&n|128)),i.length+o.length>t)break;i+=o}return i}(e,3*t/4|0))}function W(e){let t="",i=0;for(;i<e.length;){const r=e.charCodeAt(i++),n=e.charCodeAt(i++),o=e.charCodeAt(i++),s=r>>2,a=(3&r)<<4|n>>4;let d=(15&n)<<2|o>>6,l=63&o;isNaN(n)?d=l=64:isNaN(o)&&(l=64),t=t+pa.charAt(s)+pa.charAt(a)+pa.charAt(d)+pa.charAt(l)}return t}function j(e){return function(e){const t=[];let i=0;for(;i<e.length;){const r=e.charCodeAt(i);if(r<128)t.push(String.fromCharCode(r)),i++;else if(r>191&&r<224){const n=e.charCodeAt(i+1);t.push(String.fromCharCode((31&r)<<6|63&n)),i+=2}else{const n=e.charCodeAt(i+1),o=e.charCodeAt(i+2);t.push(String.fromCharCode((15&r)<<12|(63&n)<<6|63&o)),i+=3}}return t.join("")}(function(e){const t=[];let i=0;e=e.replace(/[^A-Za-z0-9\-_=]/g,"");for(;i<e.length;){const r=pa.indexOf(e.charAt(i++)),n=pa.indexOf(e.charAt(i++)),o=pa.indexOf(e.charAt(i++)),s=pa.indexOf(e.charAt(i++)),a=r<<2|n>>4,d=(15&n)<<4|o>>2,l=(3&o)<<6|s;t.push(String.fromCharCode(a)),64!==o&&t.push(String.fromCharCode(d)),64!==s&&t.push(String.fromCharCode(l))}return t.join("")}(e))}function Y(e){return"number"===typeof e&&isFinite(e)}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function K(e){const t=function(e){if("function"===typeof e.getVideoPlaybackQuality){const t=e.getVideoPlaybackQuality();if(p(t)){const{droppedVideoFrames:e,corruptedVideoFrames:i,totalVideoFrames:r}=t;return{droppedVideoFrames:e,corruptedVideoFrames:i,totalVideoFrames:r}}}const t=e;return"number"===typeof t.webkitDroppedFrameCount&&"number"===typeof t.webkitDecodedFrameCount?q({},Aa,{droppedVideoFrames:t.webkitDroppedFrameCount,totalVideoFrames:t.webkitDecodedFrameCount}):Aa}(e),{droppedVideoFrames:i,totalVideoFrames:r}=t;let n=ma.droppedVideoFramesRatio;return U(r)&&Y(i)&&(n=i/r),q({},t,{droppedVideoFramesRatio:n})}function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Q(e){let t=function(){t=()=>i;const i=e.apply(this,arguments);return i};return function(){return t.apply(this,arguments)}}function J(e,t,i){for(const r in e)H(e,r)&&t.call(i,e[r],r,e)}function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function $(e){Ta.href=e;let t=Ta.pathname||"";"/"!==t.charAt(0)&&(t="/"+t);const i=(Ta.search||"")+(Ta.hash||""),r=e.lastIndexOf(i),n=-1===r?e:e.slice(0,r);if(Ca.test(e)){const t=$(e.replace(Ca,"https:"));return Ta.href=e,Z({},t,{originalPath:n,protocol:e.slice(0,e.indexOf(":")+1),href:Ta.href})}const o=Ta.protocol&&/^[a-z\-]+:/i.test(Ta.protocol)?Ta.protocol:"";return{originalPath:n,href:Ta.href,protocol:o,host:Ta.host,hostname:Ta.hostname,port:Ta.port,pathname:t,search:Ta.search,hash:Ta.hash}}function ee(e,t){if(void 0===t&&(t=!1),t){const t=e.originalPath,i="/"===e.pathname&&"/"!==t[t.length-1];return e.originalPath+(i?"/":"")+e.search+e.hash}const i="443"===e.port||"80"===e.port?e.hostname:e.host;return e.protocol+"//"+i+e.pathname+e.search+e.hash}function te(e){const t={},i=e.replace(/^[?#]+/,"").replace(/#.*$/,"").split("&");for(let r=0;r<i.length;r++){const e=i[r].indexOf("=");let n,o;if(-1===e?(n=ka(i[r]),o=""):(n=ka(i[r].slice(0,e)),o=i[r].slice(e+1)),n){const e=Boolean(/(\[\])$/.exec(n));n=n.replace(/\[\]$/,""),e?void 0===t[n]?t[n]=[ka(o)]:t[n]=[].concat(t[n],ka(o)):t[n]=ka(o)}}return t}function ie(e){const t=[];for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];qs(r)?t.push(Ia(i,r)):void 0!==r&&t.push(i+"="+encodeURIComponent(r))}return"?"+t.join("&")}function re(e,t,i){let{override:r=!0,saveOriginalPath:n=!1}=void 0===i?{}:i;const o=$(e),s=te(o.search);return J(t,(e,t)=>{(void 0===s[t]||r)&&(s[t]=e)}),ee(Z({},o,{search:ie(s)}),n)}function ne(e){return $(e).pathname.split("/").pop()||""}function oe(e){if(!e)return[];const t=[];for(let i=0;i<e.length;i++)t.push(e[i]);return t}function se(e){const t=y(e.documentElement).map(e=>e.ownerDocument);return t.unshift(e),t.map(e=>({location:D(e.defaultView),referrer:e.referrer}))}function ae(e){if("function"===typeof Object.keys)return Object.keys(e);{const t=[];for(const i in e)H(e,i)&&t.push(i);return t}}function de(e){return"function"===typeof Object.entries?Object.entries(e):ae(e).map(t=>[t,e[t]])}function le(e){return r(e)&&e.length>0}function ce(e){p(console)&&h(console.warn)&&console.warn(e)}function ue(e,t){const i={UrlParams:()=>xa[t],SessionStorage:()=>e.sessionStorage.getItem(t),LocalStorage:()=>e.localStorage.getItem(t),GlobalVariable:()=>{for(const n of js(e)){var i,r;const e=null===(i=n.Ya)||void 0===i?void 0:null===(r=i.hardcodedParams)||void 0===r?void 0:r[t];if(e)return String(e)}}};for(const[r,n]of de(i)){const e=F(n);if(le(e))return ce("VAS WARNING! Hardcoded parameter=["+t+"] with value=["+e+"] found in ["+r+"]"),e}}function he(){if(ed&&ed.document&&"function"===typeof ed.document.hasFocus)try{return ed.document.hasFocus()}catch(e){}}function pe(e){return td?oe(e.location.ancestorOrigins):[]}function fe(e){let t=e;const i=[e],{top:r}=e;for(;t!==r;)t=t.parent,i.push(t);return i}function Ae(e){let t="",i="";if(e){se(e).reverse().forEach(e=>{let{location:r,referrer:n}=e;t=t||r,i=i||n})}return{location:t,referrer:i}}function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function ge(e){const{method:t,url:i,async:r=!0,data:n,responseType:o="text",onBeforeSend:s=a,onRetry:d=a,checkStatus:l=(e=>dd===e),headers:c={},xhrConstructor:u=XMLHttpRequest,retries:h=0,timeout:p=0,withCredentials:f,onAbort:A,onSetup:m}=e,g=e.onSuccess?Q(e.onSuccess):a,y=e.onError?Q(e.onError):a;let v,_=!1,w=0,E=e=>{_=!0,E=a,v=e,S(new Error("Abort request")),"function"===typeof A&&A(e)};const S=t=>{if(b.onerror=null,b.onreadystatechange=null,w&&clearTimeout(w),w&&b.readyState!==ld||_)try{b.abort()}catch(t){}if(!_)if(h>0){const i=d(t,b);if("boolean"!==typeof i||Boolean(i)||E(),_)return;ge(me({},e,{onSetup:e=>{let{abort:t}=e;E=e=>t(e),_&&t(v)},retries:h-1}))}else E=a,y(t,b)},b=new u;try{b.open(t,i,r)}catch(T){return void S(T)}if(b.responseType=o,b.withCredentials=Boolean(f),J(c,(e,t)=>{try{b.setRequestHeader(t,e)}catch(T){}}),p>0&&isFinite(p)&&(w=window.setTimeout(()=>{S(new Error("Request timeout, "+i))},p)),b.onerror=S,b.onreadystatechange=()=>{if(b.readyState===ld){const{status:e}=b;l(e)?(E=a,clearTimeout(w),g(b)):S(new Error("Invalid request status "+e+", "+i))}},("function"!==typeof m||(m({abort:e=>E(e)}),!_))&&(s(b,e),!_))try{b.send(n)}catch(T){S(T)}}function ye(e){const t={};return e.forEach(e=>{let[i,r]=e;t[i]=r}),t}function ve(e,t,i,r){void 0===r&&(r=!1);const n=(r?Ws():cd)<e,o=n?t:i;return"function"===typeof o&&o(),n}function _e(e,t){return!!hd&&window.navigator.sendBeacon(e,t)}function we(e){return e[Math.floor(Ws()*e.length)]}function Ee(e,t){const i={};return ae(e).forEach(r=>{i[r]=t(e[r],r)}),i}function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function be(e,t,i){void 0===i&&(i=" ");const r=t-e.length;if(r>0){let t=i;for(;t.length<r;)t+=t;return(t.length>r?t.substr(0,r):t)+e}return e}function Te(e){const t=[];for(const[i,r]of e){const e=Ce(r,i);t.push(e)}return function(e){if(e.length>53)throw new Error("bitUtils.toDecimal: \u0431\u043e\u043b\u044c\u0448\u0435 53 \u0431\u0438\u0442 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0438\u0437-\u0437\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e\u0439 \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438, \u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0430 \u0434\u043b\u0438\u043d\u043e\u0439 "+e.length+" \u0431\u0438\u0442.");return parseInt(e,2)}(t.reverse().join(""))}function Ce(e,t){return ke(function(e,t){return Number(e)&Math.pow(2,t)-1}(e,t).toString(2),t)}function ke(e,t){return be(e,t,"0")}function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ne(e){return[].concat.apply([],e)}function De(e,t){const i=[],r=[];return Ja(e,(n,o)=>{t(n,o,e)?i.push(n):r.push(n)}),[i,r]}function Oe(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.join("")}function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ve(e,t){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function Be(e,t){return-1!==Nl(e,t)}function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Le(e){return new Promise((t,i)=>{ge(xe({},e,{onSuccess:t,onError:i}))})}function Fe(){return(Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ue(e,t){let i=e+Ws()*(t+1-e);return i=Math.floor(i)}function He(e,t){void 0===e&&(e="a"),void 0===t&&(t="z");const i=Ue(e.charCodeAt(0),t.charCodeAt(0));return String.fromCharCode(i)}function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ge(e){const{dropCacheOnRetry:t=!1,onBeforeLoad:i=a,retries:r=0}=e;if(e.checkLoad&&e.checkLoad())return void(e.onLoad&&e.onLoad());let n=i,o=0;return t&&r>0&&(n=e=>{if(i(e),o>0){const t=-1===e.src.indexOf("?")?"?":"&",i=function(e){const t=[];for(let i=0;i<e;i++)t.push(He());return t.join("")}(4);e.src+=t+i}o++}),function e(t){const{src:i,win:r=window,charset:n=Wl,async:o=!0,retries:s=0,onRetry:d=a,retryDelay:l=0,checkLoad:c=jl,onBeforeLoad:u=a,onLoad:h=a,onError:p=a}=t;const f=r.document.createElement("script");const A=r=>{s>0?(d(r),e(ze({},t,{src:i,retries:s-1}))):p(r),C(f)};f.type="text/javascript";f.async=o;f.onload=()=>c(f)?h():A(new Error("checkLoad for "+i+" failed"));f.onerror=e=>{try{r.setTimeout(()=>{A(e)},l)}catch(e){}};f.src=i;f.charset=n;u(f);(function(e){const t=e.document;let i=t.getElementsByTagName("head")[0];return i||(i=t.createElement("head"),t.documentElement.appendChild(i)),i})(r).appendChild(f)}(ze({},e,{onBeforeLoad:n}))}function We(){return(We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ye(e){return new Promise((t,i)=>{!function(e){const{win:t=window,src:i,retries:r=0,onError:n=a}=e,o=new Ns({id:Gl.LOAD_SCRIPT_ERROR,message:"Failed to load script ["+i+"]",details:{src:i,isSelfWindow:t===window,onBeforeLoad:Boolean(e.onBeforeLoad),retries:r}});Ge(We({},e,{win:t,onError:()=>n(o)}))}(je({},e,{onLoad:t,onError:i}))})}function qe(e,t){void 0===t&&(t=window);const{hostname:i}=$(e),r=Xa(t);return r?-1===Vl.indexOf(i)?e:r(e):e}function Ke(){return(Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Xe(e){const{src:t,win:i}=e;return Ye(Ke({},Yl,e,{src:qe(t,i)}))}function Qe(e,t){return function(){try{e(...arguments)}catch(i){xd.error({error:new Ea(i,{code:t})}),L(i)}}}function Je(e){return void 0===e&&(e=Ga),fd||function(e){return Ml+"1.0-"+e+"/"}(e)}function Ze(e,t,i){var r;let n;var o;(void 0===t&&(t=Ga),i)?n=null===(o=i.ya)||void 0===o?void 0:o.videoAd.modules[t]:n=ic.videoAd.modules[t];return null===(r=n)||void 0===r?void 0:r[e]}function $e(e){let{moduleName:t,version:i=Ga,onSuccess:r,onError:n,win:o}=e;const s=Date.now(),a=Qe(e=>{const n=Date.now()-s;xd.values({name:"ModuleLoaded",labels:{bundleName:t},data:{loaderVersion:za,bundleVersion:i},values:{timeSpent:n}}),r(e)},"LOAD_MODULE_CALLBACK_ERROR"),d=Qe(e=>{xd.error({error:e}),n(e)},"LOAD_MODULE_CALLBACK_ERROR"),l=Ze(t,i);if(l)return void a(l);const c=Ql(i)?Hl.ES2017:Hl.ES5,u=Xa(o),h=""+Je(i)+c+"/"+zl[t]+".bundle.js";Xe({src:"function"===typeof u?u(h):h,win:o}).then(()=>{const e=Ze(t,i,o);e?a(e):d(new Ea({code:"CANNOT_INIT_MODULE",details:{moduleName:t,version:i}}))}).catch(e=>{d(new Ea(e,{code:"CANNOT_LOAD_MODULE",details:{moduleName:t,version:i}}))})}function et(e,t){tc.ya||(tc.ya={}),tc.ya.isDeploying=!0,function e(t,i){const r=i.split(".");let n=window;for(let s=0;s<r.length-1;s++)n=n[r[s]];const o=r[r.length-1];if(void 0===n[o])n[o]=t;else if("object"===typeof n[o])for(const s in t)t.hasOwnProperty(s)&&e(t[s],i+"."+s)}(e,t),delete tc.ya.isDeploying}function tt(e,t){const i=(e.ownerDocument||document).createElement("style");return i.type="text/css",i.textContent=t,e.appendChild(i),i}function it(e){return document.createElement("video")}function rt(e,t){return t===e.substring(e.length-t.length)}function nt(){return Pl&&Cl<=9}function ot(e,t){const i=document.createElement("div");return e&&(i.className=e),t&&(i.innerHTML=t),i}function st(e){const{hostname:t}=$(e);return t===rc||rt(t,"."+rc)}function at(e){if(!e)return!1;const{hostname:t}=$(e);return!(!t||0===t.length)&&nc(oc,e=>e===t||rt(t,"."+e))}function dt(e){let{url:t,options:i,ignoreAbd:r=!1}=e;if(h(Qa)&&!r)return t;if(!at(t)&&!st(t))return t;const n=Math.round(100*i.visibility),o=Math.round(i.size.width),s=Math.round(i.size.height),a=Math.round(100*i.videoVolume);return re(t,{[Zd]:String(za),[$d]:Ad,[el]:String(n),[tl]:String(o),[il]:String(s),[md]:String(Cd.serialize()),[rl]:Tl(),[nl]:Ba,[sl]:sd,[al]:ad?"0":"1",[Qd]:String(Date.now()),[Jd]:String((new Date).getTimezoneOffset()),[ol]:Xd?"0":"1",[dl]:String(a),[ll]:i.videoMuted?"1":"0"},{override:!1})}function lt(e){if(e){const{localName:t,name:i,documentElement:r}=e;if("string"===typeof t)return t;if("string"===typeof i)return i;if(r){const{tagName:e}=r;if("string"===typeof e)return e}}return""}function ct(e,t,i){if(void 0===i&&(i=null),e.hasAttribute(t)){var r;const i=e.getAttribute(t);return null!==(r=null===i||void 0===i?void 0:i.trim())&&void 0!==r?r:""}return i}function ut(e){var t,i;return null!==(t=null===e||void 0===e?void 0:null===(i=e.textContent)||void 0===i?void 0:i.trim())&&void 0!==t?t:""}function ht(e){return Boolean(e&&ut(e).length)}function pt(e){const t=parseInt(ct(e,"width",0),10),i=parseInt(ct(e,"height",0),10),r=parseInt(ct(e,"bitrate",0),10),n=ct(e,"minBitrate",""),o=n?parseInt(n,10):void 0,s=ct(e,"maxBitrate",""),a=s?parseInt(s,10):void 0,d={width:t,height:i,bitrate:r,type:ct(e,"type"),url:ut(e)};return U(o)&&(d.minBitrate=o),U(a)&&(d.maxBitrate=a),U(o)&&U(a)&&o>a&&xd.error({error:new Ea({code:"MIN_BITRATE_GREATER_THAN_MAX_BITRATE",details:{adMediaFile:d}})}),d.url?d.type?d:(xd.error({error:new Ea({code:"INVALID_MEDIA_FILE_TYPE",details:{adMediaFile:d}})}),null):(xd.error({error:new Ea({code:"INVALID_MEDIA_FILE_URL",details:{adMediaFile:d}})}),null)}function ft(e){const t=e.querySelector("StaticResource");return{width:parseInt(ct(e,"width",0),10),height:parseInt(ct(e,"height",0),10),type:t?ct(t,"creativeType"):null,url:t?ut(t):"",bitrate:0,minBitrate:void 0,maxBitrate:void 0}}function At(e){let t;try{t=JSON.stringify(e)}catch(i){}return t}function mt(e){return!!p(e)&&("string"===typeof e.url&&(!!e.url.trim()&&("string"===typeof e.type&&!!e.type.trim())))}function gt(e){if(void 0===e)return;const t=Number(e);return U(t)?t:void 0}function yt(e){const t={};return p(e)&&Ja(ae(e),i=>{const r=e[i];Array.isArray(r)&&(t[i]=Es(r,e=>"string"===typeof e))}),t}function vt(){const e={};for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ja(i,t=>{Ja(ae(t),i=>{const r=e[i]||[],n=t[i]||[];e[i]=[...r,...n]})}),e}function _t(e){const t=p(e)?e:{},i=[],r="number"===typeof t.bufferFullTimeout?Math.min(t.bufferFullTimeout,gc):void 0;let n;return void 0!==t.skipDelay&&(Y(t.skipDelay)&&t.skipDelay>=0?n=t.skipDelay:i.push(new Ea({code:"INCORRECT_SKIP_DELAY_FORMAT",details:{value:t.skipDelay,stringValue:String(t.skipDelay),type:typeof t.skipDelay}}))),{config:{autoplay:void 0===t.autoplay?void 0:Boolean(t.autoplay),pauseOnClickThrough:void 0===t.pauseOnClickThrough||Boolean(t.pauseOnClickThrough),poster:"string"===typeof t.poster?String(t.poster):void 0,showGuiForVpaid:"showGuiForVpaid"in t?Boolean(t.showGuiForVpaid):void 0,backgroundBlur:void 0===t.backgroundBlur?void 0:Boolean(t.backgroundBlur),isClickable:"isClickable"in t?Boolean(t.isClickable):void 0,title:"string"===typeof t.title?t.title.trim():void 0,description:"string"===typeof t.description?t.description:void 0,skipDelay:n,videoTimeout:U(t.videoTimeout)?t.videoTimeout:void 0,vpaidTimeout:U(t.vpaidTimeout)?t.vpaidTimeout:void 0,bufferFullTimeout:r,bufferEmptyLimit:U(t.bufferEmptyLimit)?t.bufferEmptyLimit:void 0,clickThroughUrl:"string"===typeof t.clickThroughUrl?t.clickThroughUrl:void 0,clickThroughConfirmation:"boolean"===typeof t.clickThroughConfirmation?t.clickThroughConfirmation:void 0,trackingEvents:t.trackingEvents?yt(t.trackingEvents):{},controlsSettings:wt(t),videoSlotCanAutoPlay:void 0===t.videoSlotCanAutoPlay?void 0:Boolean(t.videoSlotCanAutoPlay),desiredBitrate:gt(t.desiredBitrate),clickThroughCallback:"function"===typeof t.clickThroughCallback?t.clickThroughCallback:void 0,lang:"string"===typeof t.lang?t.lang:cc},errors:i}}function wt(e){const t=qd(pc);if(!p(e))return t;const i=(e,i)=>{void 0===t.controlsVisibility[i]&&"boolean"===typeof e&&(t.controlsVisibility[i]=e)};if(i(e.showTimeLeft,yc.timeLeft),i(e.showSoundButton,yc.mute),i(e.showTitle,yc.title),i(e.showSkipButton,yc.skip),p(e.controlsSettings))if(p(e.controlsSettings.controlsVisibility)&&J(e.controlsSettings.controlsVisibility,(e,i)=>{vc.indexOf(i)>-1&&"boolean"===typeof e&&(t.controlsVisibility[i]=e)}),p(!1===e.controlsSettings.visibility)&&Ja(vc,e=>{t.controlsVisibility[e]=!1}),r(e.controlsSettings.controlsVariant)){const{controlsVariant:i}=e.controlsSettings;"regular"===i?t.controlsVariant="regular":"banner"===i?t.controlsVariant="banner":xd.error({error:new Ea({code:"INCORRECT_CONTROLS_VARIANT",details:{variant:i}})})}else mc&&(t.controlsVariant="regular");return delete t.visibility,t}function Et(e){const{AUCTION_DC_PARAMS:t}=e;if(!p(t))return;const{data_params:i}=t;if(!p(i))return;const{misc:n}=i;if(!p(n))return;const{click_url:o}=n;if(!p(o))return;const{abuse:s}=o;return r(s)?s:void 0}function St(e){const{text:t,textColor:i,isVisible:r}=e||Sc;return{text:t||Sc.text,textColor:i||Sc.textColor,isVisible:"boolean"===typeof r?r:Sc.isVisible}}function bt(e){const t=[];let i={};if("string"===typeof e)try{i=JSON.parse(e)}catch(m){t.push(new Ea(m,{code:"INVALID_INTERACTIVE_AD_PARAMETERS",details:{adParametersString:e}}))}else t.push(new Ea({code:"NO_INTERACTIVE_AD_PARAMETERS",details:{}}));const{playbackParameters:r,tickerData:n,mediaFiles:o,adParameters:s,interactiveElements:a=[],background:d=Ec}=i;i.videoStates&&t.push(new Ea({code:"USING_VIDEO_STATES_IN_IV_AD_PARAMETERS",details:{adParametersString:e}}));const{adMediaFiles:l,errorCodes:c}=function(e){const t=[];if(void 0===e)return{adMediaFiles:[],errorCodes:t};if(!Array.isArray(e))return t.push("INVALID_MEDIA_FILES_PARAMETER_IN_AD_PARAMETERS"),{adMediaFiles:[],errorCodes:t};if(0===e.length)return t.push("NO_MEDIA_FILES_IN_AD_PARAMETERS"),{adMediaFiles:[],errorCodes:t};const i=Es(e,mt);return i.length!==e.length&&t.push("AD_PARAMETERS_CONTAINS_INVALID_MEDIA_FILES"),{adMediaFiles:i,errorCodes:t}}(o),u=ss(c,t=>new Ea({code:t,details:{adParametersString:e}}));t.push(...u);const{config:h,errors:f}=_t(r);return t.push(...f),{raw:i,parsed:{playbackParameters:h,abuseUrl:Et(i),tickerData:St(n),adMediaFiles:l,adParameters:(A=s,"string"===typeof A?A:p(A)?At(A):void 0),interactiveElements:a,background:d},errors:t};var A}function Tt(e){const t=0===e.indexOf("https://an.yandex.ru/count/"),i="awaps.yandex.net"===$(e).hostname;if(t||i){if(_e(e,""))return{url:e,promise:Promise.resolve(!0)}}else at(e)&&xd.event({name:"TrackYandexUrlWithImage",data:{url:e},probability:Gd});return{url:e,promise:new Promise(t=>{const i=new Image;i.onload=()=>t(!0),i.onerror=()=>t(!1),i.src=e})}}function Ct(e){if(!Fd||!console)return;const t="AdSDKJS["+Ad+"]:";for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];console.log&&console.log(t,e,...r)}function kt(e){let{error:t,trackingUrls:i}=e;return Ct("Track error ==> ",t),function(e){if(!Array.isArray(e))return[];const t=ss(e,e=>dt({url:e,options:_a}));return ss(t,Tt)}(i)}function It(e,t){return void 0===t&&(t=[]),xd.errorToStats(e),kt({error:e,trackingUrls:t})}function Pt(e){const t=Object.values;if("function"===typeof t)return t(e);{const t=[];for(const i in e)H(e,i)&&t.push(e[i]);return t}}function Nt(e){return"string"!==typeof e?NaN:ca(e.split(":").reverse(),(e,t,i)=>e+parseFloat(t)*60**i,0)}function Dt(e){if(e.indexOf("%")>-1){const t=parseFloat(e);return Y(t)?{unit:Tc.portion,value:t/100}:void 0}const t=Nt(e);if(Y(t))return{unit:Tc.seconds,value:t}}function Ot(e){const t=e.getAttribute("sequence");if(null===t)return dc;const i=parseInt(t,10);return"number"===typeof(r=i)&&isFinite(r)&&r>=0?i:(xd.error({error:new Ea({code:"INCORRECT_VAST_AD_SEQUENCE_ATTRIBUTE",details:{sequenceAttr:t}})}),dc);var r}function Rt(){return(Rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Vt(){return(Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Bt(e){let{url:t,data:i,timeout:r,withCredentials:n=!0}=e;return new Promise(async(e,o)=>{"https:"===window.location.protocol&&(t=function(e){return Ta.href=e,Ta.protocol="https:",Ta.href}(t));const s=Ll(r),a=Rc({url:t,data:i,withCredentials:n});try{const t=await Promise.race([a,s]);return t?e(t):o({reason:"timeout",error:new Error("XHR Timeout")})}catch(d){return o(d)}})}function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function xt(e,t){let i=!1;const r=function(){const r=i?t:e;return i=!0,r.apply(this,arguments)};return function(){return r.apply(this,arguments)}}function Lt(e){Ja(e,e=>xd.error({error:e}))}function Ft(e){let{win:t,methodName:i,data:r,id:n}=e;t.postMessage({methodName:i,data:r,id:n},"*")}function Ut(){return(Ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ht(){return(Ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function zt(e){return e.top!==e.self}function Gt(e,t,i){const r=function(e){return'{"grab_version":1,"is_async":'+function(){try{return Boolean(Ya.Context._asyncModeOn)}catch(e){return!0}}()+',"old_grab_size":'+e.length+"}"}(t);let n=Wt(r,t+e);if(n.length<i)return n;let o=i,s="";for(;s.length<i;){n=s,s=Wt(r,(t+e).substr(0,o)),o+=512}return n}function Wt(e,t){return W(e+"\n"+Hc.deflate(t,{level:9,to:"string"}))}function jt(e){const t=e.document.head,i=e.document.title;if(!t)return"<head></head>";const r=t.getElementsByTagName("meta"),n=["<head>"];i&&n.push("<title>"+i+"</title>");for(let o=0;o<r.length;o++){const e=(r[o].getAttribute("name")||"").toLowerCase();"description"!==e&&"keywords"!==e||(n.push("<meta"),Yt(r[o],"name",n),Yt(r[o],"content",n),n.push("/>"))}return n.push("</head>"),n.join("")}function Yt(e,t,i){e.hasAttribute(t)&&i.push(" "+t+'="'+e.getAttribute(t)+'"')}function qt(e,t,i){const r=e.document.getElementsByTagName(t)[0]||e.document.getElementsByClassName(t)[0],n=[];return r&&function(e,t,i){const r=[e],n=Number(new Date);let o=0,s=0;for(;r.length>0&&o<1e4&&Number(new Date)-n<100;){const e=r.pop();if(e instanceof Gc)e.textContentLength===s?(i.length=e.resultLength,o=e.textContentLength):(i.push(e.name),o+=e.name.length);else if(Jt(e)){const t=e.textContent||"";i.push(t),o+=t.length,s+=t.length}else if(Zt(e)&&Kt(e)){const n=new Gc("</"+e.tagName.toLowerCase()+">",s,i.length);Xt(e,t,i),o+=i[i.length-1].length,r.push(n);for(let t=e.lastChild;t;t=t.previousSibling)if(Qt(t))if(Jt(t))r.push(t);else if(Zt(t)){const e=t.nodeName.toLowerCase();if("select"===e){const e=t.childNodes.length,r=t.selectedIndex;if(0!==e&&-1!==r){const e=t.options[r],n="<select><option>"+(e.textContent||e.innerText)+"</option></select>";i.push(n),s+=n.length}break}-1===zc.indexOf(e)&&r.push(t)}}}}(r,i,n),n.join("").replace(/\s{2,}/g," ").replace(/>\s*</g,"><")}function Kt(e){const t=Boolean(e.offsetWidth||e.offsetHeight);return e&&e.getClientRects?Boolean(t||e.getClientRects().length):e&&e.currentStyle?t&&"hidden"!==e.currentStyle.visibility:t}function Xt(e,t,i){const r=[],n=e.tagName.toLowerCase();if(r.push("<"+n),function(e){for(let t=e.lastChild;t;t=t.previousSibling)if(Jt(t)&&Qt(t))return!0;return!1}(e))for(let o=0;o<t.length;o++)e.hasAttribute(t[o])&&r.push(" "+t[o]+'="'+e.getAttribute(t[o])+'"');r.push(">"),i.push(r.join(""))}function Qt(e){if(!e.lastChild)return Wc.test(e.innerText);for(let t=e.lastChild;t;t=t.previousSibling){if(!t.lastChild&&Wc.test(t.innerText))return!0;for(let e=t.lastChild;e;e=e.previousSibling)if(Wc.test(e.innerText))return!0}return!1}function Jt(e){return 3===e.nodeType}function Zt(e){return 1===e.nodeType}function $t(e,t){const i=window,r=i.document;if(t){const e=function(e){return e.location.host}(r);if((" "+jc+" ").indexOf(" "+e+" ")>-1)return t}let n=ei(e,r);if("t\n"===n&&i.top!==i.self)try{n=ei(e,i.parent.document)}catch(o){}return G(n,e)}function ei(e,t){const i=[];let r=0;i.push("t"+(t.title||"")),r+=i[0].length;for(let n=1;n<4&&r<e;n++){const e=t.getElementsByTagName("h"+n),o=e.length;for(let t=0;t<o;t++){const o=ti(e[t]);r+=o.length,i.push(""+n+o)}}return i.join("\n")+"\n"}function ti(e){const t=[];let i="";if(!e)return i;for(t.push(e);t.length>0;){if(3===(e=t.pop()).nodeType)i+=e.nodeValue+" ";else if(e.childNodes&&e.childNodes.length>0){const i=e.childNodes;for(let e=i.length-1;e>=0;e--)t.push(i[e])}}return i.replace(/\s+/g," ")}function ii(e,t){const i=window;let r,n;if(t&&((o=function(e){return e.location.host}(i))&&o&&0!==o.length&&nc(Uc,e=>e===o||function(e,t){return t===e.substring(e.length-t.length)}(o,"."+e))))return t;var o;if(qc&&qc+Yc>Number(new Date))return Kc;if(zt(i))if(n=jt(i),""!==(r=qt(i,"body",["class"])))n=jt(i),r=qt(i,"body",["class"]);else try{n=jt(i.parent),r=qt(i.parent,"body",["class"])}catch(d){}else n=jt(i),r=qt(i,"body",["class"]);const s=["<html>",n,r,"</html>"].join(""),a=function(e,t){return j($t(e,t))}(Math.min(e/2,1800),t);return Kc=Gt(s,a,e),qc=Number(new Date),Kc}function ri(e){return Boolean(e.YA_TURBO_PAGES)}function ni(e){return void 0===e&&(e=window),Boolean(e.ampSeen)}function oi(e){void 0===e&&(e=window);let t="";const i=e.context,r=e.Ya;return ni(e)&&i&&i.master.Ya&&i.master.Ya.getSkipToken?t=i.master.Ya.getSkipToken():r&&r.Context&&r.Context.AdvManager&&r.Context.AdvManager.getSkipToken&&(t=r.Context.AdvManager.getSkipToken()),t}function si(e,t){return void 0===t&&(t=window),("function"===typeof t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle)||{}}function ai(e){const t=si(e);if("inline"===t.getPropertyValue("display"))return{width:0,height:0};let{width:i,height:r}=e.getBoundingClientRect();Math.abs(i-e.offsetWidth)>=1&&(i=e.offsetWidth),Math.abs(r-e.offsetHeight)>=1&&(r=e.offsetHeight);const n=di(t,"padding-top")+di(t,"padding-bottom"),o=di(t,"padding-left")+di(t,"padding-right"),s=di(t,"border-top-width")+di(t,"border-bottom-width"),a=di(t,"border-left-width")+di(t,"border-right-width");return{width:Math.max(0,Math.round(i)-o-a),height:Math.max(0,Math.round(r)-n-s)}}function di(e,t){const i=e.getPropertyValue(t)||"0";return parseInt(i,10)}function li(e,t,i,r){"undefined"!==typeof i&&"undefined"!==typeof t&&(i+=!Qc.test(t)&&i>>>0?"px":"",e.style.setProperty?e.style.setProperty(t,i,r?"important":""):e.style.cssText+=";"+t+": "+i+(r?"!important":""))}function ci(e){const t=function(){const e=document.createElement("div");Jc(e,{display:"table","table-layout":"fixed",width:"100%",height:Zc+"px",visibility:"hidden"});const t=document.createElement("div");t.style.display="table-row";const i=document.createElement("div");return i.style.display="table-cell",t.appendChild(i),e.appendChild(t),e}(),i={inner:ai(e),rect:gs(e)};e.appendChild(t);const r={inner:ai(e),rect:gs(e)};e.removeChild(t);let n=!1;return i.inner.height===r.inner.height&&i.inner.width===r.inner.width&&(n=!0),{isFixed:n,origin:i,max:r}}function ui(){return(ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function hi(){const e=function(){const e=window;let t=0;return e.Ya&&e.Ya.Context&&e.Ya.Context.AdvManager&&e.Ya.Context.AdvManager.getCapturedCount&&(t=e.Ya.Context.AdvManager.getCapturedCount()),t}();return au()+e}function pi(e){return void 0===e&&(e=window),String(e.location)}function fi(e){return void 0===e&&(e=window),G(uu(e.document,"_ym_uid")||"")}function Ai(e){return void 0===e&&(e=window),e.location.hostname}function mi(){return(mi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function gi(){return(gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function yi(e,t){void 0===t&&(t="");const{params:i,bids:r,matchIdDirect:n=!1,reloadCounter:o}=e,s=gi({},function(e){const t=e.win||window,i=void 0===e.isTurbo?ri(t):e.isTurbo,r=nc(Au,e=>e.test(t.location.hostname));return pu(gi({},e,{win:t,isTurbo:i,addsSsSkipToken:r}))}(e),i||{},n?{"matchid-direct":1}:{},{"enable-page-options":65536});if(Ja(mu,e=>{s[e]=void 0}),s.pk)try{s.pk=decodeURIComponent(s.pk)}catch(a){}if(r){const e=r.map(e=>gi({},e,{placement_id:e.placement_id?String(e.placement_id):void 0}));e.toJSON&&(e.toJSON=void 0),s.bids=G(At(e)||"")}return s.grab=ii(fu-t.length),s.utf8="\u2713",o&&(s.adf_refresh=o),s}function vi(e){!function(e){const{ownerId:t}=e;if(!t)throw new Error("there is no `ownerId` for getAdfoxBulkUrl()")}(e);const t=function(e){let t,{adblock:i,useXhr:r,ownerId:n,domain:o=gu}=e;return"https://"+o+("/"+n+"/"+(t=r?"getBulk/v2":i?"getCodeTest":"prepareCode"))}(e);return{base:t,queryParams:yi(e,t)}}function _i(e){const t=e.trim();return"//"===t.substr(0,2)||"http://"===t.substr(0,7)||"https://"===t.substr(0,8)}function wi(){return(wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ei(e,t){const i=Xa(window);let r;try{r=function(e){const{base:t,queryParams:i}=vi(e);return re(t,i)}(wi({},e,{testtag:Cd,layoutConfig:new ou,useXhr:!0}))}catch(o){throw new Ea(o,{code:"CREATE_ADFOX_URL_ERROR",details:{adFoxParameters:e}})}if(!_i(r))throw new Ea({code:"CANNOT_CREATE_ADFOX_URL",details:{adFoxParameters:e}});const n=dt({url:r,options:t,ignoreAbd:!0});return i?i(n):n}function Si(e){const t=function(e){try{return r(e)?JSON.parse(e):void 0}catch(t){return}}(e),i=[];if(!p(t))throw new Ea({code:"ADFOX_AD_DATA_IS_NOT_VALID_JSON_OBJECT",details:{adFoxDataString:e}});const{error:n,data:o}=t;if(Array.isArray(n)&&n.length>0)throw new Ea({code:"ADFOX_AD_DATA_ERROR",details:{adFoxData:t}});if(!Array.isArray(o))throw new Ea({code:"INVALID_ADFOX_DATA_FORMAT",details:{adFoxData:t}});const s=Es(o,(e,r)=>{if(!p(e)||!p(e.attributes))return i.push(new Ea({code:"INVALID_ADFOX_CREATIVE_DATA",details:{adFoxData:t,index:r}})),!1;const{campaignId:n,vastBase64:o}=e.attributes;return"string"===typeof o&&o.length>0||("string"===typeof n&&n.length>0||(i.push(new Ea({code:"NO_REQUIRED_PARAMETERS_IN_ADFOX_CREATIVE",details:{adFoxData:t,index:r}})),!1))});if(0===s.length)throw new Ea({code:"NO_ADS_IN_ADFOX_DATA",details:{adFoxData:t}});return s.length>1&&i.push(new Ea({code:"EXTRA_ADFOX_DATA",details:{adFoxData:t}})),{creative:s[0].attributes,errors:i}}function bi(e,t){const i=Ei(e,t);return Le({url:i,method:"GET",withCredentials:!0}).catch(t=>{throw new Ea(t,{code:"ADFOX_AD_DATA_LOADING_ERROR",details:{adFoxParameters:e,adFoxUrl:i}})}).then(e=>{const{creative:t,errors:i}=Si(e.responseText);return Lt(i),t})}function Ti(){return(Ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ci(e){return void 0===e?e:Array.isArray(e)?e.join("\n"):String(e)}function ki(e){if(!e)return;const t={},i=["string","number","boolean"];for(const r in e)e.hasOwnProperty(r)&&i.indexOf(typeof e[r])>=0&&(t[r]=e[r]);return t}function Ii(){return(Ii=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Pi(e){return"number"===typeof e.repeatNumber}function Ni(){return(Ni=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Di(e){let{adConfig:t,adBreak:i,random:r,adPlacementOptions:n,win:o}=e;return h(Qa)?i.adTagURI:function(e){let{adConfig:t,adBreak:i,random:r,adPlacementOptions:n,win:o}=e;const{adTagURI:s}=i;return at(s)?dt({url:re(s,wu({adConfig:t,adBreak:i,random:r,win:o})),options:n}):s}({adConfig:t,adBreak:i,random:r,adPlacementOptions:n,win:o})}function Oi(e){const t=e.split("?")[0].split("#")[0];return Be(Tu,t)}function Ri(e){return function(e,t){let i=e;return Ja(de(t),r=>{let[n,o]=r;if(void 0===o)return;const s="["+n+"]";if(o!==s)for(;i.indexOf(s)>-1;)Math.random()<Hd&&xd.event({name:"ReplaceVastMacro",data:{macroName:n,macroValue:o,stringToReplace:e,macros:t}}),i=i.replace(s,o)}),i}(e,Du)}function Vi(e){let{trackingUrls:t,options:i}=e;if(!Array.isArray(t))return[];const r=Es(t,_i),n=ss(r,Ri),o=ss(n,e=>dt({url:e,options:i}));return ss(o,Tt)}function Bi(){return(Bi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Mi(e){let{eventName:t,trackingEventDetails:i,trackingUrls:r,options:{devicePixelRatio:n,downlink:o,relativeSizeRatio:s,screenSize:a,size:d,visibility:l,videoContentSize:c,videoPixelRatio:u,videoFramesInfo:h,videoSrc:p,videoCurrentSrc:f,videoMuted:A,videoVolume:m,bufferingTime:g,bufferingTimeRatio:y,currentTime:v,remainingBufferedTime:_,adBreakType:w,adFormatType:E}}=e;const S=Vu[t],b=void 0===S?1:S+1;Vu[t]=b;const T=Bi({trackingUrls:r,trackingEventDetails:i,isVisibilityReliable:Xd,counterInBundle:b},{videoContentSize:c,videoPixelRatio:u,videoFramesInfo:h,videoSrc:p,bufferingTime:g,bufferingTimeRatio:y,currentTime:v,remainingBufferedTime:_},{devicePixelRatio:n,downlink:o,relativeSizeRatio:s,screenSize:a,size:d,visibility:l,videoCurrentSrc:f,videoMuted:A,videoVolume:m,adBreakType:w,adFormatType:E});b===Bu&&xd.error({error:new Ea({code:"NORMAL_EVENT_TRACKING_COUNT_EXCEEDED",details:Bi({eventName:t,eventTrackingsCounts:Vu},T)})}),xd.event({name:Ru(t),probability:Be(Ou,t)?Ud:zd,data:T,labels:{}})}function xi(e){return Mi(e),Vi(e)}function Li(e){ne(e);return e.split("?")[0].split("#")[0]===Lu}function Fi(e){let{type:t}=e;return Fu.indexOf(t)>-1?Iu.js:Iu.video}function Ui(){return(Ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Hi(e,t){let i=e;return t===qu.OnlyYandexCreatives&&(i=Es(i,e=>Fi(e)===Iu.video||at(e.url))),i=ss(i,e=>Fi(e)!==Iu.video?e:Yu(e))}function zi(e,t){return bs(Hi(e,t),e=>Fi(e)===Iu.js)}function Gi(e,t){const i=zi(e,t);return!!i&&Li(i.url)}function Wi(e){return Ju.indexOf(e.toLowerCase())>-1}function ji(e){void 0===e&&(e=window);const t=g(e).match(/Tizen ([\d]+)\.([\d]+)/);if(!t)return{major:-1,minor:-1};const[,i,r]=t;return{major:parseInt(i,10),minor:parseInt(r,10)}}function Yi(e){let{scope:t,errorType:i,error:r,details:n}=e;return new Ea(r,{code:ch(t,i),details:n})}function qi(e,t){const i=[];i.push(d(e,"unhandledrejection",e=>{t(new Error,"UNHANDLED_PROMISE_REJECTION",{})})),i.push(d(e,"error",(e,i,r,n,o)=>{t(e.error||new Error,"UNHANDLED_GLOBAL_ERROR",{event:e,src:i,line:r,column:n,error:o,filename:null===e||void 0===e?void 0:e.filename,message:null===e||void 0===e?void 0:e.message})})),i.push(d(window,"securitypolicyviolation",e=>{let{blockedURI:i,columnNumber:r,documentURI:n,effectiveDirective:o,lineNumber:s,originalPolicy:a,referrer:d,sourceFile:l,statusCode:c,violatedDirective:u}=e;const h={blockedURI:i,columnNumber:r,documentURI:n,effectiveDirective:o,lineNumber:s,originalPolicy:a,referrer:d,sourceFile:l,statusCode:c,violatedDirective:u};t(new Error,"SECURITY_POLICY_VIOLATION",{securityPolicyViolationEventData:h})}));const r=new uh({win:e,onReport:e=>{const{reportSourceEvent:i,reports:r,records:n}=e,o=new Error;0===r.length&&0===n.length&&t(o,"EMPTY_REPORT",{reportSourceEvent:i,reportSource:"empty",report:void 0}),Ja(de({reports:r,records:n}),e=>{let[r,n]=e;return Ja(n,e=>{t(o,function(e){if(!p(e))return"EMPTY_REPORT_ITEM";const{type:t,body:i}=e;if(!le(t))return"EMPTY_REPORT_TYPE";if("csp-violation"===t)return"CSP_VIOLATION_REPORT";if("intervention"===t){if(p(i)&&le(i.message)){const e=i.message.toLowerCase();if(e.indexOf("network usage")>-1)return"NETWORK_USAGE_INTERVENTION_REPORT";if(e.indexOf("peak cpu")>-1)return"PEAK_CPU_INTERVENTION_REPORT";if(e.indexOf("total cpu")>-1)return"TOTAL_CPU_INTERVENTION_REPORT";if(e.indexOf("cpu usage")>-1)return"CPU_USAGE_INTERVENTION_REPORT";if(e.indexOf("touchmove")>-1)return"TOUCHMOVE_INTERVENTION_REPORT"}return"UNKNOWN_INTERVENTION_REPORT"}return"deprecation"===t?"DEPRECATION_REPORT":"feature-policy-violation"===t?"FEATURE_POLICY_VIOLATION_REPORT":"UNKNOWN_REPORT_TYPE"}(e),{reportSourceEvent:i,reportSource:r,report:e})})})}});return i.push(()=>{r.destroy()}),()=>O(i)}function Ki(e,t){return qi(e,(e,i,r)=>{if("SECURITY_POLICY_VIOLATION"===i){const{securityPolicyViolationEventData:e}=r;if(e){const{blockedURI:t}=e;if(t&&t.indexOf(Bd)>-1)return}}t(e,i,r)})}function Xi(e){let{videoContentSize:t,slotSize:i}=e;if(!Y(t.width)||!Y(t.height))return hh;if(t.width<0||t.height<0)return _a.videoPixelRatio;if(0===t.height||0===i.height)return _a.videoPixelRatio;if(0===t.width||0===i.width)return _a.videoPixelRatio;const r=t.width/t.height;return i.width/i.height>r?t.height/i.height:t.width/i.width}function Qi(){return(e,t)=>{const[i,r]=ss([e,t],e=>{let{videoPixelRatio:t}=e;return function(e){const t=e-ph;return 0===t?0:t<0?-t:t*fh}(t)}),n=i-r,[o,s]=ss([e,t],e=>{let{mediaFile:t}=e;return function(e){const t=e.toLowerCase();return t===Ah?1:t===mh?2:3}(t.type)});return n+gh*(o-s)}}function Ji(e){return"number"===typeof e&&e>0}function Zi(e,t){let{desiredBitrate:i}=t;if(function(e){return Wi(e.type)&&Lc(yh,t=>!Ji(e[t]))}(e))return 0;if(function(e){const{minBitrate:t,maxBitrate:i}=e;return Ji(t)&&Ji(i)}(e)){const{minBitrate:t,maxBitrate:r}=e;return i<t?t-i:i>r?i-r:0}const{bitrate:r}=e;return U(r)?Math.abs(r-i):vh}function $i(){return($i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function er(e,t){let{desiredBitrate:i}=t;const r=ss(e,e=>{let{bitrate:t}=e;return $i({},function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,["bitrate"]),{bitrate:U(t)?t:vh})}).sort((e,t)=>{return Zi(e,{desiredBitrate:i})-Zi(t,{desiredBitrate:i})}),[n]=r;return{prioritisedMediaFiles:r,prioritisedMediaFile:n}}function tr(e){void 0===e&&(e=window);const t=e.MediaSource||e.WebKitMediaSource;return t&&h(t.isTypeSupported)&&!function(e){void 0===e&&(e=window);const t=e.SourceBuffer||e.WebKitSourceBuffer;return!!t&&!(t.prototype&&h(t.prototype.appendBuffer)&&h(t.prototype.remove))}(e)?t:void 0}function ir(e,t){const i=function(e){if(!Array.isArray(e))return[];let t=Es(e,mt);const i=Es(t,Ih);return i.length&&(t=i),Es(t,e=>{let{type:t}=e;return Qu(t)})}(e),{desiredBitrate:r}=t;if(U(r)){const{prioritisedMediaFile:e,prioritisedMediaFiles:t}=er(i,{desiredBitrate:r});return{validatedMediaFiles:i,prioritisedMediaFiles:t,prioritisedMediaFile:e}}const{prioritisedMediaFile:n,prioritisedMediaFiles:o}=function(e,t){if(0===e.length)return{prioritisedMediaFile:void 0,prioritisedMediaFiles:[]};const i=ss(e,e=>({mediaFile:e,videoPixelRatio:Xi({videoContentSize:e,slotSize:t.container})})),r=Qi();i.sort(r),Ct(">>> prioritiseMediaFiles mediaFileWithVideoPixelRatio",i),Ct(">>> prioritiseMediaFiles opts",t);const[{mediaFile:n}]=i;return{prioritisedMediaFile:n,prioritisedMediaFiles:ss(i,e=>{let{mediaFile:t}=e;return t})}}(i,t);return{validatedMediaFiles:i,prioritisedMediaFiles:o,prioritisedMediaFile:n}}function rr(e){const t=e.ownerDocument.createElement("iframe");if(t.scrolling="no",t.setAttribute("allowfullscreen",""),t.style.display="block",e.appendChild(t),t.contentDocument)return t.contentDocument.open(),t.contentDocument.close(),t.contentDocument.body.style.margin="0",t.style.borderWidth="0",t.contentDocument.body.style.width="100%",t.contentDocument.body.style.height="100%",t;C(t)}function nr(e){const t=rr(e);if(t)return t.width="0",t.height="0",t.style.position="absolute",t}function or(e){if(Fd&&console&&console.error){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];console.error(e,...i)}}function sr(){return(sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function ar(e){return"overlay"===e.adType||"inroll-overlay"===e.adType}function dr(){return(dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function lr(e){let t,{commonParameters:{vastTimeout:i,wrapperMaxCount:r,wrapperTimeout:n},isAdFox:o,url:s,adPlacementOptions:a}=e;return{adPlacementOptions:a,vastSourceType:t=o||s&&st(s)?"AD_FOX":s&&at(s)?"YANDEX":"EXTERNAL",vastTimeout:i,wrapperMaxCount:r,wrapperTimeout:n}}function cr(e){let{adConfig:t,adBreak:i,adPlacementOptions:r,win:n}=e;const o=i.adFoxParameters||t.adFoxParameters;if(o)return async function(e){return new yu(e).loadVastPromise}({adConfig:dr({},t,{adFoxParameters:o}),adBreak:i,adPlacementOptions:r});const{vast:s,loadHarmlessVastCallback:a}=t;if(s)return Oc(s,lr({commonParameters:i,isAdFox:!1,adPlacementOptions:r})).then(e=>(a&&0===e.children.length&&a({adPods:ss(e.ads,e=>{let{clickThrough:t}=e;return{clickThroughUrl:t}})}),e));const d=t.vastUrl?t.vastUrl:Di({adConfig:t,adBreak:i,random:Math.random(),adPlacementOptions:r,win:n});return Bc(d,lr({commonParameters:i,isAdFox:!1,url:d,adPlacementOptions:r}))}async function ur(e){let t,{adConfig:i,adBreak:r,adPlacementOptions:n,win:o}=e;try{t=await cr({adConfig:i,adBreak:r,adPlacementOptions:n,win:o})}catch(l){throw l.details||(l.details={}),l.details.adConfig=i,It(l),l}const s=ss(t.ads,e=>(e.vast=t,new Rh(r,e,i))),a=function(e,t,i){const r=ar(i);return Es(e,e=>{const{isNonLinear:n}=e.vastAd;return n===r||(e.trackError(new Ea({code:n?"CANNOT_PLAY_NONLINEAR_IN_LINEAR_AD_BREAK":"CANNOT_PLAY_LINEAR_IN_NONLINEAR_AD_BREAK",details:{adConfig:t,adBreak:i}})),!1)})}(s,i,r),d=new Vh(a);if(0===d.mediaAds.length)throw new Ea({code:"NO_AD_SECTION",details:void 0});if(d.hasMedia())return{mediaAds:d,vast:t};if(d.hasFilteredOutMediaFiles()){const e=ua(ss(s,e=>e.vastAd.mediaFiles));throw new Ea({code:"ALL_MEDIA_FILES_FILTERED_OUT",details:{adConfig:i,unfilteredMediaFiles:e}})}throw new Ea({code:"NO_AD_TO_DISPLAY",details:void 0})}function hr(e,t){return Es(e,e=>e.adType===t)}function pr(e){const t=e.getRootNode;if(h(t))return t.call(e);let i=e;for(;i.parentNode;)i=i.parentNode;return i}function fr(e){return!!e&&"ShadowRoot"===ls(e)}function Ar(e){const t=e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;let i=e;for(;i;){if(i&&t.document.body.contains(i))return!0;const e=pr(i);if(!fr(e)||!Bh(e.host))return!1;i=e.host}return!1}function mr(e,t,i){const r=()=>e.map(e=>e.getValue());let n=t(...r());i(n);const o=()=>{const e=t(...r());n!==e&&(n=e,i(e))},s=e.map(e=>e.add(o));return()=>{O(s)}}function gr(e,t){ae(t).forEach(i=>{const r=t[i];null===r?e.removeAttribute(i):e.setAttribute(i,r)})}function yr(e,t){const i={};return ae(t).forEach(t=>{i[t]=e.getAttribute(t)}),gr(e,t),Q(()=>{gr(e,i)})}function vr(e){e&&"function"===typeof e.catch&&e.catch(e=>void 0)}function _r(e,t){if(void 0===t&&(t=window),!t||!t[e]||!t[e].prototype)return;const{play:i}=t[e].prototype;return i&&o(i)?i:void 0}function wr(e){if(!Xu)return Promise.reject();const t=(i=e.play)[zh]||i;var i;if(o(t))return t.call(e);const r=_r("HTMLVideoElement")||_r("HTMLMediaElement");if(r)return r.call(e);const n=document.createElement("div");n.style.display="none",document.body.appendChild(n);const s=_r("HTMLMediaElement",T(n).contentWindow);if(s){const t=s.call(e);return C(n),t}return e.play()}function Er(e,t){void 0===t&&(t={});let i=0;const r=[],n=(t,n)=>{r.push(d(e,t,n,Jh)),clearTimeout(i)},o=()=>O(r),s=new Promise((r,o)=>{const s=t=>{e.paused&&o(t)},a=wr(e);if(s(Qh.VideoTagPaused),n("durationchange",()=>s(Qh.VideoTagPausedAfterDurationChange)),n("error",()=>s(Qh.VideoTagPausedAfterError)),n("pause",()=>o(Qh.PauseEvent)),n("playing",()=>{r(Qh.PlayingEvent)}),a)t.useProgressEvent&&n("progress",()=>{r(Qh.ProgressEvent)}),a.then(()=>r(Qh.PromiseResolve)).catch(e=>o(function(e){return e?Qh.PromiseReject+"["+e.code+"]["+e.name+"]["+e.message+"]":Qh.PromiseReject}(e)));else{const{timeoutForNonPromisePlay:e}=t;"number"===typeof e&&e>0&&(i=window.setTimeout(()=>{o(Qh.Timeout)},t.timeoutForNonPromisePlay))}});return s.then(o,o),s}function Sr(e,t){const{paused:i}=e,r=t();return i||vr(wr(e)),r}function br(){return(br=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Tr(e){let{canPlayUnMuted:t,canPlayMuted:i,detectionMethod:r}=e;return{canPlayUnMuted:t,canPlayMuted:i,requireMute:!t&&i,requireUserGesture:!t&&!i,detectionMethod:r}}function Cr(e){if("boolean"===typeof e.allowedToPlay)return Promise.resolve(function(e){const t=Gh(e);return e.muted=!1,e.volume=1,e.allowedToPlay?(t(),Tr({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:qh.YaBroAllowedToPlay})):(e.muted=!0,e.volume=0,e.allowedToPlay?(t(),Tr({canPlayUnMuted:!1,canPlayMuted:!0,detectionMethod:qh.YaBroAllowedToPlay})):(t(),Tr({canPlayUnMuted:!1,canPlayMuted:!1,detectionMethod:qh.YaBroAllowedToPlay})))}(e));const t=function(e){if(void 0===e&&(e=window),Xh(e))return Tr({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:qh.WebOSSmartTV})}();if(void 0!==t)return Promise.resolve(t);const i=function(e){if(void 0===e&&(e=window),Yh(e))return Tr({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:qh.OrsaySmartTV})}();if(void 0!==i)return Promise.resolve(i);const r=function(e){if(void 0===e&&(e=window),Kh(e))return Tr({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:qh.PlayStationSmartTV})}();if(void 0!==r)return Promise.resolve(r);if(e.isAVPlay)return Promise.resolve(br({},tp,{detectionMethod:qh.TizenAVPlay}));const n=function(e){if(void 0===e&&(e=window),th(e))return ih(e)?Tr({canPlayUnMuted:!1,canPlayMuted:!1,detectionMethod:qh.Tizen23SmartTV}):Tr({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:qh.TizenSmartTVModern})}();return void 0!==n?Promise.resolve(n):Pl&&Cl<=9||Zh?Promise.resolve(br({},ep,{detectionMethod:qh.IOS9OrLess})):Xu?$h?Promise.resolve(br({},tp,{detectionMethod:qh.OldIE})):void 0:Promise.resolve(br({},ep,{detectionMethod:qh.HTML5VideoIsNotSupported}))}function kr(){const e=qd(pc);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];const n=Es(i,e=>Boolean(e));return ca(n,(e,t)=>(function(e,t){const i=qd(pc);!1===t.visibility?i.visibility=!1:i.visibility=e.visibility,void 0!==t.controlsVariant?i.controlsVariant=t.controlsVariant:i.controlsVariant=e.controlsVariant;for(const r of up)!1===i.visibility?i.controlsVisibility[r]=!1:"boolean"===typeof t.controlsVisibility[r]?i.controlsVisibility[r]=t.controlsVisibility[r]:i.controlsVisibility[r]=e.controlsVisibility[r];return i})(e,t),e)}function Ir(e){let{mediaFiles:t,isNonLinear:i}=e;const[r]=t;return!!r&&(!!i||function(e){let{url:t}=e;return t===gp}(r))}function Pr(e){const{imhoParams:t,isNonLinear:i}=e;return!i&&(!function(e){let{mediaFiles:t}=e;const[i]=t;return!!i&&Oi(i.url)}(e)&&(!Ir(e)&&(t?t.showSoundButton:mp)))}function Nr(e,t){const i=function(e){let{vastAd:t,adBreak:i,isPreactSkin:r,secureMode:n}=e;const{imhoParams:o,playbackAdParameters:s,mediaFiles:a}=t,d={controlsVisibility:{[yc.timeLeft]:o?o.showCountDown:i.timeLeftShow,[yc.mute]:Pr(t),[yc.skip]:pp,[yc.title]:fp}};let l,c;return r&&(Gi(a,n)&&(l=Ap),s&&(c=s.controlsSettings)),kr(d,l,c)}({vastAd:t.vastAd,adBreak:t.adBreak,isPreactSkin:"regular"===e.controlsSettings.controlsVariant,secureMode:e.secureMode}),r=kr(i,e.controlsSettings,hp?{controlsVisibility:{skip:!1,timeLeft:!1}}:void 0),{skipDelay:n,eventName:o}=t.getSkipDelayParameters();return void 0!==o&&xd.event({name:o,probability:zd,data:void 0}),{controlsSettings:r,backgroundBlur:"boolean"===typeof e.backgroundBlur?e.backgroundBlur:t.vastAd.backgroundBlur,showGuiForVpaid:!0===e.showGuiForVpaid||t.shouldShowGuiForVpaid(),skipDelay:"number"===typeof e.skipDelay?e.skipDelay:n,bufferFullTimeout:"number"===typeof e.bufferFullTimeout?e.bufferFullTimeout:t.getBufferFullTimeout(),bufferEmptyLimit:U(e.bufferEmptyLimit)?e.bufferEmptyLimit:t.getBufferEmptyLimit(),videoTimeout:U(e.videoTimeout)?e.videoTimeout:t.getVideoStartTimeout(),vpaidTimeout:U(e.vpaidTimeout)?e.vpaidTimeout:t.getVpaidStartTimeout(),clickThroughUrl:"string"===typeof e.clickThroughUrl?e.clickThroughUrl:t.vastAd.clickThrough,isClickable:"string"===typeof e.clickThroughUrl||t.isClickable()}}function Dr(e){if("error"===e.reason)return e.details}function Or(e,t){for(var i in t)e[i]=t[i];return e}function Rr(e){var t=e.parentNode;t&&t.removeChild(e)}function Vr(e,t,i){var r,n=arguments,o={};for(r in t)"key"!==r&&"ref"!==r&&(o[r]=t[r]);if(arguments.length>3)for(i=[i],r=3;r<arguments.length;r++)i.push(n[r]);if(null!=i&&(o.children=i),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===o[r]&&(o[r]=e.defaultProps[r]);return Br(e,o,t&&t.key,t&&t.ref)}function Br(e,t,i,r){var n={type:e,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0};return Op.vnode&&Op.vnode(n),n}function Mr(e){return e.children}function xr(e,t){this.props=e,this.context=t}function Lr(e,t){if(null==t)return e.__?Lr(e.__,e.__.__k.indexOf(e)+1):null;for(var i;t<e.__k.length;t++)if(null!=(i=e.__k[t])&&null!=i.__e)return i.__e;return"function"==typeof e.type?Lr(e):null}function Fr(e){var t,i;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(i=e.__k[t])&&null!=i.__e){e.__e=e.__c.base=i.__e;break}return Fr(e)}}function Ur(e){(!e.__d&&(e.__d=!0)&&1===Rp.push(e)||Bp!==Op.debounceRendering)&&((Bp=Op.debounceRendering)||Vp)(Hr)}function Hr(){var e,t,i,r,n,o,s;for(Rp.sort((function(e,t){return t.__v.__b-e.__v.__b}));e=Rp.pop();)e.__d&&(i=void 0,r=void 0,o=(n=(t=e).__v).__e,(s=t.__P)&&(i=[],r=qr(s,n,Or({},n),t.__n,void 0!==s.ownerSVGElement,null,i,null==o?Lr(n):o),Kr(i,n),r!=o&&Fr(n)))}function zr(e,t,i,r,n,o,s,a,d){var l,c,u,h,p,f,A,m=i&&i.__k||Fp,g=m.length;if(a==Lp&&(a=null!=o?o[0]:g?Lr(i,0):null),l=0,t.__k=Gr(t.__k,(function(i){if(null!=i){if(i.__=t,i.__b=t.__b+1,null===(u=m[l])||u&&i.key==u.key&&i.type===u.type)m[l]=void 0;else for(c=0;c<g;c++){if((u=m[c])&&i.key==u.key&&i.type===u.type){m[c]=void 0;break}u=null}if(h=qr(e,i,u=u||Lp,r,n,o,s,a,d),(c=i.ref)&&u.ref!=c&&(A||(A=[]),u.ref&&A.push(u.ref,null,i),A.push(c,i.__c||h,i)),null!=h){var y;if(null==f&&(f=h),void 0!==i.__d)y=i.__d,i.__d=void 0;else if(o==u||h!=a||null==h.parentNode){e:if(null==a||a.parentNode!==e)e.appendChild(h),y=null;else{for(p=a,c=0;(p=p.nextSibling)&&c<g;c+=2)if(p==h)break e;e.insertBefore(h,a),y=a}"option"==t.type&&(e.value="")}a=void 0!==y?y:h.nextSibling,"function"==typeof t.type&&(t.__d=a)}}return l++,i})),t.__e=f,null!=o&&"function"!=typeof t.type)for(l=o.length;l--;)null!=o[l]&&Rr(o[l]);for(l=g;l--;)null!=m[l]&&Jr(m[l],m[l]);if(A)for(l=0;l<A.length;l++)Qr(A[l],A[++l],A[++l])}function Gr(e,t,i){if(null==i&&(i=[]),null==e||"boolean"==typeof e)t&&i.push(t(null));else if(Array.isArray(e))for(var r=0;r<e.length;r++)Gr(e[r],t,i);else i.push(t?t("string"==typeof e||"number"==typeof e?Br(null,e,null,null):null!=e.__e||null!=e.__c?Br(e.type,e.props,e.key,null):e):e);return i}function Wr(e,t,i){"-"===t[0]?e.setProperty(t,i):e[t]="number"==typeof i&&!1===Up.test(t)?i+"px":null==i?"":i}function jr(e,t,i,r,n){var o,s,a,d,l;if(n?"className"===t&&(t="class"):"class"===t&&(t="className"),"key"===t||"children"===t);else if("style"===t)if(o=e.style,"string"==typeof i)o.cssText=i;else{if("string"==typeof r&&(o.cssText="",r=null),r)for(s in r)i&&s in i||Wr(o,s,"");if(i)for(a in i)r&&i[a]===r[a]||Wr(o,a,i[a])}else"o"===t[0]&&"n"===t[1]?(d=t!==(t=t.replace(/Capture$/,"")),l=t.toLowerCase(),t=(l in e?l:t).slice(2),i?(r||e.addEventListener(t,Yr,d),(e.l||(e.l={}))[t]=i):e.removeEventListener(t,Yr,d)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!n&&t in e?e[t]=null==i?"":i:"function"!=typeof i&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==i||!1===i?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),i):null==i||!1===i?e.removeAttribute(t):e.setAttribute(t,i))}function Yr(e){this.l[e.type](Op.event?Op.event(e):e)}function qr(e,t,i,r,n,o,s,a,d){var l,c,u,h,p,f,A,m,g,y,v=t.type;if(void 0!==t.constructor)return null;(l=Op.__b)&&l(t);try{e:if("function"==typeof v){if(m=t.props,g=(l=v.contextType)&&r[l.__c],y=l?g?g.props.value:l.__:r,i.__c?A=(c=t.__c=i.__c).__=c.__E:("prototype"in v&&v.prototype.render?t.__c=c=new v(m,y):(t.__c=c=new xr(m,y),c.constructor=v,c.render=Zr),g&&g.sub(c),c.props=m,c.state||(c.state={}),c.context=y,c.__n=r,u=c.__d=!0,c.__h=[]),null==c.__s&&(c.__s=c.state),null!=v.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=Or({},c.__s)),Or(c.__s,v.getDerivedStateFromProps(m,c.__s))),h=c.props,p=c.state,u)null==v.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==v.getDerivedStateFromProps&&m!==h&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(m,y),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(m,c.__s,y)){for(c.props=m,c.state=c.__s,c.__d=!1,c.__v=t,t.__e=i.__e,t.__k=i.__k,c.__h.length&&s.push(c),l=0;l<t.__k.length;l++)t.__k[l]&&(t.__k[l].__=t);break e}null!=c.componentWillUpdate&&c.componentWillUpdate(m,c.__s,y),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(h,p,f)}))}c.context=y,c.props=m,c.state=c.__s,(l=Op.__r)&&l(t),c.__d=!1,c.__v=t,c.__P=e,l=c.render(c.props,c.state,c.context),t.__k=null!=l&&l.type==Mr&&null==l.key?l.props.children:l,null!=c.getChildContext&&(r=Or(Or({},r),c.getChildContext())),u||null==c.getSnapshotBeforeUpdate||(f=c.getSnapshotBeforeUpdate(h,p)),zr(e,t,i,r,n,o,s,a,d),c.base=t.__e,c.__h.length&&s.push(c),A&&(c.__E=c.__=null),c.__e=!1}else t.__e=Xr(i.__e,t,i,r,n,o,s,d);(l=Op.diffed)&&l(t)}catch(e){Op.__e(e,t,i)}return t.__e}function Kr(e,t){Op.__c&&Op.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){Op.__e(e,t.__v)}}))}function Xr(e,t,i,r,n,o,s,a){var d,l,c,u,h,p=i.props,f=t.props;if(n="svg"===t.type||n,null==e&&null!=o)for(d=0;d<o.length;d++)if(null!=(l=o[d])&&(null===t.type?3===l.nodeType:l.localName===t.type)){e=l,o[d]=null;break}if(null==e){if(null===t.type)return document.createTextNode(f);e=n?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,f.is&&{is:f.is}),o=null}if(null===t.type)null!=o&&(o[o.indexOf(e)]=null),p!==f&&e.data!=f&&(e.data=f);else if(t!==i){if(null!=o&&(o[o.indexOf(e)]=null,o=Fp.slice.call(e.childNodes)),c=(p=i.props||Lp).dangerouslySetInnerHTML,u=f.dangerouslySetInnerHTML,!a){if(p===Lp)for(p={},h=0;h<e.attributes.length;h++)p[e.attributes[h].name]=e.attributes[h].value;(u||c)&&(u&&c&&u.__html==c.__html||(e.innerHTML=u&&u.__html||""))}(function(e,t,i,r,n){var o;for(o in i)o in t||jr(e,o,null,i[o],r);for(o in t)n&&"function"!=typeof t[o]||"value"===o||"checked"===o||i[o]===t[o]||jr(e,o,t[o],i[o],r)})(e,f,p,n,a),t.__k=t.props.children,u||zr(e,t,i,r,"foreignObject"!==t.type&&n,o,s,Lp,a),a||("value"in f&&void 0!==f.value&&f.value!==e.value&&(e.value=null==f.value?"":f.value),"checked"in f&&void 0!==f.checked&&f.checked!==e.checked&&(e.checked=f.checked))}return e}function Qr(e,t,i){try{"function"==typeof e?e(t):e.current=t}catch(e){Op.__e(e,i)}}function Jr(e,t,i){var r,n,o;if(Op.unmount&&Op.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Qr(r,null,t)),i||"function"==typeof e.type||(i=null!=(n=e.__e)),e.__e=e.__d=void 0,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){Op.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Jr(r[o],t,i);null!=n&&Rr(n)}function Zr(e,t,i){return this.constructor(e,i)}function $r(e,t,i){var r,n,o;Op.__&&Op.__(e,t),n=(r=i===Mp)?null:i&&i.__k||t.__k,e=Vr(Mr,null,[e]),o=[],qr(t,(r?t:i||t).__k=e,n||Lp,Lp,void 0!==t.ownerSVGElement,i&&!r?[i]:n?null:Fp.slice.call(t.childNodes),o,i||Lp,r),Kr(o,e)}function en(e){var t={},i={__c:"__cC"+xp++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var r,n=this;return this.getChildContext||(r=[],this.getChildContext=function(){return t[i.__c]=n,t},this.shouldComponentUpdate=function(t){e.value!==t.value&&r.some((function(e){e.context=t.value,Ur(e)}))},this.sub=function(e){r.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){r.splice(r.indexOf(e),1),t&&t.call(e)}}),e.children}};return i.Consumer.contextType=i,i}function tn(e){Op.__h&&Op.__h(zp);var t=zp.__H||(zp.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({}),t.__[e]}function rn(e){return function(e,t,i){var r=tn(Hp++);return r.__c||(r.__c=zp,r.__=[i?i(t):pn(void 0,t),function(t){var i=e(r.__[0],t);r.__[0]!==i&&(r.__[0]=i,r.__c.setState({}))}]),r.__}(pn,e)}function nn(e,t){var i=tn(Hp++);hn(i.__H,t)&&(i.__=e,i.__H=t,zp.__H.__h.push(i))}function on(e,t){var i=tn(Hp++);hn(i.__H,t)&&(i.__=e,i.__H=t,zp.__h.push(i))}function sn(e,t){var i=tn(Hp++);return hn(i.__H,t)?(i.__H=t,i.__h=e,i.__=e()):i.__}function an(e,t){return sn((function(){return e}),t)}function dn(e){var t=zp.context[e.__c];if(!t)return e.__;var i=tn(Hp++);return null==i.__&&(i.__=!0,t.sub(zp)),t.props.value}function ln(){Wp.some((function(e){if(e.__P)try{e.__H.__h.forEach(cn),e.__H.__h.forEach(un),e.__H.__h=[]}catch(t){return Op.__e(t,e.__v),!0}})),Wp=[]}function cn(e){e.t&&e.t()}function un(e){var t=e.__();"function"==typeof t&&(e.t=t)}function hn(e,t){return!e||t.some((function(t,i){return t!==e[i]}))}function pn(e,t){return"function"==typeof t?t(e):t}function fn(e){const t=function(e){return sn((function(){return{current:e}}),[])}(e),[,i]=rn(e);return sn(()=>[()=>t.current,e=>{t.current=e,i(e)}],[])}function An(e){const[t,i]=rn(e.getValue());return nn(()=>(i(e.getValue()),e.add(i)),[e]),t}function mn(e){const t=cf();on(()=>hf.useStyleModule(t,e),[e])}function gn(e){let{abuseScreenWidth:t,hasDescription:i}=e;return i&&t>=400?"middle":t>=500?"middle":"small"}function yn(e){let{isShortDescription:t,abuseScreenWidth:i}=e;return t?19:i<400?27:33}function vn(e){let{adVolume:t,adVolumeAvailability:i,adHasBeenUnmuted:r}=e;return i?0!==t?"unmuted":r?"muted":"mutedStart":"unavailable"}function _n(e){let{width:t}=e;return t<Wf?"small":"middle"}function wn(e){if(e<=0)return"";const t=Math.ceil(e)%100;return be(String(t),dA,"0")}function En(){return(En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Sn(e){let{width:t,height:i}=e;const r=ss([t,i],e=>Math.round(e)),n=Math.min(...r),o=Math.max(...r);return hp?n>=fm&&o>=Am:n>=hm&&o>=pm}function bn(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;const t=e.ownerDocument.defaultView,i=function(e,t){try{if(o(e.attachShadow))return e.attachShadow(t);if(o(e.createShadowRoot))return e.createShadowRoot();if(o(e.webkitCreateShadowRoot))return e.webkitCreateShadowRoot()}catch(i){}return null}(e,{mode:"open"});if(!i)return null;const r=t.document.createElement("div");return i.appendChild(r),r}function Tn(e){let{win:t=window,slotSize:i,slotVisibilityRatio:r,videoNode:n,bufferingTime:o,adBreakType:s,adFormatType:a}=e;const d=ym(t),l=d.width*d.height,c=i.width*i.height,u=0===l?0:c/l,p=function(e){let t;void 0===e&&(e=window);try{t=e.devicePixelRatio}catch(i){}return t||1}(t),f=function(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:i={}}=t;if("number"===typeof i.downlink)return i.downlink;if("number"===typeof i.downlinkMax)return i.downlinkMax;const r=i.type;if("string"===typeof r||"number"===typeof r)switch(r){case _m.BLUETOOTH:return 3;case vm.CELL_2G:return.384;case vm.CELL_3G:case _m.CELLULAR:return 2;case _m.WIMAX:return 37;case _m.NONE:return 0;case vm.ETHERNET:case _m.ETHERNET:case vm.WIFI:case _m.WIFI:case _m.MIXED:return 10;case vm.UNKNOWN:case _m.UNKNOWN:case _m.OTHER:}return-1}(t);let A=_a.videoContentSize,m=_a.videoFramesInfo,g=_a.videoSrc,y=_a.videoCurrentSrc,v=_a.videoMuted,_=_a.videoVolume,w=_a.currentTime,E=_a.bufferingTimeRatio,S=_a.remainingBufferedTime;if(n){const{videoWidth:e,videoHeight:t}=n;A={width:e,height:t},m=K(n),g=n.src,y=n.currentSrc,v=n.muted,_=n.volume;const i=function(e){const t=[];if(!e)return t;if(!e.buffered)return t;if(!Y(e.buffered.length)||!h(e.buffered.start)||!h(e.buffered.end))return t;for(let i=0;i<e.buffered.length;i++)t.push({start:e.buffered.start(i),end:e.buffered.end(i)});return function(e){if(e.length<=1)return e;const t=e.map(e=>{let{start:t,end:i}=e;return{start:t,end:i}}).sort((e,t)=>e.start-t.start),i=[t[0]];for(let r=1;r<t.length;r++){const e=t[r],n=i[i.length-1];n.end<e.start?i.push(e):n.end<e.end&&(n.end=e.end)}return i}(t)}(n);w=n.currentTime;const r=(b=w,bs(i,e=>{let{start:t,end:i}=e;return t<=b&&b<=i}));r&&(S=r.end-w),Y(w)&&Y(o)&&o+w>0&&(E=o/(o+w))}var b;return{visibility:r,size:i,relativeSizeRatio:u,screenSize:d,devicePixelRatio:p,downlink:f,videoContentSize:A,videoPixelRatio:Xi({videoContentSize:A,slotSize:i}),videoFramesInfo:m,videoSrc:g,videoCurrentSrc:y===g?void 0:y,videoMuted:v,videoVolume:_,bufferingTime:o,currentTime:w,bufferingTimeRatio:E,remainingBufferedTime:S,adBreakType:s,adFormatType:a}}function Cn(e){let t;try{t=JSON.parse(e)}catch(s){throw new Ea({code:"CANNOT_DETECT_VAS_MEDIA_FILE_BY_INVALID_JSON",details:{adParametersString:e}})}if(!p(t))throw new Ea({code:"CANNOT_DETECT_VAS_MEDIA_FILE_BY_NON_OBJECT_JSON",details:{adParametersString:e}});const{mediaFiles:i}=t;if(!qs(i)||0===i.length)return{url:Su,isNonLinear:!1,adFormatType:"motion"};const[r]=i;if(!mt(r))throw new Ea({code:"FIRST_MEDIA_FILE_IN_AD_PARAMETERS_IS_INVALID",details:{adParametersString:e}});const n=function(e){const{type:t}=e;return t===Sm.OverlayTGO?"OverlayTGO":t===Sm.MotionTGO?"MotionTGO":void 0}(r);if(n)return{url:Em[n],isNonLinear:"OverlayTGO"===n,adFormatType:bm[n]};const{theme:o}=t;return le(o)?{url:Tm,isNonLinear:!1,adFormatType:"vpaidCreative"}:{url:Lu,isNonLinear:!1,adFormatType:"interactiveViewer"}}function kn(e){return!!p(e)&&Bh(e)}function In(e,t,i){function r(){0!==s&&(clearTimeout(s),s=0)}let{threshold:n=Cm,delay:o=km}=void 0===i?{}:i,s=0,a=0,l=0;const c=d(e,"click",(function(e){0!==s&&(r(),t(e))}),{passive:!0}),u=d(e,"touchstart",(function(e){1===e.touches.length&&(a=e.changedTouches[0].screenX,l=e.changedTouches[0].screenY,r(),s=window.setTimeout(r,o))}),{passive:!0}),h=d(e,"touchend",(function(e){0!==s&&(r(),t(e))}),{passive:!0}),f=d(e,"touchmove",(function(e){if(0===s||!p(e.touches)||1!==e.touches.length)return void r();const{screenX:t,screenY:i}=e.changedTouches[0];if(o=t,d=i,Math.abs(a-o)>n||Math.abs(l-d)>n)r();else var o,d}),{passive:!0});return()=>{c(),u(),h(),f()}}function Pn(e,t){const i=function(e){void 0===e&&(e=window);const{document:t={}}=e;return Im.filter(e=>{let{enabled:i}=e;return i in t})}(e);if(i.length>0)return i[0];const r=function(e,t){return void 0===e&&(e=window),void 0===t&&(t=e.HTMLVideoElement&&e.HTMLVideoElement.prototype||{}),Im.filter(e=>{let{enabled:i}=e;return i in t})}(e,t);return r.length>0?r[0]:void 0}function Nn(e,t){const i=Ee(t,(t,i)=>e.style[i]);return n(e,t),()=>{n(e,i)}}function Dn(e){const{ownerDocument:t}=e;return t?"false"===e.getAttribute("pip")?a:function(e,t){const{pictureInPictureElement:i}=e;if(i)return i;if(t){if(t.webkitPresentationMode===Zm.pictureInPicture)return t;if(t.broughtOut)return t}return null}(t,e)===e?a:yr(e,{pip:"false"}):a}function On(e,t){const i={};return ae(e).forEach(r=>{t(e[r],r)&&(i[r]=e[r])}),i}function Rn(){return(Rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Vn(){return(Vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Bn(){return(Bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Mn(){return(Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function xn(){return(xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ln(){return(Ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Fn(e){return Array.isArray(e)?Es(e,e=>"string"===typeof e&&e.length>0):[]}function Un(e){const t=[];return p(e)?{measurers:On(e,(i,r)=>p(i)?-1!==Gg.indexOf(r)||(t.push(new Ea({code:"UNSUPPORTED_MEASURER",details:{measurerName:r,measurersParameters:e}})),!1):(t.push(new Ea({code:"MEASURER_PARAMS_IN_NOT_AN_OBJECT",details:{measurerName:r,measurersParameters:e}})),!1)),errors:t}:(void 0!==e&&t.push(new Ea({code:"INVALID_MEASURERS_PARAMETERS",details:{measurersParameters:e}})),{measurers:{},errors:t})}function Hn(){return(Hn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function zn(e){const t=[],{measurers:i,AUCTION_DC_PARAMS:r}=e;let n={},o={};const{bannerParameters:s,errors:a}=function(e){const t=[];if(!p(e))return{bannerParameters:void 0,errors:t};const{data_params:i}=e;if(!p(i))return{bannerParameters:void 0,errors:t};const{misc:r}=i;if(!p(r))return{bannerParameters:void 0,errors:t};const{object_id:n}=r,o=i[n];return p(o)?{bannerParameters:o,errors:t}:{bannerParameters:void 0,errors:t}}(r);if(t.push(...a),p(s)){const{measurers:i,unmoderated:r}=s,{measurers:a,errors:d}=Un(i);if(t.push(...d),n=a,p(r)){const{measurers:i}=r;i&&t.push(new Ea({code:"AUCTION_DC_PARAMS_UNMODERATED_MEASURERS_ARE_USED",details:{rawAdParameters:e}}));const{measurers:n,errors:s}=Un(i);t.push(...s),o=n}}const{measurers:d,errors:l}=Un(i);t.push(...l);const c=ae(o).length>0,u=ae(n).length>0,h=ae(d).length>0;return Number(c)+Number(u)+Number(h)>1&&t.push(new Ea({code:"USING_MULTIPLE_MEASURERS_OBJECTS",details:{rawAdParameters:e}})),{measurers:Hn({},o,n,d),errors:t}}function Gn(e){return p(e)?Ee(Wg,(t,i)=>Fn(e[i])):qd(Wg)}function Wn(e){const{sad:t,AUCTION_DC_PARAMS:i}=e;return"sad"===t||!!p(i)&&"sad"===i.sad}function jn(e){if(!p(e))return;const{ids:t,partnerCode:i}=e;return"string"===typeof i?p(t)?{partnerCode:i,ids:On(t,e=>"string"===typeof e)}:{partnerCode:i,ids:{}}:void 0}function Yn(e){return e<2?1e3:2===e?3e3:5e3}function qn(e,t,i){return void 0===t&&(t={}),void 0===i&&(i={}),()=>{const r=e(),{onStop:n=a,onInitMeasurer:o=a,onTrackEvent:s=a,onExecutionError:d=a,onAdError:l=a,onPlayingStateChange:c=a,onSlotHoverStateChange:u=a,onSlotVisibilityStateChange:h=a,onSlotSizeChange:p=a}=i,{getAdditionalTrackingParameters:f=a}=t;return function(e,t){let{vpaidWillCallMethod:i,vpaidWillSetProperty:r,measurableVpaidDidCreate:n}=t;const o=Vn({},Ee(gg,(e,t)=>{return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return i(t,r)}}),Ee(On(wg,(t,i)=>"function"===typeof e[i]),(t,i)=>()=>e[i]()));return Ja(ae(yg),t=>{Object.defineProperty(o,t,{configurable:!0,enumerable:!0,get:()=>e[t],set:e=>{r(t,e)}})}),n(o),o}(r,new jg(r,{getAdditionalTrackingParameters:f},{onStop:n,onInitMeasurer:o,onTrackEvent:s,onExecutionError:d,onAdError:l,onPlayingStateChange:c,onSlotVisibilityStateChange:h,onSlotHoverStateChange:u,onSlotSizeChange:p}))}}function Kn(e){const t=new Jg(e),i=(r=t,Ja(ae(vg),e=>{const t=vg[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:()=>{if("function"===typeof r[t])try{return r[t]()}catch(i){xd.error({error:new Ea({code:"VPAID_METHOD_FOR_GETTER_ERROR",details:{propertyName:e}})})}else xd.error({error:new Ea({code:"VPAID_HAS_NO_METHOD_FOR_GETTER",details:{propertyName:e}})})}})}),Ja(ae(_g),e=>{const t=_g[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!0,set:i=>{if("function"===typeof r[t])try{return r[t](i)}catch(n){xd.error({error:new Ea({code:"VPAID_METHOD_FOR_SETTER_ERROR",details:{propertyName:e,value:i}})})}else xd.error({error:new Ea({code:"VPAID_HAS_NO_METHOD_FOR_SETTER",details:{propertyName:e,value:i}})})}})}),r);var r;return qn(()=>i,{},{onStop:e=>{let{error:t,reason:i}=e;t?xd.error({error:t}):xd.event({name:"AdCreativeMeasured",probability:zd,data:{stopReason:i}})},onInitMeasurer:e=>{xd.event({name:"AdCreativeInitMeasurer",probability:zd,data:{measurerData:e}})},onTrackEvent:e=>{Mi(e)},onExecutionError:e=>{xd.error({error:e})},onAdError:e=>{let{error:t}=e;xd.errorToStats(t)}})()}function Xn(){return(Xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Qn(){return(Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Jn(e){let{creative:t,isYandexCreative:i,getLogDetails:r}=e;return function(e,t){let{methodCallError:i,methodAbsent:r,workaroundMethodCallError:n,getterError:o,setterError:s}=t;const a=Xn({},Ee(gg,(t,n)=>(function(){for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];if("function"===typeof e[n])try{return e[n].apply(e,o)}catch(a){i({methodName:n,args:o,error:a})}else r({methodName:n,args:o})})),Ee(On(wg,(t,i)=>"function"===typeof e[i]),(t,i)=>(function(){try{return e[i]()}catch(s){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n({methodName:i,args:r,error:s})}})));return J(yg,(t,i)=>{Object.defineProperty(a,i,{configurable:!0,enumerable:!0,get:()=>{try{return e[i]}catch(t){o({propertyName:i,error:t})}},set:t=>{try{e[i]=t}catch(r){s({propertyName:i,error:r,value:t})}}})}),a}(t,{methodCallError:e=>{let{methodName:t,args:n,error:o}=e;xd.error({error:new Ea(o,{code:i?"YANDEX_VPAID_METHOD_CALL_ERROR":"VPAID_METHOD_CALL_ERROR",details:Qn({methodName:t,args:n},r())})}),L(o)},methodAbsent:e=>{let{methodName:t,args:n}=e;xd.error({error:new Ea({code:i?"YANDEX_VPAID_METHOD_ABSENT":"VPAID_METHOD_ABSENT",details:Qn({methodName:t,args:n},r())})})},workaroundMethodCallError:e=>{let{methodName:t,args:n,error:o}=e;xd.error({error:new Ea(o,{code:i?"YANDEX_VPAID_WORKAROUND_METHOD_CALL_ERROR":"VPAID_WORKAROUND_METHOD_CALL_ERROR",details:Qn({methodName:t,args:n},r())})}),L(o)},getterError:e=>{let{propertyName:t,error:n}=e;xd.error({error:new Ea(n,{code:i?"YANDEX_VPAID_GETTER_ERROR":"VPAID_GETTER_ERROR",details:Qn({propertyName:t},r())})}),L(n)},setterError:e=>{let{propertyName:t,value:n,error:o}=e;xd.error({error:new Ea(o,{code:i?"YANDEX_VPAID_SETTER_ERROR":"VPAID_SETTER_ERROR",details:Qn({propertyName:t,value:n},r())})}),L(o)}})}function Zn(e){var t;if(!at(e)&&!st(e)||!rd)return e;const i=Za[Za.length-1];return function(e,t,i){if(void 0===i)return e;const r=$(e),n=te(r.search);return n[t]=i,ee(Z({},r,{search:ie(n)}))}(e,"target_ref",(null!==(t=null===i||void 0===i?void 0:i.ownerDocument)&&void 0!==t?t:document).referrer)}function $n(e,t){return sy.indexOf(e)>=sy.indexOf(t)}function eo(e,t){return $n(e,"start")?t?"YANDEX_VPAID_START_TIMEOUT":"VPAID_START_TIMEOUT":$n(e,"init")?t?"YANDEX_VPAID_INIT_TIMEOUT":"VPAID_INIT_TIMEOUT":t?"YANDEX_VPAID_LOAD_TIMEOUT":"VPAID_LOAD_TIMEOUT"}function to(){return(to=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function io(){return(io=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function ro(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}function no(e){return U(e)&&function(e){return Y(e)&&Math.floor(e)===e}(e)}function oo(e){if(!p(e))return{};const{stickTo:t,stickyColorScheme:i}=e;return z({stickTo:so(t,Oy),stickyColorScheme:so(i,Dy)})}function so(e,t){if("string"!==typeof e)return;const i=e.toLowerCase();return Pt(t).indexOf(i)>-1?i:void 0}function ao(e,t){const i=t.querySelector('Extension[type="'+e+'"]');return i?ut(i):void 0}function lo(e,t){return"true"===ao(e,t)}function co(){return(co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function uo(){return(uo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function ho(e,t,i){const r=[],n=i.querySelector("AdSource");if(!n)throw new Ea({code:"VMAP_AD_BREAK_WITHOUT_AD_SOURCE",details:t});let o=Iy;if(n.hasAttribute("id")){if(!no(o=Number(n.getAttribute("id"))))throw new Ea({code:"INVALID_AD_BREAK_IMP_ID_ATTRIBUTE",details:t})}else r.push(new Ea({code:"NO_AD_BREAK_IMP_ID_ATTRIBUTE",details:t}));const s=i.querySelector("Extensions");if(!s)throw new Ea({code:"NO_AD_BREAK_EXTENSIONS",details:t});const a=n.querySelector("AdTagURI"),d=ut(a);if(!a||!d)throw new Ea({code:"VMAP_AD_SOURCE_WITHOUT_AD_TAG_URI",details:t});const l={adTagURI:d,adFoxParameters:void 0},c=i.getAttribute("breakType"),u=ct(i,"breakId"),h=ct(i,"timeOffset","start"),p=()=>new Ea({code:"VMAP_INCORRECT_TIME_OFFSET",details:uo({},t,{timeOffset:h,breakIdAttribute:u})});if(-1===by.indexOf(u))throw new Ea({code:"VMAP_UNSUPPORTED_AD_BREAK_TYPE",details:uo({},t,{breakIdAttribute:u})});const f=c===ky,A=function(e,t){switch(e){case Ty:return[new Ea({code:"LINEAR_AND_NON_LINEAR_ALLOWED_IN_AD_BREAK",details:t})];case Cy:case ky:return[];default:throw new Ea({code:"INVALID_BREAK_TYPE_ATTRIBUTE",details:t})}}(c,t);if(r.push(...A),f!==ar({adType:u})){if("inroll-overlay"!==u)throw new Ea({code:"INCOMPATIBLE_BREAK_TYPE_ATTRIBUTE",details:t});r.push(new Ea({code:"INCORRECT_BREAK_TYPE_ATTRIBUTE",details:{adBreakType:u,adBreakTypeAttribute:c}}))}let m;if("inpage"===u)m=function(e){const t=ao("Stick",e),i=oo({stickTo:ao("StickTo",e),stickyColorScheme:ao("ColorScheme",e)});return co({stick:"true"===t,adType:"inpage",replayMode:Vy(e)},i)}(s);else if("inroll"===u)m={adType:"inroll"};else if("inroll-overlay"===u)m={adType:"inroll-overlay"};else if(h===Ey.start){if(Sy[h]!==u)throw p();m={adType:"preroll"}}else if(h===Ey.end){if(Sy[h]!==u)throw p();m={adType:"postroll"}}else{if(!/^\d{2}:\d{2}:\d{2}(\.\d+)?/.test(h))throw p();{if(["midroll","overlay"].indexOf(u)<0)throw p();const e=function(e,t){return Number(ao(e,t))}("MaxRepeatCount",s),t=Nt(ct(i,"repeatAfter")),r={timeOffset:Nt(h),repeatAfter:isNaN(t)?Ny:t,maxRepeatCount:isNaN(e)?Py:e,repeatNumber:0};m=uo("midroll"===u?{adType:"midroll",broadcastReplace:lo("BroadcastReplace",s)}:{adType:"overlay"},r)}}return{adBreak:uo({impId:o},m,e,l),errors:r,events:[]}}function po(){return(po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function fo(e){if(!p(e))return{config:{},errors:[]};const t={},i=[];if(void 0!==e.adFoxParameters){const n=p(r=e.adFoxParameters)?At(r)?void 0===r.containerId||le(r.containerId)?le(r.ownerId)?void 0:"ADFOX_PARAMETERS_OWNER_ID_IS_EMPTY":"ADFOX_PARAMETERS_CONTAINER_ID_IS_INVALID":"ADFOX_PARAMETERS_IS_NOT_SERIALIZABLE":"ADFOX_PARAMETERS_IS_NOT_AN_OBJECT";n?i.push(new Ea({code:n,details:{adConfig:e}})):t.adFoxParameters=e.adFoxParameters}var r;return{config:t,errors:i}}function Ao(){return(Ao=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function mo(e){if(!p(e))return{};const{partnerId:t,category:i,vmapId:r,impId:n,videoContentId:o,startWatchedTime:s,watchedTimeSinceAd:a,additionalParams:d}=e;if(void 0!==n&&!no(n))throw new Ea({code:"INVALID_CONFIG_IMP_ID_VALUE",details:{config:e}});if(void 0!==r&&!no(r))throw new Ea({code:"INVALID_CONFIG_VMAP_ID_VALUE",details:{config:e}});return Ao({},function(e){const t=p(e)?e:{};return z({vmapLoadTimeout:void 0===t.vmapLoadTimeout?void 0:Number(t.vmapLoadTimeout),blockInfoLoadTimeout:void 0===t.blockInfoLoadTimeout?void 0:Number(t.blockInfoLoadTimeout)})}(e),{partnerId:void 0===t?void 0:Number(t),category:void 0===i?void 0:Number(i),impId:n,vmapId:r,videoContentId:"string"===typeof o?o:void 0,startWatchedTime:Y(s)?s:void 0,watchedTimeSinceAd:Y(a)?a:void 0,additionalParams:ki(d)})}function go(){return(go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function yo(e){if(!p(e))return{config:{},errors:[]};const{config:t,errors:i}=fo(e);return{config:go({},t,mo(e),function(e){return{width:void 0===e.width?void 0:String(e.width),height:void 0===e.height?void 0:String(e.height),videoContentId:void 0===e.videoContentId?void 0:String(e.videoContentId),videoContentName:void 0===e.videoContentName?void 0:String(e.videoContentName),videoPublisherId:void 0===e.videoPublisherId?void 0:String(e.videoPublisherId),videoPublisherName:void 0===e.videoPublisherName?void 0:String(e.videoPublisherName),videoGenreId:Array.isArray(e.videoGenreId)?ss(e.videoGenreId,String):void 0===e.videoGenreId?void 0:String(e.videoGenreId),videoGenreName:Array.isArray(e.videoGenreName)?ss(e.videoGenreName,String):void 0===e.videoGenreName?void 0:String(e.videoGenreName),musicArtistId:void 0===e.musicArtistId?void 0:String(e.musicArtistId),musicGenreId:"string"===typeof e.musicGenreId?e.musicGenreId:void 0,musicGenreName:"string"===typeof e.musicGenreName?e.musicGenreName:void 0,tagsList:Array.isArray(e.tagsList)?ss(e.tagsList,String):void 0,extParam:void 0===e.extParam?void 0:String(e.extParam),charset:void 0===e.charset?void 0:String(e.charset),targetRef:void 0===e.targetRef?void 0:String(e.targetRef),distrId:void 0===e.distrId?void 0:String(e.distrId)}}(e),{vastUrl:void 0===e.vastUrl?void 0:String(e.vastUrl),vast:void 0===e.vast?void 0:String(e.vast),desiredBitrate:gt(e.desiredBitrate),secureMode:xy(e),loadHarmlessVastCallback:h(e.loadHarmlessVastCallback)?e.loadHarmlessVastCallback:void 0}),errors:i}}function vo(){return(vo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function _o(e){const t=p(e)?e:{};return z(vo({},oo(t),{repeat:void 0===t.repeat?void 0:Boolean(t.repeat),vastTimeout:void 0===t.vastTimeout?void 0:Number(t.vastTimeout),wrapperTimeout:void 0===t.wrapperTimeout?void 0:Number(t.wrapperTimeout),wrapperMaxCount:void 0===t.wrapperMaxCount?void 0:Number(t.wrapperMaxCount),bufferFullTimeout:void 0===t.bufferFullTimeout?void 0:Number(t.bufferFullTimeout),bufferEmptyLimit:void 0===t.bufferEmptyLimit?void 0:Number(t.bufferEmptyLimit),timeLeftShow:void 0===t.timeLeftShow?void 0:Boolean(t.timeLeftShow),videoTimeout:void 0===t.videoTimeout?void 0:Number(t.videoTimeout),vpaidTimeout:void 0===t.vpaidTimeout?void 0:Number(t.vpaidTimeout)}))}function wo(){return(wo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Eo(e){let t={};try{const i=e.getItem(Hy);null!==i&&(t=JSON.parse(i))}catch(r){}const i={};return J(t,(e,t)=>{U(e)&&(i[t]=e)}),i}function So(){return(So=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function bo(){return(bo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function To(e){return le(e)?e:Qy}function Co(){return(Co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function ko(){return(ko=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Io(){return(Io=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Po(){return(Po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function No(e){return!!r(e)&&rv.indexOf(e)>-1}function Do(){return(Do=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Oo(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}function Ro(e,t){e[ov]=t}function Vo(e){return e[ov]}function Bo(e){return e.getBoundingClientRect().bottom>e.ownerDocument.body.getBoundingClientRect().bottom}function Mo(e){if(!e)return!1;const t=(e.ownerDocument||document).defaultView||window;return Boolean(t.Element)&&e instanceof t.Element}function xo(e,t){void 0===t&&(t=lv);const i=e.ownerDocument,{body:r}=i,n=i.documentElement,o=i.defaultView,s=Math.max(r.scrollHeight,r.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);if(e===n||e===r){return s-((o.pageYOffset||n.scrollTop)-(n.clientTop||0)+o.innerHeight)<t}return!(e.clientHeight>0&&e.scrollHeight>e.clientHeight&&e.scrollHeight-(e.scrollTop+e.clientHeight)>t)}function Lo(e){const{parentElement:t}=e;if(!t)return!1;const i=t.parentElement;if(!i)return!1;let r=i;for(;Boolean(r);){if(Mo(r)&&!xo(r))return!1;r=r.parentNode||r.host}return!0}function Fo(e,t){return!!S(e.ownerDocument)&&E(e)>=t}function Uo(){return(Uo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function Ho(){return(Ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function zo(e,t){if(o_)return!1;const{left:i,right:r,top:n,bottom:o}=gs(e),s=r-i,a=o-n,d=e.ownerDocument||document;return!nc(t,t=>{let[r,o]=t;const l=i+(s-1)*(1+r)/2,c=n+(a-1)*(1+o)/2,u=d.elementFromPoint(l,c);if(!u||e===u||e.contains(u))return!0;if(h(e.getRootNode)){if(function e(t,i){const r=t.getRootNode();if(!r||!r.host)return!1;if(i.contains(r.host))return!0;return e(r.host,i)}(u,e))return!0;if(function e(t,i){const r=i.getRootNode();if(!r||!r.host)return!1;if(t===r.host)return!0;return e(t,r.host)}(u,e))return!0}return!1})}function Go(){return(Go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let Wo;i.r(t);const jo=(void 0===(Yo=window)&&(Yo=window),Wo||(Wo=Yo.document.createElement("div")),Wo);var Yo;const qo=(e,t)=>{const i="undefined"!==typeof jo.style[e];if(i&&t&&r(t))try{jo.style.cssText=e+": "+t+";";const i=Boolean(jo.style.cssText);return jo.style.cssText="",i}catch(n){return!1}return i},Ko=["","webkit","moz","o","ms"],Xo=["","-webkit-","-ms-","-moz-","-o-"],Qo={},Jo=function(e){return void 0===e&&(e=""),Qo[e]||function(e){const t=""+e[0].toUpperCase()+e.slice(1);for(let i=0;i<Ko.length;i++){const r=Ko[i],n=r?""+r+t:e;if(qo(n))return Qo[e]=n}return Qo[e]=e}(e)};let Zo=function(e,t,i){e.attachEvent("on"+t,i)},$o=function(e,t,i){e.detachEvent("on"+t,i)};s(document,"addEventListener")&&s(document,"removeEventListener")&&(Zo=function(e,t,i,r){const n=e&&s(e,"addEventListener");n&&n.call(e,t,i,r)},$o=function(e,t,i,r){const n=e&&s(e,"removeEventListener");n&&n.call(e,t,i,r)});let es=!1,ts=!1,is=!1;try{if(function(e){void 0===e&&(e=window);const t=e.Object;try{const e={};return t.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(i){return!1}}()){const e=document.createElement("div"),t={};Object.defineProperty(t,"once",{get:()=>es=!0}),Object.defineProperty(t,"passive",{get:()=>ts=!0}),Object.defineProperty(t,"capture",{get:()=>is=!0}),Zo(e,"click",a,t)}}catch(c_){}const rs=i(37),ns=function(e){void 0===e&&(e=window);const t=rs(e);return"boolean"===typeof t?-1:t},os=function(e){return void 0===e&&(e=window),ns(e)>11},ss=(e,t,i)=>{const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t.call(i,e[n],n,e);return r},as={}.toString,ds=/\[object (\w+)\]/,ls=e=>{const t=as.call(e);if(!t)return null;const i=t.match(ds);if(!i)return null;const r=i[1];return r||null},cs=ss(Xo,e=>"("+e+"any-pointer:coarse)").join(","),us=ss(Xo,e=>"("+e+"touch-enabled)").join(","),hs=function(e){return void 0===e&&(e=window),e.navigator.userAgent.indexOf("UCBrowser")>-1},ps=function(e){void 0===e&&(e=window);const t=g(e).toLowerCase();if(t.indexOf("android")>-1)return!1;const i=t.replace(/\(.+?\)/gi,"").split(" ").map(e=>e.trim().split("/")[0]).filter(e=>e&&"mobile"!==e);return 4===i.length&&"mozilla"===i[0]&&"applewebkit"===i[1]&&"version"===i[2]&&"safari"===i[3]},fs=function(e){return void 0===e&&(e=window),ps(e)||m(e)||function(e){return void 0===e&&(e=window),/Apple/.test(e.navigator.vendor)&&A(e)}(e)}(),As=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(e=>null!==navigator.userAgent.match(e)),ms=e=>"hidden"in e?"hidden":"webkitHidden"in e?"webkitHidden":void 0,gs=e=>{try{const{left:t,right:i,top:r,bottom:n}=e.getBoundingClientRect();return{left:t,right:i,top:r,bottom:n,width:i-t,height:n-r}}catch(t){return{left:0,width:0,top:0,height:0,right:0,bottom:0}}},ys=1e3/60,vs=function(e){const t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||(t=>e.setTimeout(t,ys)),i=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame||(t=>e.clearTimeout(t));return{requestAnimationFrame:t.bind(e),cancelAnimationFrame:i.bind(e)}}(window),_s=vs.requestAnimationFrame,ws=vs.cancelAnimationFrame,Es=(e,t,i)=>{const r=[];for(let n=0;n<e.length;n++){const o=e[n];t.call(i,o,n,e)&&r.push(o)}return r},Ss=[].find,bs=o(Ss)?(e,t)=>Ss.call(e,t):(e,t)=>{for(let i=0;i<e.length;i++){const r=e[i];if(t(r,i,e))return r}};let Ts;const Cs=function(e){void 0===e&&(e=document.body);const t=function(e){const t=T(e);return t.width="0",t.height="0",t.style.position="absolute",t}(e);return{JSON:t.contentWindow.JSON,clean:()=>k(t)}},ks=e=>t=>{const{JSON:i,clean:r}=Cs();try{return i[e](t)}finally{r()}},Is={message:"DEFAULT_ERROR_MESSAGE",code:0,details:"",stack:"?:?:?",isFatal:!0},Ps=i(38);class Ns extends Error{constructor(e,t){void 0===t&&(t={});const i="object"===typeof e?e:{message:String(e||Is.message)};super(),this.message=void 0,this.code=void 0,this.isFatal=void 0,this.details=void 0,this.stack=void 0,this.toString=void 0,this.toJSON=void 0,Ps(this,Ns.prototype),this.message=t.message||i.message||Is.message,this.code=t.code||i.code||i.id||Is.code,this.isFatal=Boolean(function(e){const[t]=Es(e,e=>void 0!==e);return t}([t.isFatal,i.isFatal,Is.isFatal])),this.details=t.details||i.details||Is.details;const r=t.stack||i.stack||function(e){const{url:t,line:i,col:r,fileName:n,columnNumber:o,lineNumber:s}=e;return(t||n||"?")+":"+(i||s||"?")+":"+(r||o||"?")}(i);let n=r===Is.stack?this.stack:r;if(n&&n!==Is.stack)this.stack=n;else if(!this.stack)try{throw new Error(this.message)}catch(o){this.stack=n=o.stack||Is.stack}this.toString=()=>P(this.toJSON()),this.toJSON=()=>({message:this.message,code:this.code,isFatal:this.isFatal,details:this.details,stack:n})}}const Ds=function(e,t){void 0===e&&(e=document);const i=e.currentScript;if(i)return i;{const i=e.getElementsByTagName("script"),r=[];for(let e=0;e<i.length;e++)r.push(i[e]);if("function"===typeof t){const e=r.filter(t);return e[e.length-1]}return r[r.length-1]}}(),Os=Ds?Ds.src:"",Rs=!o(Math.random)||Math.random()===Math.random(),Vs=Date&&h(Date.now)?()=>Date.now():()=>(new Date).getTime(),Bs="undefined"===typeof window?void 0:window.performance,Ms=Bs&&h(Bs.now),xs=Bs&&Bs.timing&&Bs.timing.navigationStart?Bs.timing.navigationStart:Vs();let Ls=0;const Fs=Ms?()=>Bs.now():()=>(()=>{const e=Vs()-xs;return Ls=Math.max(e,Ls)})(),Us=2147483647,Hs=16807;let zs=Date.now()*Fs()%Us;const Gs=Us-1,Ws=Rs?function(){return((zs=zs*Hs%Us)-1)/Gs}:function(){return Math.random()},js=e=>{const t=[];for(;e;)try{if(D(e),t.push(e),e.parent===e)break;e=e.parent}catch(i){break}return t},Ys=s(Array,"isArray"),qs=Boolean(Ys)?e=>Ys.call(Array,e):e=>"Array"===ls(e),Ks=a,Xs=a,Qs=a,Js=e=>{let{win:t,propertyName:i}=e;return{call:e=>Ks(R({win:t,propertyName:i},e)),subscribe:e=>Qs(R({win:t,propertyName:i},e)),wait:e=>(e=>{let{propertyName:t,win:i}=e;return new Promise(e=>{Qs({callback:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e(i)},propertyName:t,win:i})})})(R({win:t,propertyName:i},e)),waitUntil:e=>(e=>{let{propertyName:t,win:i,comparator:r}=e;return new Promise(e=>{Qs({propertyName:t,win:i,callback:function(){r(...arguments)&&e()}})})})(R({win:t,propertyName:i},e)),clear:e=>Xs(R({win:t,propertyName:i},e))}};Js({propertyName:"YANDEX_DESTROYABLE_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});class Zs{constructor(){this._isDestroyed=!1,this.destroyHandlers=[],this._destroyReason=void 0}onDestroy(e){this._addDestroyHandler(e)}addDestroyListener(e){this._addDestroyHandler(e)}addDestroyHandler(e){this._addDestroyHandler(e)}destroy(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r]=t;this._isDestroyed||(this._isDestroyed=!0,this._destroyReason=r,this.destroyHandlers.forEach(e=>e(...t)),this.destroyHandlers.length=0)}getIsDestroyed(){return this._isDestroyed}get destroyReason(){return this._destroyReason}get isDestroyed(){return this._isDestroyed}ignoreAfterDestroy(e){var t=this;let i=e;return function(){t.isDestroyed&&(i=a);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];i.apply(t,r)}}_addDestroyHandler(e){this._isDestroyed?e(this._destroyReason):this.destroyHandlers.push(e)}}class $s{constructor(){this.on=[],this.once=[]}add(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.on.push(...t),()=>this.remove(...t)}addOne(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.once.push(...t),()=>this.remove(...t)}promise(){return new Promise(e=>this.addOne(e))}dispatch(e){const{once:t}=this;this.once=[],B(this.on,e),B(t,e)}removeAll(){this.on.length=0,this.once.length=0}remove(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.on=this.on.filter(e=>t.indexOf(e)<0),this.once=this.once.filter(e=>t.indexOf(e)<0)}}class ea extends $s{constructor(e,t){void 0===t&&(t=(e,t)=>e===t),super(),this.checkToEqualFunction=t,this.value=void 0,this.value=e}getValue(){return this.value}subscribeValueCondition(e,t){return this.add(i=>{e(i)&&V(t,i)})}subscribeValueConditionOnce(e,t){const i=this.subscribeValueCondition(e,e=>{i(),V(t,e)});return i}dispatch(e){this.checkToEqualFunction(this.value,e)||(this.value=e,super.dispatch(e))}}const ta=250;let ia=0;const ra=[];class na extends Zs{constructor(e,t){let{lazy:i=!1}=void 0===t?{}:t;super(),this.onResize=void 0,this.resizeObserverCallback=e=>{let[{contentRect:{width:t,height:i}}]=e;this.onResize.dispatch({width:t,height:i})};const r=i?{width:NaN,height:NaN}:gs(e);if(this.onResize=new ea({width:r.width,height:r.height},(e,t)=>{let{width:i,height:r}=t;return e.width===i&&e.height===r}),i){const t=_s(()=>{const{width:t,height:i}=gs(e);this.onResize.dispatch({width:t,height:i})});this.addDestroyHandler(()=>{ws(t)})}if(this.addDestroyHandler(()=>{this.onResize.removeAll()}),"undefined"!==typeof ResizeObserver&&o(ResizeObserver))try{const t=new ResizeObserver(this.resizeObserverCallback);t.observe(e),this.addDestroyHandler(()=>{t.disconnect()})}catch(c_){this.fallbackToCustomDetectionMethods(e)}else this.fallbackToCustomDetectionMethods(e)}getSize(){return x({},this.onResize.getValue())}fallbackToCustomDetectionMethods(e){const{ownerDocument:t}=e;if(!t)return;const{defaultView:i}=t;if(!i)return;const r=()=>{const t=gs(e);this.onResize.dispatch({width:t.width,height:t.height})};this.addDestroyHandler(d(i,"resize",r,{passive:!0})),this.addDestroyHandler(M(r))}}const oa=.5,sa="function"===typeof IntersectionObserver&&o(IntersectionObserver),aa=((e,t)=>i=>{let r,n;const o=()=>{e(n),n=NaN},s=function(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return o(),n=t(e=>{n=NaN,r=i.call(this,e,...s)}),r};return s.cancel=o,s})(ws,_s),da=e=>e instanceof Error||"Error"===ls(e),la=e=>(e=>e instanceof Promise||"Promise"===ls(e)&&Boolean(F(()=>o(e.constructor))))(e)||(e=>Boolean(F(()=>h(e.then)&&h(e.catch))))(e),ca=function(e,t,i){let r=0;for(arguments.length<3&&(r=1,i=e[0]);r<e.length;r++)i=t(i,e[r],r,e);return i},ua=function e(t){return ca(t,(t,i)=>t.concat(qs(i)?e(i):i),[])},ha=e=>{let t=0;return{promise:new Promise(i=>{t=window.setTimeout(i,e)}),clear(){clearTimeout(t)},timeoutId:t}},pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",fa=-1,Aa={droppedVideoFrames:fa,corruptedVideoFrames:fa,totalVideoFrames:fa},ma=q({},Aa,{droppedVideoFramesRatio:fa}),ga=0,va={width:0,height:0},_a={visibility:0,size:va,relativeSizeRatio:0,screenSize:va,devicePixelRatio:0,downlink:0,videoContentSize:va,videoPixelRatio:fa,videoFramesInfo:ma,videoSrc:"",videoMuted:!0,videoVolume:ga,videoCurrentSrc:"",bufferingTime:0,currentTime:0,bufferingTimeRatio:fa,remainingBufferedTime:0},wa={NO_APPROPRIATE_VIDEO_SOURCE:52,MEDIA_ERR_ABORTED:101,MEDIA_ERR_NETWORK:102,MEDIA_ERR_SRC_NOT_SUPPORTED:104,VIDEO_ERROR:10,INVALID_VAST_XML:40,YANDEX_INVALID_VAST_XML:40,INCORRECT_SKIPOFFSET_FORMAT:46,YANDEX_INCORRECT_SKIPOFFSET_FORMAT:46,ADFOX_VAST_LOAD_ERROR:47,VAST_LOAD_ERROR:48,NO_AD_SECTION:53,VAST_LOAD_TIMEOUT:60,YANDEX_VAST_LOAD_TIMEOUT:60,NO_INLINE_OR_WRAPPER_NODE:58,YANDEX_NO_INLINE_OR_WRAPPER_NODE:58,INLINE_AND_WRAPPER_NODE_IN_ONE_AD_SECTION:59,YANDEX_INLINE_AND_WRAPPER_NODE_IN_ONE_AD_SECTION:59,VIDEO_TIMEOUT:62,BUFFER_FULL_TIMEOUT:63,BUFFER_EMPTY_LIMIT:64,VPAID_START_TIMEOUT:65,EXPECTED_PREROLL_AD_BREAK:66,VMAP_CONFIG_WITHOUT_PARTNER_ID:1003,NO_AD_TO_DISPLAY:51,VPAIDLoadingError:68,VPAIDPlayingError:67,InteractiveViewerInitAdParamsError:69,VpaidEventBusCallbackError:81,CANNOT_LOAD_VPAID_MEDIA_FILE:82,CANNOT_LOAD_MODULE:91,CANNOT_INIT_MODULE:92,TOO_MANY_CREATE_AD_DISPLAY_CONTROLLER_REQUESTS:21002,TOO_MANY_BANNER_AD_REPLAY_REQUESTS:21003,PUBLIC_CONTROLLER_PLAY_ERROR:21010,NO_AD_CUSTOM_MARKER:21101};class Ea extends Ns{constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={});const i=t.message||e.message;super(e,X({},t,{message:"AdSDK Error ["+(t.code||e.code)+"]"+(i?"["+i+"]":"")})),this.id=void 0,this.id=function(e){return wa[e]||0}(this.code)}}class Sa{constructor(e){this.cache=e}get(e){return this.cache[e]}has(e){return e in this.cache}set(e,t){this.cache[e]=t}}const ba=function(e,t,i){return void 0===t&&(t=e=>e),void 0===i&&(i=new Sa({})),function(){const r=t.apply(this,arguments);if(i.has(r))return i.get(r);const n=e.apply(this,arguments);return i.set(r,n),n}},Ta=document.createElement("a"),Ca=(ba(e=>{return Z({},$(e))}),/^(android-app:|chrome-extension:)/),ka=e=>{try{return decodeURIComponent(e)}catch(t){return e}},Ia=(e,t)=>t.map(t=>e+"[]="+encodeURIComponent(t)).join("&");let Pa=document.currentScript;if(!Pa){const e=oe(document.getElementsByTagName("script"));(Pa=bs(e,e=>p(e.__AD_SDK_SCRIPT_SESSION_PARAMETERS__)))||(Pa=e[e.length-1])}const Na=Pa,Da=Na&&Na.__AD_SDK_SCRIPT_SESSION_PARAMETERS__;Na&&delete Na.__AD_SDK_SCRIPT_SESSION_PARAMETERS__;const Oa=Da&&Da.SID,Ra=Da&&Da.SAMPLE_SPACE,Va=Da&&Da.AdditionalStatsRootFields,Ba=Oa||N(64),Ma={adsdkver:0,adsdkdebug:0,adsdkecmaver:0,adsdkpreactskin:0,adsdktracelogs:0},xa=(ae(Ma),{}),La=se(document);for(const{location:ya}of La){J(te($(ya).search),(e,t)=>{0===Ma[t]&&(xa[t]=e)})}let Fa;try{Fa={build:3998,code:[{id:3998,percent:100}]}}catch(u_){Fa={}}const{build:Ua,code:Ha}=Fa,za=Ua,Ga=function(e,t,i){const r=ue(e,t);return r?Number(r):function(e){const t=100*Ws();let i=0;for(let r=0;r<e.length;r++)if(t<(i+=e[r].percent))return e[r].id;return e[0].id}(i)}(window,"adsdkver",Ha),Wa=(e,t)=>{for(const i of t.split(".")){if(!p(e)){e=void 0;break}e=e[i]}return e},ja="__ADB_CONFIG__",qa=p(ja)&&ja.fn&&h(ja.fn.encodeUrl)?ja.fn.encodeUrl:void 0,Ka=void 0!==qa?e=>qa(e):void 0,Xa=function(e){if(void 0===e&&(e=window),Ka)return Ka;const t=js(e);for(;t.length;){const e=t.pop();if(!e)continue;const i=Wa(e,"ya.videoAd.encodeUrl");if(h(i))return i}},Qa=Xa(window),Ja=(e,t,i)=>{for(let r=0;r<e.length;r++)t.call(i,e[r],r,e)},Za=y(document.documentElement),{length:$a}=Za,ed=$a>0?Za[$a-1].ownerDocument.defaultView:window,td=Boolean(window.location.ancestorOrigins),id=pe(window),rd=function(){const e=ss(Za,e=>e.ownerDocument),{length:t}=e,i=(t?e[t-1]:document).defaultView;return!!i&&i.self!==i.parent}(),{topAncestor:nd,isTrusted:od}=function(e){void 0===e&&(e=window);const t=pe(e);if(t.length>0)return{topAncestor:t[t.length-1],isTrusted:!0};const{location:i,referrer:r}=Ae(e.document),n=rd?r:i,o=!rd||fe(ed).length<2,{protocol:s,hostname:a,host:d,port:l}=$(n);return{topAncestor:ee({protocol:s,hostname:a,host:d,port:l,originalPath:"",href:"",pathname:"",search:"",hash:""}),isTrusted:o}}(),sd=nd,ad=od,dd=200,ld=4,cd=Ws(),ud=e=>o(e.navigator.sendBeacon),hd=ud(window),pd=64,fd=(Js({propertyName:"YANDEX_STATS_GLOBAL_CALLBACK_PROPERTY_NAME",win:window}),""),Ad="InPage",md="InteractiveViewer"===Ad?"interactive-viewer-test-tag":"adsdk-test-tag",gd=js,yd=function(e){const t=gd(e);for(const i of t){const{BANNER_TYPE_FROM_NANPU:e}=i;if("string"===typeof e&&e.length>0)return e}}(window),vd=1e3,_d=60,wd=24*(60*_d)*vd,Ed=Se({},Ee({beforeCompleteOffset:[.05,.1,.2,ta/vd,.3,.4,.5]},we),Ra);class Sd{static sliceBits(e,t,i){return function(e,t,i){const r=t+i,n=ke(e.toString(2),r).substr(-r,i);return parseInt(n,2)}(e,t,i)}constructor(e){void 0===e&&(e={}),this.props={},this.setProps(Ie({},this.defaults(),e))}defaults(){return{}}toString(){return this.serialize().toString()}setProps(e){return p(e)&&Ja(this.getTemplate(),t=>{let[,i]=t;i&&e.hasOwnProperty(i)&&(this.props[i]=e[i])},this),this}getProps(){return Ie({},this.props)}clone(){return new(0,this.constructor)(this.props)}serialize(){var e,t;return Te((e=this.getTemplate(),t=this.props,ss(e,e=>{let[i,r]=e;return[i,r&&t[r]||null]})))}slice(e,t){return Sd.sliceBits(this.serialize(),e,t)}}let bd;!function(e){e.VERSION="VERSION",e.BUNDLE="BUNDLE",e.UNUSED="UNUSED",e.ADBLOCK="ADBLOCK"}(bd||(bd={}));const Td={AdSDKLoader:0,VpaidPlayerLoader:1,OldMotionVpaidLoader:2,AdLoader:11,BannerAd:12,InPage:13,InteractiveViewer:14,VideoPlayer:15,Multiroll:16,VideoBannerAd:17,OverlayTGO:18,YaMusicAPI:19,MotionTGO:20,VpaidPlayer:21,OldMotionVideoBanner:22,OldMotionVideoBannerRMP:23,Examples:30,Test:31,TestVpaid:31};const Cd=new class extends Sd{getTemplate(){return[[10,bd.VERSION],[5,bd.BUNDLE],[34,bd.UNUSED],[1,bd.ADBLOCK]]}defaults(){return{[bd.VERSION]:za,[bd.BUNDLE]:Td[Ad],[bd.UNUSED]:0,[bd.ADBLOCK]:h(Qa)}}},{rootFields:kd,extractionError:Id}=(e=>{let t,i;return{rootFields:t=F(()=>(e=>{const t=Wa(e,"ya.videoAd.statsRootParams");if(p(t)){const e={},{vsid:i,contentPlayerVersion:r}=t;if(le(i)&&(e.vsid=i),le(r)&&(e.contentPlayerVersion=r),ae(e).length>0)return e}})(e),e=>{i=e})||void 0,extractionError:i}})(window),Pd=kd,Nd=Id,Dd=e=>{let{eventType:t,eventName:i,value:r,values:n}=e;const o={};return J(n,(e,r)=>{o[t+"_"+i+"_"+r]=e}),Pe({[t+"_"+i]:r},o)},Od=Pe({},Va||Pd||{},{[md]:String(Cd.serialize()),bannerTypeFromNanpu:yd,bundleName:Ad,sampleSpace:Ed});class Rd{constructor(e){this.rootFields={},this.labels={},this.params=void 0,this.event=e=>{let{name:t,data:i,labels:r,probability:n,extraRootFields:o}=e;this.push({eventType:"event",eventName:t,data:i,additionalStatsLabels:r,probability:n,extraRootFields:o})},this.error=e=>{let{error:t,labels:i,probability:r,extraRootFields:n}=e;const o=new Ns(t);this.push({eventName:String(o.code),eventType:"fatal",data:o,additionalStatsLabels:i,probability:r,extraRootFields:n})},this.values=e=>{let{name:t,values:i,data:r,labels:n,probability:o,extraRootFields:s}=e;this.push({eventName:t,eventType:"values",data:r,additionalStatsLabels:n,probability:o,values:i,extraRootFields:s})},this.warning=e=>{let{name:t,message:i,probability:r,extraRootFields:n}=e;ce(i),this.push({eventName:t,eventType:"warning",data:{message:i},probability:r,extraRootFields:n})},this.getParams=()=>{return function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(this.params,["onLogError"])},this.setRootFields=e=>{const t=de(e);Ja(t,e=>{let[t,i]=e;void 0===i?delete this.rootFields[t]:this.rootFields[t]=i})},this.setLabels=e=>{const t=de(e);Ja(t,e=>{let[t,i]=e;void 0===i?delete this.labels[t]:this.labels[t]=i})},this.errorToStats=(e,t,i)=>{const r=new Ns(e);this.push({eventName:String(r.code),eventType:"fatal",data:r,additionalStatsLabels:t,extraRootFields:i})};const{onLogError:t}=e;this.params=Pe({},e,{sid:e.sid||N(pd),onLogError:t?e=>{try{t(e)}catch(e){L(e)}}:L})}push(e){let{eventName:t,eventType:i,data:r={},additionalStatsLabels:n,value:o=1,probability:s=1,values:a={},extraRootFields:d={}}=e;if(!ve(s))return;const{service:l,version:c}=this.params,u={service:l,version:c,data:r,eventName:t,eventType:i,additionalStatsLabels:n,value:o,values:a};if(Rd.isSendingData)throw new Ns({message:"RecursiveStatsRequests",details:{service:l,version:c,eventType:i,eventName:t}});Rd.isSendingData=!0;try{const e=re(Vd,Pe({[l]:c,[i]:t},n)),r=this.createFullStatsObject(u,d);this.sendData(e,P(r))}catch(u_){Rd.isSendingData=!1,this.params.onLogError(new Ns(u_,{details:{service:l,version:c,eventType:i,eventName:t}}))}Rd.isSendingData=!1}sendData(e,t){_e(e,t)||ge({url:e,data:t,method:"POST"})}createFullStatsObject(e,t){const{service:i,version:r,eventName:n,eventType:o,data:s,additionalStatsLabels:a,value:d}=e,l=Dd(e),c=Pe({},this.labels,a,{version:this.params.version}),u={service:i,tags:ye(de(l)),labels:ye(de(c))},{location:p,referrer:f}=Ae(document);return Pe({},t,Od,this.rootFields,u,{timestamp:Date.now(),eventType:o,eventName:n,data:s,sid:this.params.sid,version:r,location:D(window),topLocation:p,topAncestor:sd,isTopAncestorUndetermined:!ad||void 0,ancestorOrigins:id,documentIsVisible:S(document),referrer:window.document.referrer,topReferrer:f,currentScriptSrc:Os,secureIFrame:rd,isVideoADB:h(Qa),value:d,rnd:cd,topDocumentFocus:he()})}}Rd.isSendingData=!1;const Vd="https://jstracer.yandex.ru/jstracer",Bd=$(Vd).hostname,Md=Q(e=>{L(e)}),xd=new Rd({service:"AdSDKJS",version:String(za),sid:Ba,onLogError:e=>{Md(e),xd.error({error:new Ea({code:"STATS_LOG_ERROR",details:{error:e}})})}}),Ld=ue(window,"adsdkdebug"),Fd=Boolean(Ld),Ud=1,Hd=.001,zd=Fd?Ud:.05,Gd=Fd?Ud:Hd,Wd=ve(zd),jd=function(e,t){let i=e[t];if(!o(i)){const r=i;try{delete e[t],i=e[t],e[t]=r}catch(u_){}}return i}(Object,"create")?Object.create:function(e,t){function i(){}if(i.prototype=e,p(t))for(const r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return new i},Yd=e=>e instanceof Date||"Date"===ls(e),qd=function e(t,i){void 0===i&&(i={preserveConstructors:!0});let r=t;if(qs(t)){return t.map(t=>e(t,i))}return Yd(t)?new Date(t.getTime()):(!h(t)&&p(t)&&(r=i.preserveConstructors?jd(t):{},J(t,(t,n)=>{r[n]=e(t,i)})),r)},Kd=["nobanner","noad"],Xd=sa||!rd,Qd="client-ts",Jd="client-timezone-offset",Zd="adsdk-bundle-version",$d="adsdk-bundle-name",el="adsdk-container-visibility",tl="adsdk-container-width",il="adsdk-container-height",rl="ad-session-id",nl="sid",ol="viewability-undetermined",sl="top-ancestor",al="top-ancestor-undetermined",dl="video-volume",ll="video-muted",cl=(e,t,i)=>{let r=e.getItem(t);return r||(r=i(t),e.setItem(t,r)),r},ul=(e,t,i)=>{if(!p(e))return e;const r=e,n=t.split("."),o=n.pop();for(const s of n){const t=e[s];e=p(t)?t:e[s]={}}return e[o]=i,r},hl=e=>{try{return e()}catch(u_){return}},pl=(e,t,i,r)=>(function(){try{return t.apply(i||this,arguments)}catch(u_){if(h(r)&&r(u_),!0===u_.preventProtect)throw u_;pl.log(u_,e)}});pl.log=function(e,t){console.log("LOG:"+t+":"+e)},pl.setTimeout=(e,t,i,r)=>window.setTimeout(pl("timeout",e,i,r),t);class fl{}fl.YaContextCallbacks=Oe("Ya.C","ontext._callbacks"),fl.YaContextCallbacksCalls=Oe("Ya.C","ontext._callbacks_call"),fl.AdvManager=Oe("A","dvManager"),fl.AdvBlock=Oe("A","dvBlock"),fl.RTB=Oe("R","TB"),fl.Rtb=Oe("R","tb"),fl.MetrikaAdtune=Oe("metrika_a","dtune");class Al{constructor(e){this.obj=e}getItem(e){return this.obj[e]}setItem(e,t){this.obj[e]=t}}const ml=Q(()=>((e,t,i)=>{let r;return((e,t)=>{const i=e.slice();for(;i.length;){const e=t(i.shift());if(!e)return;i.push(...e)}})([e.top],e=>{if(!(r=hl(()=>Wa(e,t))))return hl(()=>oe(e.frames))||[]}),r||(r=i()),ul(e,t,r),r})(self,"Ya.pcodeCrossFrameData",()=>new Al({}))),gl=e=>cl(ml(),e,()=>new Al({})),yl=Q(()=>((e,t,i)=>{let r=Wa(e,t);return r||(r=i(),ul(e,t,r)),r})(self,"Ya.pcodeWindowData",()=>new Al({}))),vl=e=>cl(yl(),e,()=>new Al({})),_l=pl("metrika::pushEvent",(e,t)=>{const i=Wa(e,"Ya._metrika.dataLayer")||[];ul(e,"Ya._metrika.dataLayer",i),i.push({ymetrikaEvent:{type:"params",parent:1,data:{__ym:Re({},t)}}})}),wl=pl("sessionId::configureMetrika",(e,t)=>{_l(e,{adSessionID:t})}),El=()=>(1e6*Ws()).toFixed(0)+(new Date).valueOf().toString();let Sl;const bl=()=>(Sl||(Sl=((e,t,i,r)=>{let n=t.getItem("sessionId");return n||(n=i.getItem("sessionId")||e(),r(window,n)),t.setItem("sessionId",n),i.setItem("sessionId",n),n})(El,vl("common"),gl("common"),wl)),Sl),Tl=()=>F(bl)||void 0,Cl=function(e){if(void 0===e&&(e=window),m(e)&&e.navigator){const{platform:t}=e.navigator;if(t&&/iP(hone|od|ad)/.test(t)){const t=e.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(t)return parseInt(t[1],10)}}return-1}(),kl=function(e){return void 0===e&&(e=window),/Windows Phone/i.test(e.navigator.userAgent)},Il=function(e){void 0===e&&(e=window);const{userAgent:t=""}=e.navigator,i=/Android/.test(t),r=kl(e),n=/com\.yandex\.mobile\.metrica\.ads\.sdk.*?Android/.test(t);return i&&!r||n}(),Pl=m();i(39);const Nl=function(e,t,i,r){void 0===i&&(i=0),void 0===r&&(r=Dl);for(let n=i;n<e.length;n++)if(r(e[n],t))return n;return-1},Dl=(e,t)=>e===t,Ol=Be(ae({AdSDKLoader:0,VpaidPlayerLoader:0,OldMotionVpaidLoader:0}),Ad),Rl="1.0-"+za,Vl=["an.yandex.ru","yastatic.net"],Bl={AdSDKLoader:"adsdk",OldMotionVpaidLoader:"vpaid-motion",VpaidPlayerLoader:"interactive_viewer"},Ml="https://yastatic.net/awaps-ad-sdk-js-bundles/",xl=()=>{if(!Ol)return;const{currentScript:e}=document;if(!e)return;const{src:t}=e;if(!r(t))return;const i="https://yastatic.net/awaps-ad-sdk-js/1_0/"+Bl[Ad]+".js",n=ee(Me({},$(t),{search:"",hash:""}));n!==i&&(h(Xa(window))?xd.event({name:"AbdLoaderScripsSrc",probability:zd,data:{src:t}}):0===n.indexOf(Ml)?xd.event({name:"HardcodedLoaderScriptSrc",probability:zd,data:{src:t}}):xd.event({name:"UnexpectedLoaderScripsSrc",probability:zd,data:{src:t,expectedSrc:i}}))},Ll=async(e,t)=>{let i;try{await new Promise((r,n)=>{t&&t.then(r,n),i=window.setTimeout(r,e)})}finally{window.clearTimeout(i)}},Fl=30*wd,Ul=()=>{Date.now()-1600074230202<Fl||Ll(2e3).then(()=>Le({url:"https://yastatic.net/awaps-ad-sdk-js/1_0/build_info.json",method:"GET"})).then(e=>{let{responseText:t}=e;const{version:i}=JSON.parse(t);i!==za&&xd.warning({name:"UsingDeprecatedLoaderVersion",message:"AdSDK version you are using ("+za+") is out of date. Actual version is "+i+"."})}).catch(e=>{xd.error({error:new Ea(e,{code:"REQUEST_BUILD_INFO_ERROR"})})})},Hl={ES5:"bundles",ES2017:"bundles-es2017"},zl=Fe({},{InPage:"inpage",BannerAd:"banner_ad",VideoPlayer:"video_player",AdLoader:"loader",VideoBannerAd:"videobannerad",Multiroll:"multiroll",YaMusicAPI:"ya-music-api",VpaidPlayer:"vpaid_player"},{OverlayTGO:"overlay_tgo",MotionTGO:"motion"},{InteractiveViewer:"interactive_viewer",OldMotionVideoBanner:"video-banner_motion",OldMotionVideoBannerRMP:"video-banner_motion_rmp"});let Gl;!function(e){e.LOAD_SCRIPT_ERROR="LOAD_SCRIPT_ERROR",e.STATS_SENSOR_NAME_ERROR="STATS_SENSOR_NAME_ERROR",e.STATS_LABEL_KEY_ERROR="STATS_LABEL_KEY_ERROR",e.STATS_LABEL_VALUE_ERROR="STATS_LABEL_VALUE_ERROR"}(Gl||(Gl={}));const Wl="utf-8",jl=e=>!0,Yl={dropCacheOnRetry:!0,onBeforeLoad:e=>{e.__AD_SDK_SCRIPT_SESSION_PARAMETERS__={SID:Ba,SAMPLE_SPACE:Ed,AdditionalStatsRootFields:Pd}}},ql=(e=>(e=>{try{if("noModule"in e.HTMLScriptElement.prototype)return!0}catch(t){}return!1})(e)&&ud(e))(window),Kl=(""+ue(window,"adsdkecmaver")).toUpperCase(),Xl="ES2017"===Kl||"ES5"===Kl?Kl:void 0,Ql=function(e){if(void 0===e&&(e=Ga),"ES2017"===Xl)return!0;if("ES5"===Xl)return!1;if(!ql)return!1;return!!Jl(e)},Jl=e=>e>2237,Zl={PREROLL:"preroll",MIDROLL:"midroll",PAUSEROLL:"pauseroll",OVERLAY:"overlay",POSTROLL:"postroll"},$l={VAST_URL:"vastUrl",VAST:"vast",AD_FOX_URL:"adFoxUrl",AD_FOX_URL_VAST:"adFoxUrlVast",PARTNER_ID:"partnerId",CATEGORY:"category",TAGS_LIST:"tagsList",CHARSET:"charset",VIDEO_CONTENT_ID:"videoContentId",VIDEO_CONTENT_NAME:"videoContentName",VIDEO_PUBLISHER_ID:"videoPublisherId",VIDEO_PUBLISHER_NAME:"videoPublisherName",VIDEO_GENRE_ID:"videoGenreId",VIDEO_GENRE_NAME:"videoGenreName",EXT_PARAM:"extParam",PLAYER_INFO:"playerInfo",DURATION:"duration"};const ec=new class{constructor(){this.DEFAULT_CSS=void 0}},tc=window;et({videoAd:{get AdConfigParams(){return tc.ya&&!tc.ya.isDeploying&&xd.warning({name:"UsingDeprecatedGlobalVideoAdAdConfigParamsProperty",message:"You are using deprecated ya.videoAd.AdConfigParams property",probability:zd}),$l},encodeUrl:Ka,loadModule:function(e){return new Promise((t,i)=>{$e({moduleName:e,version:void 0,onSuccess:t,onError:i})})},skipTokens:[],modules:{},play:e=>new Promise((t,i)=>{$e({moduleName:"AdLoader",version:void 0,onSuccess:r=>{let{play:n}=r;n(e).then(t).catch(i)},onError:i})}),getBundleVersion:()=>String(za),getModuleVersion:()=>String(Ga)},mediaAd:{get DOMAIN(){return tc.ya&&!tc.ya.isDeploying&&xd.warning({name:"UsingDeprecatedGlobalMediaAdDomainProperty",message:"You are using deprecated ya.mediaAd.DOMAIN property",probability:zd}),"yastatic.net"},get SDK_VERSION(){return tc.ya&&!tc.ya.isDeploying&&xd.warning({name:"UsingDeprecatedGlobalMediaAdSdkVersionProperty",message:"You are using deprecated ya.mediaAd.SDK_VERSION property, use videoAd.getBundleVersion() instead",probability:zd}),Rl},get AdType(){return tc.ya&&!tc.ya.isDeploying&&xd.warning({name:"UsingDeprecatedGlobalMediaAdAdTypeProperty",message:"You are using deprecated ya.mediaAd.AdType property",probability:zd}),Zl},get TrackingEventType(){return tc.ya&&!tc.ya.isDeploying&&xd.warning({name:"UsingDeprecatedGlobalMediaAdTrackingEventTypeProperty",message:"You are using deprecated ya.mediaAd.TrackingEventType property",probability:zd}),{ERROR:"error",IMPRESSION:"impression",CREATIVE_VIEW:"creativeView",START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",MUTE:"mute",UNMUTE:"unmute",PAUSE:"pause",RESUME:"resume",FULLSCREEN:"fullscreen",EXIT_FULLSCREEN:"exitFullscreen",CLOSE:"close",SKIP:"skip",CLICK_THROUGH:"clickThrough",PROGRESS:"progress",REWIND:"rewind",EXPAND:"expand",COLLAPSE:"collapse",ACCEPT_INVITATION:"acceptInvitation"}},get AdConfigParams(){return tc.ya&&!tc.ya.isDeploying&&xd.warning({name:"UsingDeprecatedGlobalMediaAdAdConfigParamsTypeProperty",message:"You are using deprecated ya.mediaAd.AdConfigParams property",probability:zd}),$l},bannerAd:{initVideo:(e,t,i)=>{xd.event({name:"UsingDeprecatedGlobalMethodInitVideo",probability:zd,data:void 0}),$e({moduleName:"BannerAd",version:void 0,onSuccess:r=>{r.initVideo(e,t,i)},onError:i})}},inPage:{addInPageVideo:(e,t,i)=>{xd.event({name:"UsingDeprecatedGlobalMethodAddInPageVideo",probability:zd,data:void 0}),$e({moduleName:"InPage",version:void 0,onSuccess:r=>{r.addInPageVideo(e,t,i)},onError:i})}}},video:{addVideoPlayer:(e,t,i,r)=>{xd.warning({name:"UsingDeprecatedGlobalMethodAddVideoPlayer",message:"You are using deprecated HTML5VideoPlayer. Use Yandex StreamPlayer https://yandex.ru/support/video-hosting/index.html."}),$e({moduleName:"VideoPlayer",version:void 0,onSuccess:n=>{n.addVideoPlayer(e,t,i,r)},onError:a})}}},"ya");const ic=ya;p(Pd)?xd.event({name:"UsingGlobalStatsRootField",probability:Gd,data:{statsRootParams:Pd}}):da(Nd)&&xd.error({error:new Ea({code:"GLOBAL_STATS_ROOT_FIELDS_EXTRACTION_ERROR",details:{error:Nd}})}),Ol&&xd.values({name:"CreateLoader",data:{statsRootParams:Pd},labels:{bundleName:Ad},values:{liveTime:Date.now()-1600074230202}}),Ol&&(xl(),Ul());const rc="adfox.ru",nc=(e,t)=>{for(let i=0;i<e.length;i++)if(t(e[i],i,e))return!0;return!1},oc=[...["localhost","127.0.0.1"].concat([]),...["yandex.ru","yandex.com","yandex.net","yandex.com.tr","yandex.ua","yandex.by","yandex.kz","yastatic.net","yandex.st","yandex-team.ru","yandex-team.com","yandex-team.com.ua","yandex-team.net.ua","yandex-team.com.tr","ya.ru","yandexsport.ru"]];let sc={ads:[],children:[],xmlString:""};const ac=(e,t,i)=>{const r=ct(e,t,i),n=parseInt(r,10);return Y(n)?n:i},dc=-1,lc=4,cc="ru",uc="TranslatorError";class hc extends Ns{constructor(){super(...arguments),this.name=uc}}const pc={controlsVisibility:{}},fc=-1,Ac=ue(window,"adsdkpreactskin"),mc=Boolean(Ac)||void 0,gc=2147483647;let yc;!function(e){e.adLabel="adLabel",e.timeLeft="timeLeft",e.skip="skip",e.title="title",e.mute="mute",e.play="play",e.timeline="timeline",e.abuse="abuse",e.loader="loader"}(yc||(yc={}));const vc=ae(yc);let _c;!function(e){e.timeLeft="timeLeft",e.skip="skip",e.title="title",e.mute="mute",e.play="play"}(_c||(_c={}));ae(_c);let wc;(function(e){e.EXTERNAL_CONFIG="EXTERNAL_CONFIG",e.INPAGE_RETAINS_CONTROL="INPAGE_RETAINS_CONTROL",e.BLOCKED_IS_DEPRECATED="BLOCKED_IS_DEPRECATED"})(wc||(wc={}));const Ec={color:null,resource:null},Sc={text:"",textColor:"#FFFFFF",isVisible:!1},bc=(Js({propertyName:"KNOCK_GLOBAL_CALLBACK_PROPERTY_NAME",win:window}),fe(window),ue(window,"adsdktracelogs"));Boolean(bc);let Tc,Cc={sequence:0,adParameters:"",mediaFiles:[],icons:[],isNonLinear:!1,progressTrackings:[],trackingEvents:{},clickThrough:"",abuseUrl:"",duration:0,isClickable:!0,isNotReplacedBroadcastAd:!1};(function(e){e.portion="portion",e.seconds="seconds"})(Tc||(Tc={}));const kc=Pt(Tc);let Ic={showCountDown:!0,showSoundButton:!0,showLabel:!0};const Pc=e=>({src:ut(e.querySelector("StaticResource")),program:ct(e,"program"),xPosition:ac(e,"xPosition",0),yPosition:ac(e,"yPosition",0),width:ac(e,"width",0),height:ac(e,"height",0)}),Nc=(e,t,i)=>{i&&t&&(e.trackingEvents[t]=[...e.trackingEvents[t]||[],i])},Dc=function(e,t){let{isYandexVastUrl:i}=void 0===t?{}:t;const r=e.querySelector("VideoClicks"),n=e.querySelectorAll("MediaFile"),o=e.querySelector("Linear"),s=e.querySelector("NonLinear"),a=e.querySelector("NonLinearClickThrough"),d=e.querySelector("TrackingEvents"),l=d?d.querySelectorAll("Tracking"):[],c=oe(e.querySelectorAll("Impression")),u=e.querySelectorAll("Error"),h=e.querySelector("Extensions"),p=e.querySelector("Description"),f=e.querySelectorAll("Icons Icon"),A=e.querySelector("AdParameters"),m=e.querySelector("AdSystem"),g=e.querySelector("AdTitle"),y=qd(Cc,{preserveConstructors:!1}),v=e.querySelector("InLine"),_=e.querySelector("Wrapper"),w=Boolean(v);if(w===Boolean(_)){if(w)throw new Ea({code:i?"YANDEX_INLINE_AND_WRAPPER_NODE_IN_ONE_AD_SECTION":"INLINE_AND_WRAPPER_NODE_IN_ONE_AD_SECTION",details:void 0});throw new Ea({code:i?"YANDEX_NO_INLINE_OR_WRAPPER_NODE":"NO_INLINE_OR_WRAPPER_NODE",details:void 0})}if(y.sequence=Ot(e),w&&A){const e=ut(A);y.adParameters=e;const{parsed:t}=bt(e);t.abuseUrl&&(y.abuseUrl=t.abuseUrl),y.playbackAdParameters=t.playbackParameters}if(_){const t=ut(e.querySelector("VASTAdTagURI"));if(!t)throw new Ea({code:i?"YANDEX_NO_VAST_AD_TAG_URI":"NO_VAST_AD_TAG_URI",details:void 0});y.vastAdTagUri=t}if(n)for(let E=0;E<n.length;E++){const e=pt(n[E]);e&&y.mediaFiles.push(e)}if(r){const e=ut(r.querySelector("ClickThrough"));e&&(y.clickThrough=e)}if(r){const e=r.querySelectorAll("ClickTracking");for(let t=0;t<e.length;t++)Nc(y,"clickThrough",ut(e[t]))}for(let E=0;E<l.length;E++){const e=ct(l[E],"event"),t=ut(l[E]);if("progress"===e){const e=ct(l[E],"offset",""),r=Dt(e);void 0!==r?y.progressTrackings.push({urls:[t],offset:r}):xd.error({error:new Ea({code:i?"YANDEX_VAST_INCORRECT_PROGRESS_OFFSET":"VAST_INCORRECT_PROGRESS_OFFSET",details:{url:t,offsetString:e}})})}else Nc(y,e,t)}Ja(c,e=>{Nc(y,"impression",ut(e))});for(let E=0;E<u.length;E++)Nc(y,"error",ut(u[E]));for(let E=0;E<f.length;E++)y.icons.push(Pc(f[E]));if(h){const e=h.querySelectorAll('Extension[type="skipAd"]');for(let l=0;l<e.length;l++)Nc(y,"skip",ut(e[l]));const t=h.querySelector('Extension[type="skipTime"]');if(ht(t)){const e=Nt(ut(t));xd.event({name:"UsingSkipTimeExtensionInVast",probability:zd,data:{skipTime:e}}),y.skipTime=Nt(ut(t)),y.skipTime>180&&(y.skipTime=0)}const i=h.querySelector('Extension[type="controls"]');i&&(y.imhoParams=(e=>{const t=Rt({},Ic),i=e.querySelector('control[id="countdown"]');i&&(t.showCountDown="0"!==ct(i,"layout"));const r=e.querySelector('control[id="soundbtn"]');r&&(t.showSoundButton="0"!==ct(r,"layout"));const n=e.querySelector('control[id="adlabel"]');return n&&(t.showLabel="0"!==ct(n,"layout")),t})(i));const r=h.querySelector('Extension[type="isClickable"]');ht(r)&&(y.isClickable="0"!==ut(r)),h.querySelector('Extension[type="broadcastAdNotReplaced"]')&&(y.isNotReplacedBroadcastAd=!0);const n=h.querySelector('Extension[type="backgroundBlur"]');ht(n)&&(y.backgroundBlur="1"===ut(n));const o=h.querySelector('Extension[type="OutstreamEndScreen"]');o&&(y.endScreenParams=(e=>{const t={randomBackgrounds:[]},i=e.querySelector("RandomBackgrounds");if(i){const e=i.querySelectorAll("Background");for(let i=0;i<e.length;i++){const r=ct(e[i],"src");le(r)&&t.randomBackgrounds.push(r)}}return t})(o));const s=h.querySelector('Extension[type="CustomTracking"]'),a=s?s.querySelectorAll("Tracking"):[];for(let l=0;l<a.length;l++){const e=ct(a[l],"event");Nc(y,e,ut(a[l]))}const d=h.querySelector('Extension[type="isIndependentOnVideoElement"]');ht(d)&&(y.isIndependentOnVideoElement="1"===ut(d))}if(ht(p)&&(y.description=ut(p)),ht(m)&&(y.adSystem=ut(m)),ht(g)&&(y.adTitle=ut(g)),o){const e=ct(o,"skipoffset","").trim();if(""!==e){const t=Nt(e);isNaN(t)?It(new Ea({code:i?"YANDEX_INCORRECT_SKIPOFFSET_FORMAT":"INCORRECT_SKIPOFFSET_FORMAT",details:{nodeValue:e}}),y.trackingEvents.error):y.skipOffset=t}const t=o.querySelector("Duration");t&&(y.duration=Nt(ut(t)))}if(s){if(y.isNonLinear=!0,a){const e=ut(a);e&&(y.clickThrough=e)}y.mediaFiles=Es([ft(s)],Boolean)}return y},Oc=async(e,t)=>{const i=function(e){if(!e)return null;try{const t=(new DOMParser).parseFromString(e,"application/xml");return null===t.querySelector("parsererror")?t:null}catch(c_){return null}}(e),n="YANDEX"===t.vastSourceType;if(!i)throw new Ea({code:n?"YANDEX_INVALID_VAST_XML":"INVALID_VAST_XML",details:{xmlString:e}});const o=i.querySelector("VAST");if(!o){const t=n?"YANDEX_NO_AD_CUSTOM_MARKER":"NO_AD_CUSTOM_MARKER",r=n?"YANDEX_VAST_TAG_NOT_FOUND":"VAST_TAG_NOT_FOUND";throw new Ea({code:Kd.indexOf(lt(i))>-1?t:r,details:{xmlString:e}})}const s=o.getAttribute("version");if(!function(e){if(!e)return!0;if(!r(e))return!1;const t=Number(e.split(".")[0]);return!!U(t)&&t<=lc}(s))throw new Ea({code:n?"YANDEX_INCOMPATIBLE_VAST_VERSION":"INCOMPATIBLE_VAST_VERSION",details:{xmlString:e,version:s}});const a=Array.prototype.slice.call(i.querySelectorAll("VAST Ad"));if(0===a.length)return qd(sc,{preserveConstructors:!1});const d=[],l=ss(a,e=>{const i=Dc(e,{isYandexVastUrl:n}),{vastAdTagUri:r}=i;if(!r)return[i];if(t.wrapperMaxCount<=1)return xd.error({error:new Ea({code:n?"YANDEX_WRAPPER_MAX_COUNT_LIMIT":"WRAPPER_MAX_COUNT_LIMIT",details:void 0})}),[];const{adPlacementOptions:o,wrapperTimeout:s}=t,a=ha(s),l=a.promise.then(()=>(xd.error({error:new Ea({code:n?"YANDEX_WRAPPER_LOAD_TIMEOUT":"WRAPPER_LOAD_TIMEOUT",details:{wrapperTimeout:s,vastAdTagUri:r,parsingParameters:t}})}),[])),c=Bc(dt({url:r,options:o}),Vt({},t,{wrapperMaxCount:t.wrapperMaxCount-1})).then(e=>(a.clear(),d.push(e),ss(e.ads,e=>(((e,t)=>{t.mediaFiles.length&&(e.mediaFiles=[...e.mediaFiles,...t.mediaFiles]),Ja(ae(t.trackingEvents),i=>{e.trackingEvents[i]=[...e.trackingEvents[i]||[],...t.trackingEvents[i]||[]]}),e.clickThrough||(e.clickThrough=t.clickThrough),null===e.skipTime&&(e.skipTime=t.skipTime),null===e.skipOffset&&(e.skipOffset=t.skipOffset),e.isClickable=e.isClickable||t.isClickable,e.progressTrackings.push(...t.progressTrackings),isNaN(e.duration)&&(e.duration=t.duration),e.sequence===dc&&(e.sequence=t.sequence),t.isNotReplacedBroadcastAd&&(e.isNotReplacedBroadcastAd=!0),!1!==e.backgroundBlur&&"boolean"===typeof t.backgroundBlur&&(e.backgroundBlur=t.backgroundBlur),t.endScreenParams&&(e.endScreenParams?((e,t)=>{e.randomBackgrounds.push(...t.randomBackgrounds)})(e.endScreenParams,t.endScreenParams):e.endScreenParams=t.endScreenParams),e.adSystem||(e.adSystem=t.adSystem),t.isIndependentOnVideoElement&&(e.isIndependentOnVideoElement=!0)})(e,i),e)))).catch(e=>(xd.error({error:new Ea({code:n?"YANDEX_WRAPPER_LOAD_ERROR":"WRAPPER_LOAD_ERROR",details:{error:e,vastAdTagUri:r,parsingParameters:t}})}),[]));return Promise.race([l,c])}),c=Ne(await Promise.all(l)),[u,h]=De(c,e=>e.isNonLinear),p=h.length>0;return p&&u.length>0&&xd.error({error:new Ea({code:n?"YANDEX_LINEAR_AND_NONLINEAR_IN_SINGLE_VAST":"LINEAR_AND_NONLINEAR_IN_SINGLE_VAST",details:void 0})}),{ads:p?h:u,xmlString:e,children:d}},Rc=e=>{let{url:t,data:i,withCredentials:r=!0}=e;return new Promise((e,n)=>{const o=new XMLHttpRequest;o.overrideMimeType("text/xml"),o.open("GET",t),o.withCredentials=r,o.onerror=()=>n({reason:"error",error:new Error("XHR Error["+o.status+"]["+o.statusText+"]["+t+"]")}),o.onreadystatechange=(e=>{let{xhr:t,resolve:i}=e;return()=>{if(4!==t.readyState)return;const{status:e}=t;if(0===e)return;const{responseXML:r,responseText:n}=t;i({xml:r,responseText:n,responseStatus:e})}})({xhr:o,resolve:e});try{o.send(i)}catch(c_){c_.message="XHR Send Error["+c_.message+"]["+t+"]",n({reason:"error",error:c_})}})},Vc=e=>{let{thrownError:t,errorCode:i,errorDetails:r,timeoutCode:n,timeoutDetails:o}=e;const s=t;if("string"===typeof s.reason&&p(s.error)){const{error:e,reason:t}=s;if("error"===t)return new Ea(e,{code:i,details:r});if("timeout"===t)return new Ea(e,{code:n,details:o})}return new Ea(t,{code:i,details:r})},Bc=async(e,t)=>{if(!e)return Promise.reject(new Ea({code:"VAST_URL_IS_NOT_DEFINED",details:void 0}));const{vastTimeout:i}=t;xd.event({name:"VastLoadStart",probability:zd,data:{url:e,parsingParameters:t,timeout:i}});const r=Date.now(),n=await(async e=>{let{url:t,parsingParameters:i}=e;const{vastTimeout:r}=i,n=at(t);try{const{responseText:e,responseStatus:o}=await Bt({url:t,data:null,timeout:r});if("\x3c!-- Bad partner/domain --\x3e"===e)throw new Ea({code:"YANDEX_BAD_PARTNER_OR_DOMAIN_FOR_VAST_REQUEST",details:{url:t,responseText:e,responseStatus:o}});if(200!==o)throw new Ea({code:n?"YANDEX_INVALID_VAST_RESPONSE_STATUS":"INVALID_VAST_RESPONSE_STATUS",details:{url:t,responseText:e,responseStatus:o}});return Oc(e,Mt({},i))}catch(c_){const o=Boolean(c_.code),s="AD_FOX"===i.vastSourceType;let a;a=o?c_.code:s?"ADFOX_VAST_LOAD_ERROR":n?"YANDEX_VAST_LOAD_ERROR":"VAST_LOAD_ERROR";const d=Vc({thrownError:c_,errorCode:a,errorDetails:void 0,timeoutCode:n?"YANDEX_VAST_LOAD_TIMEOUT":"VAST_LOAD_TIMEOUT",timeoutDetails:{vastTimeout:r,url:t}});return Promise.reject(d)}})({url:e,parsingParameters:t});return xd.values({name:"VastLoadSuccess",probability:zd,data:{url:e,timeout:t.vastTimeout,vast:n},labels:{},values:{timeSpent:Date.now()-r}}),n},Mc={bids:[],creatives:{},creativeUrls:{}},xc=100,Lc=(e,t)=>{for(let i=0;i<e.length;i++)if(!t(e[i],i,e))return!1;return!0};class Fc extends Zs{constructor(e,t,i){super(),this.adFoxParameters=e,this.adBreak=t,this.win=i,this.requestPromise=void 0,this.onFetchBidsStart=new $s,this.postMessageRequestId=Ba+"_"+N(16),this.addDestroyHandler(()=>{this.onFetchBidsStart.removeAll()}),this.requestPromise=new Promise(e=>{this.addDestroyHandler(e)}),this.requestBids()}requestBids(){xd.event({name:"HBRequestStart",data:this.getDataForLogs()}),this.subscribeHBMessages(),this.sendBidsRequest().then(async e=>{let{timeout:t}=e;xd.event({name:"HBFetchBidsStart",data:Ht({},this.getDataForLogs(),{timeout:t})});const{clear:i,promise:r}=ha(t);throw this.addDestroyHandler(i),await r,new Ea({code:"HB_FETCH_BIDS_TIMEOUT",details:Ht({},this.getDataForLogs(),{timeout:t})})}).catch(e=>{xd.errorToStats(e),this.destroy(Mc)})}subscribeHBMessages(){this.addDestroyHandler(d(this.win,"message",e=>{const{data:t,source:i}=e;if(!p(t)||!p(i))return;const{id:r,methodName:n}=t;if(r===this.postMessageRequestId)switch(n){case"FetchBidsStart":this.handleFetchBidsStartEventData(t.data);break;case"FetchBidsComplete":this.handleFetchBidsCompleteEventData(t.data);break;case"FetchBids":break;default:xd.error({error:new Ea({code:"HB_MESSAGE_UNKNOWN_METHOD",details:Ht({},this.getDataForLogs(),{methodName:n})})})}}))}handleFetchBidsStartEventData(e){if(!p(e))return void xd.error({error:new Ea({code:"HB_MESSAGE_NON_OBJECT_DATA",details:this.getDataForLogs()})});const{timeout:t}=e;U(t)?this.onFetchBidsStart.dispatch({timeout:t}):xd.error({error:new Ea({code:"HB_MESSAGE_INVALID_START_TIMEOUT",details:Ht({},this.getDataForLogs(),{timeout:t})})})}handleFetchBidsCompleteEventData(e){try{const{bids:t,creatives:i,creativeUrls:n,warnings:o}=function(e,t){const i=[];if(!Array.isArray(e))throw new Ea({code:"HB_NON_ARRAY_BIDS_DATA",details:Ut({},t,{fetchedBids:e})});e.length>1&&i.push(new Ea({code:"HB_EXTRA_BIDS_DATA",details:Ut({},t,{fetchedBids:e})}));const[n]=e;if(!p(n))throw new Ea({code:"HB_NON_OBJECT_BIDS_DATA",details:Ut({},t,{fetchedBids:e})});const{bids:o,creatives:s,creativeUrls:a}=n;if(!Array.isArray(o)||!Lc(o,p))throw new Ea({code:"HB_INVALID_BIDS_OBJECTS",details:Ut({},t,{fetchedBids:e})});if(!p(s)||!Lc(Pt(s),r))throw new Ea({code:"HB_BIDS_INVALID_CREATIVES",details:Ut({},t,{fetchedBids:e})});if(!p(a)||!Lc(Pt(a),r))throw new Ea({code:"HB_BIDS_INVALID_CREATIVE_URLS",details:Ut({},t,{fetchedBids:e})});return{bids:o,creatives:s,creativeUrls:a,warnings:i}}(e,this.getDataForLogs()),s={bids:t,creatives:i,creativeUrls:n};Lt(o),xd.event({name:"HBFetchBidsComplete",data:Ht({},this.getDataForLogs(),{fetchedBidsObject:s})}),this.destroy(s)}catch(c_){xd.errorToStats(c_)}}sendBidsRequest(){const e=fe(this.win),t={id:this.postMessageRequestId,methodName:"FetchBids",data:[{containerId:this.adFoxParameters.containerId,adBreakType:this.adBreak.adType}]};for(const n of e)Ft(Ht({win:n},t));const{promise:i,clear:r}=ha(xc);return this.addDestroyHandler(r),new Promise((e,t)=>{i.then(()=>{const{promise:e,teardown:t}=function(e){let t;const i=Math.random(),r=new Promise(r=>{t=d(e,"message",e=>{let{data:n}=e;n===i&&(t(),r())}),e.postMessage(i,"*")});return{teardown:t,promise:r}}(this.win);return this.addDestroyHandler(t),e}).then(()=>{t(new Ea({code:"HB_HANDSHAKE_TIMEOUT",details:this.getDataForLogs()}))}).catch(t);const n=xt(t=>{r(),e(t)},e=>{xd.error({error:new Ea({code:"HB_START_MULTIPLE_TIMES",details:Ht({},this.getDataForLogs(),{data:e})})})});this.addDestroyHandler(this.onFetchBidsStart.add(n))})}getDataForLogs(){return{adBreak:this.adBreak,adFoxParameters:this.adFoxParameters,postMessageRequestId:this.postMessageRequestId}}}const Uc=["yandex.ru","yandex.com","yandex.net","yandex.com.tr","yandex.ua","yandex.by","yandex.kz","yandex.st","yandex-team.ru","yandex-team.com","yandex-team.com.ua","yandex-team.net.ua","yandex-team.com.tr","ya.ru","yandexsport.ru"],Hc=i(40),zc=["script","style","noscript","yatag","template","iframe","svg"];class Gc{constructor(e,t,i){this.name=e,this.textContentLength=t,this.resultLength=i}}const Wc=/[^\s\\]/,jc="yandex.ru yandex.com yandex.ua yandex.by yandex.kz yandex.com.tr zen.yandex.ru zen.yandex.com",Yc=5e3;let qc,Kc="";ni();const Xc=function(e){return void 0===e&&(e=window),e.devicePixelRatio||e.screen.deviceXDPI&&e.screen.deviceXDPI/e.screen.logicalXDPI||1},Qc=new RegExp(["box-flex","box-flex-group","column-count","fill-opacity","flex","flex-grow","flex-positive","flex-shrink","flex-negative","font-weight","line-height","opacity","order","z-index","zoom"].join("|"),"i"),Jc=(e,t,i,r)=>{p(t)?(r=Boolean(i),J(t,(t,i)=>{li(e,i,t,r)})):li(e,t,i,r)},Zc=1e4,$c=function(e){return void 0===e&&(e=window),"BackCompat"===e.document.compatMode};var eu,tu;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.ETHERNET=1]="ETHERNET",e[e.WIFI=2]="WIFI",e[e.CELL_2G=3]="CELL_2G",e[e.CELL_3G=4]="CELL_3G"}(eu||(eu={})),function(e){e.BLUETOOTH="bluetooth",e.CELLULAR="cellular",e.ETHERNET="ethernet",e.MIXED="mixed",e.NONE="none",e.OTHER="other",e.UNKNOWN="unknown",e.WIFI="wifi",e.WIMAX="wimax"}(tu||(tu={}));const iu=.5,ru=e=>Math.max(0,Math.round(e)),nu=e=>Math.round(e);class ou{constructor(e,t){if(void 0===t&&(t={}),this.isFirstScreen=void 0,this.size=void 0,this.config=void 0,this.element=void 0,this.winSize=void 0,this.MIN_VISIBLE_AREA=void 0,this.MIN_VISIBLE_AREA=iu,e){this.config={};const t=function(){const e=window;let t=e.innerWidth,i=e.innerHeight;if(!t){const r=e.document.documentElement;t=r.clientWidth,i=r.clientHeight}return{width:t,height:i}}();this.set("win_width",ru(t.width)),this.set("win_height",ru(t.height)),this.set("pixel_ratio",Xc()),this.set("bandwidth",function(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:i={}}=t;if("number"===typeof i.downlink)return i.downlink;if("number"===typeof i.downlinkMax)return i.downlinkMax;if("string"===typeof i.type||"number"===typeof i.type)switch(i.type){case tu.BLUETOOTH:return 3;case eu.CELL_2G:return.384;case eu.CELL_3G:case tu.CELLULAR:return 2;case tu.WIMAX:return 37;case tu.NONE:return 0;case eu.ETHERNET:case tu.ETHERNET:case eu.WIFI:case tu.WIFI:case tu.MIXED:return 10;case eu.UNKNOWN:case tu.UNKNOWN:case tu.OTHER:}return-1}());const i=$c();i&&this.set("quirks",i);const r=function(e){const t=ci(e),i=ui({},t.max.rect,t.max.inner,{isFixed:t.isFixed});return i.height>=Zc&&(i.height=0,i.top=i.bottom=t.origin.rect.top),i}(e);this.set("w",r.width),this.set("h",r.height);const n=ui({},gs(e),ai(e));this.setLayout(n),this.setVisible(n,t),this.element=e,this.size=n,this.winSize=t}else{if(!t)throw new Error("wrong LayoutConfig constructor params");this.config=t}}set(e,t){this.config[e]=t}toString(){return JSON.stringify(this.config)}setLayout(e){const t={left:void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,top:void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset};this.set("width",ru(e.width)),this.set("height",ru(e.height)),this.set("left",nu(e.left+t.left)),this.set("top",nu(e.top+t.top))}setVisible(e,t){const{width:i,height:r,top:n,left:o,right:s,bottom:a}=e;let d=1;const l=Math.max(Math.min(s,t.width)-Math.max(o,0),0),c=Math.max(Math.min(a,t.height)-Math.max(n,0),0);i?d*=l/i:(o<0||s>t.width)&&(d=0),r?d*=c/r:(n<0||a>t.height)&&(d=0),this.set("visible",d>=this.MIN_VISIBLE_AREA?1:0),this.isFirstScreen=0===i&&0===r&&0===n&&0===o&&0===s&&0===a||this.config.top<t.height}}let su=0;const au=()=>su,du=(e,t)=>{const i=e.toString();return"0000".substr(0,t-i.length)+i},lu=e=>{return e.getFullYear()+"-"+du(e.getMonth()+1,2)+"-"+du(e.getDate(),2)+"T"+du(e.getHours(),2)+":"+du(e.getMinutes(),2)+":"+du(e.getSeconds(),2)+"."+du(e.getMilliseconds(),3)+(e=>{const t=-e.getTimezoneOffset();return""+(t>=0?"+":"-")+du(Math.floor(Math.abs(t)/60),2)+":"+du(Math.abs(t)%60,2)})(e)},cu=()=>Ue(1,4294967295),uu=(e,t)=>{let i=[];try{i=e.cookie?e.cookie.split("; "):[]}catch(u_){}const r=/(%[0-9A-Z]{2})+/g;let n;for(let o=0;o<i.length;o++){const e=i[o].split("="),s=e.slice(1).join("=");try{const i=e[0].replace(r,decodeURIComponent);if(s.replace(r,decodeURIComponent),t===i){n=decodeURIComponent(s);break}}catch(u_){return}}return n};let hu=0;const pu=e=>{let{win:t,date:i=new Date,pr1:r,pr:n,testtag:o,isTurbo:s=ri(t),addsSsSkipToken:a=!1,layoutConfig:d=new ou,cookies:l,loaderVer:c,bundleVer:u,adSessionId:h,location:p,extid_loader:f,extid_tag_loader:A}=e;d.set("req_no",(()=>hu++)()),d.set("ad_no",hi());const m=mi({},(e=>{let{win:t,pr:i,date:r=new Date,pr1:n=cu(),location:o,extid_loader:s,extid_tag_loader:a}=e;const d=ni(t)&&t.context&&t.context.sourceUrl||void 0,l=d||t.document.referrer;return{dl:d||o||pi(t),date:lu(r),pd:r.getDate(),pdh:t.screen.height,pdw:t.screen.width,pr1:n,pr:i,prr:l,pv:r.getHours(),pw:r.getDay(),extid_loader:void 0===s?fi(t):s,extid_tag_loader:void 0===a?Ai(t):a}})({win:t,date:i,pr1:r,pr:n,location:p,extid_loader:f,extid_tag_loader:A}),{ylv:"0."+(c||"1"),ybv:"0."+(u||"1"),ytt:o?o.toString():"","is-turbo":Number(s),"skip-token":oi(),"ad-session-id":h||bl(),"layout-config":String(d),"enable-flat-highlight":1},l);return a&&(m["ss-skip-token-length"]=20,m["allow-repeat-ads"]=0),m},fu=2048,Au=[/avito/],mu=["slide","visibleAfterInit","insertAfter","insertPosition","stick","stickTo","stickyColorScheme","replayMode","preload"],gu="ads.adfox.ru";class yu extends Zs{constructor(e){super(),this.params=e,this.loadVastPromise=void 0,this.loadingTimeoutPromise=void 0;const{promise:t,clear:i}=ha(this.params.adBreak.vastTimeout);this.loadingTimeoutPromise=t,this.addDestroyHandler(i),this.loadVastPromise=this.processAdFoxVastLoading().catch(e=>{throw xd.errorToStats(e),this.destroy(),e})}async processAdFoxVastLoading(){const{adConfig:e,adBreak:t,adPlacementOptions:i}=this.params;let{adFoxParameters:r}=e;const{bids:n,containerId:o}=r;if(!n&&o){const i=new Fc(Ti({},r,{containerId:o}),t,window);this.addDestroyHandler(()=>{i.destroy(Mc)});const n=await Promise.race([i.requestPromise,this.loadingTimeoutPromise.then(()=>{throw new Ea({code:"HB_VAST_LOAD_TIMEOUT",details:{adConfig:e,adBreak:t,timeout:t.vastTimeout}})})]);r=Ti({},r,n)}const s=await Promise.race([bi(r,i),this.loadingTimeoutPromise.then(()=>{throw new Ea({code:"ADFOX_AD_DATA_LOADING_TIMEOUT",details:{adConfig:e,adBreak:t,adFoxParameters:r}})})]),a=await this.processLoadingAdFoxCreative(r,s);return xd.event({name:"AdFoxVastLoaded",data:{adConfig:e,adBreak:t}}),this.destroy(),a}processLoadingAdFoxCreative(e,t){let{campaignId:i,vastBase64:r}=t;const{adConfig:n,adBreak:o}=this.params,{creatives:s={},creativeUrls:a={}}=e;if(r)return this.processBase64Vast(r).catch(e=>{throw new Ea({code:"ADFOX_VAST_BASE64_LOAD_ERROR",details:{adConfig:n,adBreak:o,vastBase64:r,error:e}})});const d=s[i],l=a[i];if(!d&&!l)throw new Ea({code:"HB_CREATIVE_IS_NOT_FOUND",details:{adConfig:n,adBreak:o,adFoxParameters:e,campaignId:i}});return d?this.processBase64Vast(d).catch(e=>{throw new Ea({code:"HB_VAST_BASE64_LOAD_ERROR",details:{adConfig:n,adBreak:o,vastBase64:d,error:e}})}):Bc(l,lr({commonParameters:o,isAdFox:!0,adPlacementOptions:_a})).catch(e=>{throw new Ea({code:"HB_VAST_URL_LOAD_ERROR",details:{adConfig:n,adBreak:o,vastUrl:l,error:e}})})}processBase64Vast(e){let t;try{t=j(e)}catch(c_){throw new Ea({code:"ADFOX_VAST_BASE64_PARSING_ERROR",details:{error:c_}})}return Oc(t,lr({commonParameters:this.params.adBreak,isAdFox:!0,adPlacementOptions:_a}))}}class vu{static addUnit(e){Array.isArray(ic.videoAd.skipTokens)?-1===ic.videoAd.skipTokens.indexOf(e)&&ic.videoAd.skipTokens.push(e):ic.videoAd.skipTokens=[e]}static toBase64(){const e=vu.getUnits();return e.length?G(ss(e,e=>"yabs."+e).join("\n")):void 0}static getUnits(){return Array.isArray(ic.videoAd.skipTokens)?ic.videoAd.skipTokens:[]}}const _u=e=>{let{additionalParams:t,videoContentId:i,videoContentName:r,videoPublisherId:n,videoPublisherName:o,videoGenreId:s,videoGenreName:a,musicArtistId:d,musicGenreId:l,musicGenreName:c}=e;return Ii({},ki(t),{"video-content-id":i,"video-content-name":r,"video-publisher-id":n,"video-publisher-name":o,"video-genre-id":Ci(s),"video-genre-name":Ci(a),music_artist_id:d,"music-genre":l,"music-genre-name":c,"ad-session-id":Tl()})},wu=e=>{let{adConfig:t,adBreak:i,random:r,win:n}=e;const{targetRef:o,width:s,height:a,tagsList:d,extParam:l,charset:c,distrId:u}=t,h=n.document.referrer,p=D(n);let f;return o?(f=o,xd.event({name:"UsingTargetRefApiParameter",data:{adConfig:t},probability:zd})):"about:blank"===p?(f=h,xd.event({name:"UsingTargetRefAboutBlankFallback",data:{adConfig:t},probability:zd})):f=p,Ni({},_u(t),{"repeat-number":Pi(i)?String(i.repeatNumber):void 0,wtime:Pi(i)?String(Math.floor(i.timeOffset)):void 0,"target-ref":f,"page-ref":h,"video-width":s,"video-height":a,"tags-list":Ci(d),"ext-param":l,charset:c||"UTF-8","video-session-id":i.sessionId,"skip-token":vu.toBase64(),"distr-id":u,"enable-page-options":"65536",rnd:String(r)})},Eu=Bl.OldMotionVpaidLoader+".js",Su="https://yastatic.net/awaps-ad-sdk-js/1_0/vpaid-motion.js",bu=""+Je()+Eu,Tu=[Su,"https://yastatic.net/pcode/media/vpaid-motion.js","https://an.yandex.ru/system/video-ads-sdk/vpaid-motion.js",bu],Cu="Yabs Ad Server",ku=[Cu,"AWAPS","Yandex Ad Server","Yandex Advertising Partner"];let Iu;!function(e){e.js="js",e.video="video"}(Iu||(Iu={}));const Pu=function(e){return void 0===e&&(e=window),/Mobi|Android/i.test(e.navigator.userAgent)},Nu=Pu(),Du={PAGEURL:encodeURIComponent(Ae(document).location),Y_DEVICE_TYPE:Nu?"mobile":"desktop",Y_AD_SESSION_ID:bl()},Ou=["clickThrough","close","impression","mute","skip","unmute"],Ru=e=>"VastTracking_"+e,Vu={},Bu=100,Mu=0,xu=5,Lu="https://yastatic.net/awaps-ad-sdk-js/1_0/"+(Bl.VpaidPlayerLoader+".js"),Fu=["application/javascript","application/x-javascript"],Uu="VAS",Hu=e=>be(String(e%Math.pow(10,4)),4,"0"),zu=()=>be(Date.now().toString().slice(0,10),10,"0"),Gu=Va&&Va.vsid||(void 0===Wu&&(Wu=za),[N(44),Uu,Hu(Wu),zu()].join("x"));var Wu;const ju=e=>{const{protocol:t}=$(e);return"blob:"===t?e:at(e)?re(e,{[nl]:Ba,vsid:Gu}):e},Yu=e=>Ui({},e,{url:ju(e.url)});let qu;!function(e){e.Unsafe="Unsafe",e.OnlyYandexCreatives="OnlyYandexCreatives"}(qu||(qu={}));const Ku=document.createElement("video"),Xu="function"===typeof Ku.load,Qu=Xu?function(e,t){return void 0===t&&(t=Ku),Boolean(t.canPlayType(e).replace(/no/,""))}:()=>!1,Ju=["application/vnd.apple.mpegurl","application/x-mpegurl"],Zu=window.URL||window.webkitURL||{},$u="function"===typeof Zu.createObjectURL&&"function"===typeof Zu.revokeObjectURL,eh=ns(),th=function(e){return void 0===e&&(e=window),g(e).toLowerCase().indexOf("tizen")>-1},ih=function(e){void 0===e&&(e=window);const t=ji(e);return 2===t.major&&3===t.minor},rh=th(),nh=(ih(),function(e){void 0===e&&(e=window);const t=ji(e);2===t.major&&t.minor}(),!rh&&-1===eh&&!fs),oh=e=>Wi(e)&&fs||nh,sh=e=>Qu(e)&&(oh(e)||(e=>$u&&!Wi(e))(e)),ah=(Js({propertyName:"YANDEX_VIDEO_PRELOADER_GLOBAL_CALLBACK_PROPERTY_NAME",win:window}),window.URL||window.webkitURL||{});class dh{constructor(e){this.readyPromise=void 0,this.ready=!1,this.video=void 0,this.xhr=void 0,this.blobUrl=void 0;const{type:t}=e;if(!sh(t))return void(this.readyPromise=Promise.reject(new Error(t+" cannot be preloaded")));const i=oh(t)?this.preloadWithVideoTag(e):this.preloadToBlob(e);this.readyPromise=i.then(t=>(this.ready=!0,t||e))}isReady(){return this.ready}destroy(){void 0!==this.video&&(this.video.src="",this.video=void 0),void 0!==this.xhr&&(this.xhr.abort(),this.xhr=void 0),r(this.blobUrl)&&ah.revokeObjectURL(this.blobUrl)}preloadWithVideoTag(e){const t=document.createElement("video");return this.video=t,t.preload="auto",new Promise((i,r)=>{t.oncanplaythrough=()=>i(e),t.onerror=r,t.src=e.url,t.load()})}async preloadToBlob(e){const{response:t}=await Le({method:"GET",url:e.url,responseType:"blob",onBeforeSend:e=>this.xhr=e});return{type:e.type,width:e.width,height:e.height,bitrate:e.bitrate,minBitrate:e.minBitrate,maxBitrate:e.maxBitrate,url:ah.createObjectURL(t)}}}const lh=async e=>{let{src:t,win:i=window}=e;const r=Li(t);if(Oi(t))return await Xe({src:bu,win:i}),i.getVPAIDAd;if(!r)return await Xe({src:t,win:i}),i.getVPAIDAd;const{getVPAIDAd:n}=await function(e){let{win:t=window}=void 0===e?{}:e;return new Promise((e,i)=>{$e({moduleName:"InteractiveViewer",version:void 0,onSuccess:e,onError:i,win:t})})}({win:i});return i.getVPAIDAd=n,n},ch=(e,t)=>e+"_"+t;class uh extends Zs{constructor(e){let{win:t,onReport:i}=e;super();const r=t;if(!r.ReportingObserver)return;const n=new r.ReportingObserver(e=>{i({reportSourceEvent:"callback",reports:e,records:n.takeRecords()})},{buffered:!0});n.observe();const o=n.takeRecords();o.length&&i({reportSourceEvent:"buffered",reports:[],records:o}),this.addDestroyHandler(d(t,"beforeunload",()=>{const e=n.takeRecords();e.length>0&&i({reportSourceEvent:"beforeunload",reports:[],records:e})})),this.addDestroyHandler(()=>{const e=n.takeRecords();e.length>0&&i({reportSourceEvent:"destroy",reports:[],records:e}),n.disconnect()})}}const hh=1e3,ph=1,fh=1.2,Ah="video/webm";const mh="video/mp4",gh=.001,yh=["bitrate","minBitrate","maxBitrate","width","height"],vh=9007199254740991,_h=(e=>{const t=tr(e);return!!t&&Boolean(F(()=>t.isTypeSupported('video/webm; codecs="vorbis,vp8"')))})(window),wh=tr(),Eh=Qu("video/webm"),Sh=_h&&Eh,bh=wh&&o(wh),Th=h(Qa),Ch=window.AbortController&&window.fetch&&o(AbortController)&&o(fetch),kh=bh&&Ch,Ih=e=>!!kh&&(-1!==e.type.toLowerCase().indexOf(Ah)&&(!!Sh&&!!Th));let Ph;!function(e){e.NORMAL="normal",e.THUMBNAIL="thumbnail",e.FULLSCREEN="fullscreen"}(Ph||(Ph={}));class Nh{constructor(e,t,i){this.parsedParams=void 0,this.contentType=void 0,this._promise=void 0,this._isPreloaded=!1,this._vpaidWindow=void 0,this.preloaders=[],this.getMediaFiles=void 0,this.getJSMediaFile=void 0,this.getVastAd=void 0,this.parsedParams=function(e){const{videoSlot:t,viewMode:i=Ph.NORMAL,preloadJS:r=!0,preloadVideo:n=!0}=e,{width:o=t.clientWidth,height:s=t.clientHeight}=e,a=gt(e.desiredBitrate);let{preloadTimeout:d}=e;return("number"!==typeof d||d>gc)&&(d=gc),{preloadTimeout:d,width:o,height:s,desiredBitrate:a,viewMode:i,videoSlot:t,preloadJS:r,preloadVideo:n}}(e),this.contentType=t,this.getMediaFiles=i.getMediaFiles,this.getJSMediaFile=i.getJSMediaFile,this.getVastAd=i.getVastAd}get isPreloaded(){return this._isPreloaded}get promise(){return this._promise?this._promise:Promise.resolve()}get vpaidWindow(){return this._vpaidWindow}destroy(e){this._promise&&xd.event({name:"PreloadCancelled",data:{reason:e},probability:zd}),this._promise=void 0,this._vpaidWindow=void 0,Ja(this.preloaders,e=>e.destroy()),this.preloaders.length=0}async preload(){this._promise=this._preload(),await this._promise,this._isPreloaded=!0}async _preload(){const{preloadJS:e,preloadVideo:t}=this.parsedParams;try{e&&this.contentType===Iu.js?await this._preloadVpaidCreative(this.parsedParams):t&&this.contentType===Iu.video&&await this._preloadVideoFile(this.parsedParams)}catch(c_){Ja(this.preloaders,e=>e.destroy()),this.preloaders.length=0,this._logError(c_,"CANNOT_PRELOAD_ERROR")}}async _preloadVpaidCreative(e){const t=function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,["preloadTimeout"]),i=this.getJSMediaFile();if(!i)return;const r=nr(document.body);if(!r)return;if(!r.contentWindow)return void k(r);const n=r.contentWindow;this.preloaders.push({readyPromise:Promise.resolve(),isReady:()=>!0,destroy:Ki(n,(t,i,r)=>{xd.error({error:Yi({scope:"PRELOADING_IFRAME",errorType:i,error:t,details:{errorDetails:r,desiredBitrate:e.desiredBitrate,width:e.width,height:e.height,vastAd:this.getVastAd()}})})})}),this.preloaders.push({readyPromise:Promise.resolve(),isReady:()=>!0,destroy:()=>k(r)});try{await lh({src:i.url,win:n})}catch(c_){return void this._logError(c_,"CANNOT_PRELOAD_VPAID_CREATIVE_MODULE_ERROR")}if(this._vpaidWindow=n,!n.Ya||"function"!==typeof n.Ya.preloadVPAIDAd)return;const o=n.Ya.preloadVPAIDAd(sr({},t,{creativeData:{AdParameters:this.getVastAd().adParameters}}));let s;this.preloaders.push(o);try{s=await o.readyPromise}catch(c_){return void this._logError(c_,"CANNOT_PRELOAD_VPAID_CREATIVE_ERROR")}this.getVastAd().adParameters=s.AdParameters}async _preloadVideoFile(e){let{width:t,height:i,desiredBitrate:r}=e;const n=this.getMediaFiles(),{prioritisedMediaFile:o}=ir(n,{container:{width:t,height:i},desiredBitrate:r});if(!o)return;const s=Yu(o),a=new dh(s);let d;this.preloaders.push(a);try{d=await a.readyPromise}catch(c_){return void this._logError(c_,"CANNOT_PRELOAD_VIDEO_FILE_ERROR")}this.getVastAd().mediaFiles=[d]}_logError(e,t){or(e),xd.error({error:new Ea(e,{code:t})})}}class Dh{constructor(){this.src=void 0,this.type=void 0,this.x=NaN,this.y=NaN,this.width=NaN,this.height=NaN}static fromVastIcon(e){const t=new Dh;return t.src=e.src,t.type=e.program,t.x=e.xPosition,t.y=e.yPosition,t.width=e.width,t.height=e.height,t}}const Oh=["image/jpeg","image/gif","image/png"];class Rh{get contentType(){return this.getJSMediaFile()?Iu.js:Iu.video}constructor(e,t,i){this.adBreak=e,this.vastAd=t,this.adConfig=i,this.icons=void 0,this.imageSources=void 0,this.preloadingController=void 0,this.isTrackingEventsEnabled=!0,this.duration=0,this.getMediaFiles=()=>Hi(this.vastAd.mediaFiles,this.adConfig.secureMode),this.getJSMediaFile=()=>zi(this.vastAd.mediaFiles,this.adConfig.secureMode),this.imageSources=Es(this.getMediaFiles(),e=>Oh.indexOf(e.type)>-1).sort((e,t)=>Oh.indexOf(e.type)-Oh.indexOf(t.type)),this.icons=ss(t.icons,e=>Dh.fromVastIcon(e)),isNaN(t.duration)||(this.duration=t.duration)}trackError(e){It(e,this.vastAd.trackingEvents.error)}removeTrackingEvents(){this.isTrackingEventsEnabled=!1}trackEvent(e,t,i){if(!this.isTrackingEventsEnabled)return Ct("eventName ("+e+") was NOT tracked in MediaAd (disabled with method removeTrackingEvents)"),[];const r=!p(t);r&&(t=_a);let{visibility:n,size:o,screenSize:s,relativeSizeRatio:a,devicePixelRatio:d,downlink:l,videoContentSize:c,videoPixelRatio:u,videoFramesInfo:h,videoSrc:f,videoCurrentSrc:A,videoMuted:m,videoVolume:g,bufferingTime:y,currentTime:v,bufferingTimeRatio:_,remainingBufferedTime:w}=t;const{adBreakType:E,adFormatType:S}=t;!r&&"number"===typeof n&&p(o)&&"number"===typeof a&&p(s)&&"number"===typeof d&&"number"===typeof l&&p(c)&&"number"===typeof u&&p(h)&&"number"===typeof y&&"number"===typeof v&&"number"===typeof _&&"number"===typeof w&&"boolean"===typeof m&&"number"===typeof g||(xd.error({error:new Ea({code:"WRONG_ARGUMENTS_IN_MEDIA_AD_TRACK_EVENT",details:{visibility:n,stringVisibility:String(n),size:o,stringSize:String(o),screenSize:s,stringScreenSize:String(s),relativeSizeRatio:a,stringRelativeSizeRatio:String(a),devicePixelRatio:d,stringDevicePixelRatio:String(d),downlink:l,stringDownlink:String(l),videoContentSize:c,stringVideoContentSize:String(c),videoPixelRatio:u,stringVideoPixelRatio:String(u),videoFramesInfo:h,stringVideoFramesInfo:String(h),videoMuted:m,stringVideoMuted:String(m),videoVolume:g,stringVideoVolume:String(g),bufferingTime:y,stringBufferingTime:String(y),currentTime:v,stringCurrentTime:String(v),bufferingTimeRatio:_,stringBufferingTimeRatio:String(_),remainingBufferedTime:w,stringRemainingBufferedTime:String(w)}})}),"number"!==typeof n&&(n=_a.visibility),p(o)||(o=_a.size),"number"!==typeof a&&(a=_a.relativeSizeRatio),p(s)||(s=_a.screenSize),"number"!==typeof d&&(d=_a.devicePixelRatio),"number"!==typeof l&&(l=_a.downlink),p(c)||(c=_a.videoContentSize),"number"!==typeof u&&(u=_a.videoPixelRatio),p(h)||(h=_a.videoFramesInfo),"string"!==typeof f&&(f=_a.videoSrc),"string"!==typeof A&&(A=_a.videoCurrentSrc),"boolean"!==typeof m&&(m=_a.videoMuted),"number"!==typeof g&&(g=_a.videoVolume),"number"!==typeof y&&(y=_a.bufferingTime),"number"!==typeof v&&(v=_a.currentTime),"number"!==typeof _&&(_=_a.bufferingTimeRatio),"number"!==typeof w&&(w=_a.remainingBufferedTime)),Ct("Track event ==> ",e);const b=this.vastAd.trackingEvents[e],T=Ee(o,e=>Math.round(e)),C=Ee(s,e=>Math.round(e)),k=Ee(c,e=>Math.round(e));return xi({eventName:e,trackingEventDetails:i,trackingUrls:Array.isArray(b)?b:[],options:{visibility:n,size:T,relativeSizeRatio:a,screenSize:C,devicePixelRatio:d,downlink:l,videoContentSize:k,videoPixelRatio:u,videoFramesInfo:h,videoSrc:f,videoCurrentSrc:A,videoMuted:m,videoVolume:g,bufferingTime:y,currentTime:v,bufferingTimeRatio:_,remainingBufferedTime:w,adBreakType:E,adFormatType:S}})}hasMediaFiles(){const e=this.getMediaFiles();return Boolean(e&&e.length>0)}isNotReplacedBroadcastAd(){return this.vastAd.isNotReplacedBroadcastAd}cancelPreloading(e){this.preloadingController&&(this.preloadingController.destroy(e),this.preloadingController=void 0)}isPreloaded(){return!!this.preloadingController&&this.preloadingController.isPreloaded}async preload(e){this.preloadingController||(this.preloadingController=new Nh(e,this.contentType,{getMediaFiles:this.getMediaFiles,getJSMediaFile:this.getJSMediaFile,getVastAd:()=>this.vastAd}),await this.preloadingController.preload()),this.preloadingController&&await this.preloadingController.promise}getIfIsRequiredHtmlControls(){const{isNonLinear:e,adSystem:t}=this.vastAd;return t===Cu||e}getIsIndependentOnVideoElement(){if(this.vastAd.isNonLinear)return!0;const e=this.getJSMediaFile();if(!e)return!1;if(Oi(e.url)&&at(e.url)){if(void 0===this.vastAd.isIndependentOnVideoElement)return xd.event({name:"MotionWithoutExtensionIsIndependentOnVideoElement",probability:zd,data:void 0}),!0;if(!this.vastAd.isIndependentOnVideoElement)return xd.event({name:"MotionWithExtensionIsIndependentOnVideoElementFalseValue",probability:zd,data:void 0}),!0}return void 0!==this.vastAd.isIndependentOnVideoElement&&this.vastAd.isIndependentOnVideoElement}getIsYandexCreative(){return e=this.vastAd,Be(ku,e.adSystem);var e}getPreloadVpaidWindow(){if(this.preloadingController)return this.preloadingController.vpaidWindow}getDuration(){return this.duration}actualizeDuration(e){this.duration=e}getVpaidStartTimeout(){return this.adBreak.vpaidTimeout}getVideoStartTimeout(){return this.adBreak.videoTimeout}getBufferFullTimeout(){return this.adBreak.bufferFullTimeout}getBufferEmptyLimit(){return this.adBreak.bufferEmptyLimit}getDescription(){return this.vastAd.description}shouldShowGuiForVpaid(){return Boolean(this.vastAd.imhoParams)}isClickable(){return this.vastAd.isClickable&&Boolean(this.vastAd.clickThrough)}getTitle(){const{vastAd:{imhoParams:e},adBreak:t}=this;return e&&!e.showLabel?"":t.title}getSkipDelayParameters(){return function(e){let{vastAd:t,isPreactSkin:i,secureMode:r}=e;const{skipTime:n,skipOffset:o,playbackAdParameters:s,mediaFiles:a}=t;if(i){if(s&&Y(s.skipDelay))return{skipDelay:s.skipDelay,eventName:void 0};if(Gi(a,r))return{skipDelay:xu,eventName:"UsingDefaultInteractiveViewerSkipDelay"}}return Y(o)?Y(n)?{skipDelay:n,eventName:"UsingSkipTimeExtensionValue"}:{skipDelay:o,eventName:void 0}:{skipDelay:Mu,eventName:void 0}}({vastAd:this.vastAd,isPreactSkin:Boolean(mc),secureMode:this.adConfig.secureMode})}}class Vh{constructor(e){this.mediaAds=void 0,this.mediaAds=e.sort((e,t)=>{const i=e.vastAd.sequence,r=t.vastAd.sequence;return i===dc?1:r===dc?-1:i-r})}getDuration(){return ca(this.mediaAds,(e,t)=>e+t.getDuration(),0)}getFirstMediaAd(){return this.mediaAds[0]}hasMedia(){return Es(this.mediaAds,e=>e.hasMediaFiles()).length>0}hasFilteredOutMediaFiles(){return nc(this.mediaAds,e=>e.vastAd.mediaFiles.length!==e.getMediaFiles().length)}preload(e){return Ja(this.mediaAds,t=>{t.preload(e)}),e=>{Ja(this.mediaAds,t=>{t.cancelPreloading(e)})}}}const Bh=e=>{try{return"display"in si(e)}catch(u_){return!1}},Mh=!0,xh=!0,Lh=!1,Fh=2;class Uh extends Zs{constructor(e,t){let{initialVisibility:i=Lh,threshold:r=oa,considerDocumentVisibility:n=Mh,numberOfMeasurementSteps:o=Fh}=void 0===t?{}:t;super(),this.element=e,this.totalVisibilityValueSignal=void 0,this.totalVisibilityRatioValueSignal=void 0,this.elementVisibilityRatioValueSignal=void 0,this.documentVisibilityValueSignal=new ea(xh),this.threshold=void 0,this.recalculateVisibility=()=>{if(this.isDestroyed)return;const e=E(this.element);this.elementVisibilityRatioValueSignal.dispatch(e)},this.refreshTotalVisibility=()=>{const e=this.elementVisibilityRatioValueSignal.getValue(),t=this.documentVisibilityValueSignal.getValue()?e:0;this.totalVisibilityValueSignal.dispatch(t>=this.threshold),this.totalVisibilityRatioValueSignal.dispatch(t)};const s=i?1:0,a=Math.max(o,Fh);this.threshold=r,this.totalVisibilityValueSignal=new ea(i),this.totalVisibilityRatioValueSignal=new ea(s),this.elementVisibilityRatioValueSignal=new ea(s);const d=e.ownerDocument.defaultView.IntersectionObserver;d?this.startIntersectionObserver(d,a):this.startVisibilityCheckInterval(),n&&this.startObservingDocumentVisibility(e.ownerDocument),this.elementVisibilityRatioValueSignal.add(this.refreshTotalVisibility),this.documentVisibilityValueSignal.add(this.refreshTotalVisibility),this.addDestroyHandler(()=>{this.totalVisibilityValueSignal.removeAll(),this.totalVisibilityRatioValueSignal.removeAll(),this.elementVisibilityRatioValueSignal.removeAll(),this.documentVisibilityValueSignal.removeAll()})}getVisibility(){return this.totalVisibilityValueSignal.getValue()}getVisibilityRatio(){return this.totalVisibilityRatioValueSignal.getValue()}getDocumentVisibility(){return this.documentVisibilityValueSignal.getValue()}getElementVisibilityRatio(){return this.elementVisibilityRatioValueSignal.getValue()}onChangeVisibility(e){return this.totalVisibilityValueSignal.add(e)}onChangeVisibilityRatio(e){return this.totalVisibilityRatioValueSignal.add(e)}startIntersectionObserver(e,t){const i=[this.threshold],r=1/t;for(let o=1;o<t;o++)i.push(o*r);const n=new e(e=>{let[{intersectionRatio:t}]=e;this.elementVisibilityRatioValueSignal.dispatch(t)},{threshold:i});n.observe(this.element),this.addDestroyHandler(()=>{n.disconnect()})}startVisibilityCheckInterval(){const e=M(this.recalculateVisibility);this.addDestroyHandler(e);const{promise:t,clear:i}=ha(0);t.then(this.recalculateVisibility),this.addDestroyHandler(i)}async startObservingDocumentVisibility(e){await Ll(0);const t=S(e);this.documentVisibilityValueSignal.dispatch(t);const i=b(e,e=>{this.documentVisibilityValueSignal.dispatch(e)});this.addDestroyHandler(i)}}const Hh=Eh?"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAByhFNm3RAHU27i1OrhBVJqWZTrIHlTbuMU6uEFlSua1OsggEj7AEAAAAAAAC5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAADIq17GDD0JATYCNTGF2ZjU3Ljc2LjEwMFdBjUxhdmY1Ny43Ni4xMDBEiYhASwAAAAAAABZUrmsBAAAAAAAAYq4BAAAAAAAAWdeBAXPFgQGcgQAitZyDdW5khoZBX09QVVNWqoNjLqBWu4QExLQAg4EC4QEAAAAAAAARn4ECtYhA53AAAAAAAGJkgSBjopNPcHVzSGVhZAECOAGAuwAAAAAAH0O2dQEAAAAAAAAt54EAo4eBAACA/P/+o4eBABWA/P/+oAEAAAAAAAAPoYeBACkA/P/+daKDa3KD":"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAMm1kYXTeBABMYXZjNTcuMTA3LjEwMABCIAjBGDghEARgjBwhEARgjBwhEARgjBwAAAMbbW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAAAEsAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAkV0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAAEsAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAA1AAAEAAABAAAAAAG9bWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAADgZVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAABaG1pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABLHN0YmwAAABqc3RzZAAAAAAAAAABAAAAWm1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAANmVzZHMAAAAAA4CAgCUAAQAEgICAF0AVAAAAAAH0AAAAEYwFgICABRGQVuUABoCAgAECAAAAMHN0dHMAAAAAAAAABAAAAAEAAAQAAAAAAQAABBgAAAABAAAEAAAAAAEAAAHuAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAAEAAAAAQAAACRzdHN6AAAAAAAAAAAAAAAEAAAAGAAAAAYAAAAGAAAABgAAABRzdGNvAAAAAAAAAAEAAAAsAAAAGnNncGQBAAAAcm9sbAAAAAIAAAAB//8AAAAcc2JncAAAAAByb2xsAAAAAQAAAAQAAAABAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ny44My4xMDA=",zh="__yaMuffleVideoPlayPromiseOriginalPlay",Gh=e=>{const t=(e=>{const{muted:t}=e;return()=>{e.muted=t}})(e),i=(e=>{const{volume:t}=e;return()=>{e.volume=t}})(e),r=(e=>{const{paused:t}=e;return()=>{t&&e.pause(),!t&&e.paused&&vr(wr(e))}})(e);return()=>{t(),i(),r()}};let Wh;!function(e){e[e.MEDIA_ERR_CUSTOM=0]="MEDIA_ERR_CUSTOM",e[e.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",e[e.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED",e[e.MEDIA_ERR_ENCRYPTED=5]="MEDIA_ERR_ENCRYPTED"}(Wh||(Wh={}));class jh{constructor(e){this.code=0,this.message="","number"===typeof e?this.code=e:"string"===typeof e?this.message=e:p(e)&&("number"===typeof e.code&&(this.code=e.code),"string"===typeof e.message&&(this.message=e.message)),this.message||(this.message=Wh[this.code]||"")}}const Yh=function(e){void 0===e&&(e=window);const t=g(e).toLowerCase();return t.indexOf("maple2012")>-1&&t.indexOf("smarttv")>-1};let qh;!function(e){e.AutomaticallyGenerated="AutomaticallyGenerated",e.HardcodedParams="HardcodedParams",e.IOS9OrLess="IOS9OrLess",e.HTML5VideoIsNotSupported="HTML5VideoIsNotSupported",e.WindowHasBeenActive="WindowHasBeenActive",e.RAAStopped="RAAStopped",e.OldIE="OldIE",e.MediaError="MediaError",e.NotRecognized="NotRecognized",e.YaBroAllowedToPlay="YaBroAllowedToPlay",e.TizenSmartTVModern="TizenSmartTVModern",e.Tizen23SmartTV="Tizen23SmartTV",e.WebOSSmartTV="WebOSSmartTV",e.TizenAVPlay="TizenAVPlay",e.OrsaySmartTV="OrsaySmartTV",e.PlayStationSmartTV="PlayStationSmartTV"}(qh||(qh={}));const Kh=function(e){void 0===e&&(e=window);const t=g(e).toLowerCase();return t.indexOf("playstation")>-1&&t.indexOf("webmaf")>-1},Xh=function(e){return void 0===e&&(e=window),g(e).toLowerCase().indexOf("web0s")>-1};let Qh;!function(e){e.VideoTagPaused="VideoTagPaused",e.VideoTagPausedAfterDurationChange="VideoTagPausedAfterDurationChange",e.VideoTagPausedAfterError="VideoTagPausedAfterError",e.PauseEvent="PauseEvent",e.ProgressEvent="ProgressEvent",e.PromiseResolve="PromiseResolve",e.PromiseReject="PromiseReject",e.PlayingEvent="PlayingEvent",e.Timeout="Timeout"}(Qh||(Qh={}));const Jh={once:!0,passive:!0};let Zh=!1;const $h=-1<eh&&eh<=16,ep=Tr({canPlayUnMuted:!1,canPlayMuted:!1,detectionMethod:qh.AutomaticallyGenerated}),tp=Tr({canPlayUnMuted:!0,canPlayMuted:!0,detectionMethod:qh.AutomaticallyGenerated}),ip=500;class rp{constructor(e,t){let{checkSoundEnabled:i,promise:r}=t;if(this.video=e,this.promise=void 0,this.stop=a,this.isStopped=!1,this.revertVideoState=a,this.getIsActiveWindow())return this.promise=Promise.resolve(br({},tp,{detectionMethod:qh.WindowHasBeenActive})),this;if(r)return this.promise=r,this;const n=document.createElement("div");n.style.display="none";const o=Gh(e),s=Sr(e,()=>yr(e,{src:Hh}));let d;this.revertVideoState=Q(()=>{s(),e.load(),o(),C(n)}),this.promise=new Promise(async(e,t)=>{let r,n,o;if(d=t,i){const e=await this.requestAutoplayAbilityByMuted(!1);n=e.autoplayAbility,r=e.detectionMethod}else n=!1;if(!this.isStopped){if(n)o=!0;else{const e=await this.requestAutoplayAbilityByMuted(!0);o=e.autoplayAbility,r=r&&r!==e.detectionMethod?"DifferentDetectionMethods unmuted=["+r+"] muted=["+e.detectionMethod+"]":e.detectionMethod}this.isStopped||(this.revertVideoState(),this.isStopped=!0,e(Tr({canPlayUnMuted:n,canPlayMuted:o,detectionMethod:r||qh.NotRecognized})))}}),this.stop=()=>{this.isStopped||(this.isStopped=!0,d(new Error("requestAutoplayAbility has been stopped")),this.revertVideoState())}}async requestAutoplayAbilityByMuted(e){const{video:t}=this;if(Sr(t,()=>{t.load()}),await Ll(0),this.isStopped)return{autoplayAbility:!1,detectionMethod:qh.RAAStopped};t.muted=e,t.volume=e?0:1;const i=await new Promise(e=>{Er(t,{useProgressEvent:!0,timeoutForNonPromisePlay:ip}).then(t=>{e({autoplayAbility:!0,detectionMethod:t})}).catch(i=>{const r=function(e){const{error:t}=e;return new jh(t)}(t);r&&r.code===Wh.MEDIA_ERR_DECODE?setTimeout(()=>{e({autoplayAbility:!0,detectionMethod:qh.MediaError})},0):e({autoplayAbility:!1,detectionMethod:i})})});return this.isStopped?{autoplayAbility:!1,detectionMethod:qh.RAAStopped}:i}getIsActiveWindow(){const e=function(e){const{ownerDocument:t}=e;if(!t)return;const{defaultView:i}=t;return i||void 0}(this.video);if(!e)return!1;const t=function(e){const t=e.navigator;if(!t)return;const{userActivation:i}=t;if(!p(i))return;const{isActive:r,hasBeenActive:n}=i;return{isActive:r,hasBeenActive:n}}(e);return Boolean(t&&t.hasBeenActive)}}const np=function(e,t){void 0===t&&(t=!1);const i=(t,i,r)=>e[t][i][r],r=(t,i,r)=>e[t]&&e[t][i]&&e[t][i][r],n=e=>{let{keyset:t,key:n,lang:o=cc,onError:s,throwErr:a=!0}=e;if(r(o,t,n))return i(o,t,n);if(r(cc,t,n))return i(cc,t,n);{const e=new hc("Tanker locale for lang="+o+", keyset="+t+", key="+n+" not found");return a&&L(e),"function"===typeof s&&s(e),""}};if(t){return ba(n,e=>{let{keyset:t,key:i,lang:r}=e;return t+"_"+i+"_"+r})}return n}(i(49)),op=function(e,t){return void 0===t&&(t=cc),np({keyset:"adsdk",key:e,lang:t})};var sp=i(8),ap=i.n(sp);const dp={abuseUrl:""},lp={notInterested:{reason:3,action:2},annoying:{reason:1,action:3},spam:{reason:5,action:4}},cp=ae(lp),up=vc,hp=Boolean(yd),pp=!0,fp=!0,Ap={controlsVisibility:{timeLeft:!0}},mp=!0,gp="https://yastatic.net/awaps-ad-sdk-js/1_0/ad_creative.js",yp=!1,vp=0,_p=!1,wp=0,Ep=10,Sp=function(e){return void 0===e&&(e=window),c(e)}();class bp{constructor(e,t,i,r,n){void 0===n&&(n=!0),this.el=void 0,this.hideReasons=[],this.styleDisplay="",this.el=ot(t,r),this.el.addEventListener("click",e=>{n&&e.stopPropagation(),"function"===typeof i&&i()}),this.styleDisplay=this.el.style.display,this.el.style.display="none",e.appendChild(this.el)}setText(e){return this.el.innerHTML=e.trim()||"",this}setVisible(e){return 0===this.hideReasons.length&&this.isVisible!==Boolean(e)&&(this.el.style.display=e?this.styleDisplay:"none"),this}getClasses(){return this.el.className.split(/\s+/)}hasClass(e){return this.getClasses().indexOf(e)>-1}addClass(e){return this.hasClass(e)||(this.el.className+=" "+e),this}removeClass(e){if(this.hasClass(e)){const t=this.getClasses();t.splice(t.indexOf(e),1),this.el.className=t.join(" ")}return this}setClasses(e){return this.el.className=e,this}hide(){return this.setVisible(!1)}show(){return this.setVisible(!0)}addHideReason(e){return this.hideReasons.indexOf(e)<0&&(this.hide(),this.hideReasons.push(e)),this}removeHideReason(e){return this.hideReasons=Es(this.hideReasons,t=>t!==e),this}setBlocked(e){return e?this.addHideReason(wc.BLOCKED_IS_DEPRECATED):this.removeHideReason(wc.BLOCKED_IS_DEPRECATED),this}block(){return this.setBlocked(!0)}unBlock(){return this.setBlocked(!1)}isBlocked(){return this.hideReasons.length>0}appendChild(e){return this.el.appendChild(e),this}removeChild(e){return this.el.removeChild(e),this}get isVisible(){return"none"!==this.el.style.display}}class Tp{static toEventsArr(e,t){const i=[];if("string"===typeof e){if(!t)throw new Error("AdSDK: EventBus: you MUST pass function with string param");i.push({name:e,callback:t})}else if(e instanceof Array){for(const r in e)if(e.hasOwnProperty(r)){if("function"!==typeof t)throw new Error("You MUST pass callback in the second parameter with eventsName array");e.hasOwnProperty(r)&&i.push({name:e[r],callback:t})}}else{if("object"!==typeof e)throw new Error("Event name MUST be a string");for(const t in e)e.hasOwnProperty(t)&&i.push({name:t,callback:e[t]})}return i}static addEvent(e,t){const{name:i,callback:r}=t;if("function"!==typeof r)throw new Error("Event listener MUST be a function");e[i]||(e[i]=[]),-1===e[i].indexOf(r)&&e[i].push(r)}static addEvents(e,t){for(const i in t)t.hasOwnProperty(i)&&Tp.addEvent(e,t[i])}static offCallbackByCallbacks(e,t){if(!e)return;const i=e.indexOf(t);-1!==i&&e.splice(i,1)}constructor(){this._events=void 0,this.resetEventBus()}resetEventBus(){return this._events={on:{},once:{}},this}on(e,t){return Tp.addEvents(this._events.on,Tp.toEventsArr(e,t)),this}once(e,t){return Tp.addEvents(this._events.once,Tp.toEventsArr(e,t)),this}when(e){return new Promise(t=>{if("string"===typeof e)this.once(e,t);else{if(!(e instanceof Array))throw new Error('EventBus "when" method can take a string on string array parameter');for(const i in e)e.hasOwnProperty(i)&&this.once(e[i],t)}})}emit(e,t){if("string"===typeof e)this.emitEvent(e,t);else if(e instanceof Array)for(const i in e)e.hasOwnProperty(i)&&this.emitEvent(e[i],t);else if("object"===typeof e)for(const i in e)e.hasOwnProperty(i)&&this.emitEvent(i,e[i]);return this}emitEvent(e,t){this.emitEvents(this._events.on[e],t),this.emitEvents(this._events.once[e],t),this._events.once[e]=[]}emitEvents(e,t){if(e)for(const i in e)e.hasOwnProperty(i)&&e[i].apply(this,[t])}}const{locals:Cp}=ap.a,kp={[yc.timeLeft]:Cp.timeLeft,[yc.skip]:Cp.skip,[yc.title]:Cp.title,[yc.mute]:Cp.mute,[yc.play]:Cp.play},{locals:Ip}=ap.a,Pp=640;class Np extends Tp{constructor(e,t){super(),this.container=e,this.wrapper=void 0,this.topRightBlock=void 0,this.controls=void 0,this.onMuteButtonClick=new $s,this.sizeSensor=void 0,this.wrapper=new bp(e,Ip.yaAdSdkGui,void 0,void 0,!1),this.sizeSensor=new na(this.wrapper.el),this.sizeSensor.onResize.add(e=>{let{width:t}=e;t<=Pp?this.wrapper.addClass(Ip.yaAdSdkGui_small):this.wrapper.removeClass(Ip.yaAdSdkGui_small)});const i=si(e).position;i&&"static"!==i||(e.style.position="relative");const r=this.topRightBlock=ot(Ip.topRightBlock),n=this.wrapper;7===Cl&&(n.el.style.display="none"),Sp&&n.addClass(Ip.yaAdSdkGui_mobile),n.appendChild(r),this.controls={timeLeft:new bp(n.el,kp[yc.timeLeft],void 0,op("TIME_LEFT",t)+" 00"),play:new bp(n.el,kp[yc.play],()=>this.emit("play")),mute:new bp(r,kp[yc.mute],()=>this.onMuteButtonClick.dispatch(void 0)),skip:new bp(n.el,kp[yc.skip],()=>this.emit("skip"),op("SKIP",t)),title:new bp(n.el,kp[yc.title],()=>this.emit("click"))}}applyControlsSettings(e){for(const t of ae(this.controls)){const i=this.controls[t];i&&(e&&!1===e.controlsVisibility[t]?i.addHideReason(wc.EXTERNAL_CONFIG):i.removeHideReason(wc.EXTERNAL_CONFIG))}}addSkin(){ec.DEFAULT_CSS?function(e){if(!document.querySelector("style[data-yamediaad]")&&ec.DEFAULT_CSS){tt(e,ec.DEFAULT_CSS).setAttribute("data-yamediaad","")}}(this.container):tt(this.wrapper.el,ap.a.toString())}setMuted(e){this.controls.mute.setClasses(e?Ip.unMute:Ip.mute)}show(){this.wrapper.show()}hide(){this.wrapper.hide()}destroy(){C(this.wrapper.el),this.sizeSensor.destroy()}getBlockedControls(){return Ee(this.controls,e=>e.isBlocked())}setBlockedControls(e){J(e,(e,t)=>{this.controls[t].setBlocked(e)})}}const Dp=140;var Op,Rp,Vp,Bp,Mp,xp,Lp={},Fp=[],Up=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;Op={__e:function(e,t){for(var i,r;t=t.__;)if((i=t.__c)&&!i.__)try{if(i.constructor&&null!=i.constructor.getDerivedStateFromError&&(r=!0,i.setState(i.constructor.getDerivedStateFromError(e))),null!=i.componentDidCatch&&(r=!0,i.componentDidCatch(e)),r)return Ur(i.__E=i)}catch(t){e=t}throw e}},xr.prototype.setState=function(e,t){var i;i=this.__s!==this.state?this.__s:this.__s=Or({},this.state),"function"==typeof e&&(e=e(i,this.props)),e&&Or(i,e),null!=e&&this.__v&&(t&&this.__h.push(t),Ur(this))},xr.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ur(this))},xr.prototype.render=Mr,Rp=[],Vp="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Mp=Lp,xp=0;var Hp,zp,Gp,Wp=[],jp=Op.__r,Yp=Op.diffed,qp=Op.__c,Kp=Op.unmount;Op.__r=function(e){jp&&jp(e),Hp=0,(zp=e.__c).__H&&(zp.__H.__h.forEach(cn),zp.__H.__h.forEach(un),zp.__H.__h=[])},Op.diffed=function(e){Yp&&Yp(e);var t=e.__c;if(t){var i=t.__H;i&&i.__h.length&&(1!==Wp.push(t)&&Gp===Op.requestAnimationFrame||((Gp=Op.requestAnimationFrame)||function(e){var t,i=function(){clearTimeout(r),cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(i,100);"undefined"!=typeof window&&(t=requestAnimationFrame(i))})(ln))}},Op.__c=function(e,t){t.some((function(e){try{e.__h.forEach(cn),e.__h=e.__h.filter((function(e){return!e.__||un(e)}))}catch(i){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Op.__e(i,e.__v)}})),qp&&qp(e,t)},Op.unmount=function(e){Kp&&Kp(e);var t=e.__c;if(t){var i=t.__H;if(i)try{i.__.forEach((function(e){return e.t&&e.t()}))}catch(e){Op.__e(e,t.__v)}}};const Xp={isAbuseSupported:!1,abuseButtonClickHandler:a,abuseScreenStatus:"hidden",abuseScreenCloseHandler:a,abuseVariantChooseHandler:a,pauseByOpenAbuseScreen:!1},Qp=en(Xp),Jp=e=>{let{adDisplayController:t}=e;const[i,r]=fn(Xp.pauseByOpenAbuseScreen),[n,o]=fn(Xp.abuseScreenStatus),s=an(()=>{i()&&t.resume(),o("hidden")},[]),a=an(e=>{t.handleChooseAbuseVariant(e),xd.event({name:"AbuseVariantChoose",data:{pauseByOpenAbuseScreen:i(),variant:e},probability:Ud}),s()},[]),d=an(()=>{const e=!("pause"===t.playingState.getValue());e&&t.pause(),xd.event({name:"AbuseScreenOpen",data:{pauseByOpenAbuseScreen:e},probability:Ud}),r(e),o("selection")},[]),l=an(()=>{xd.event({name:"AbuseScreenClose",data:{pauseByOpenAbuseScreen:i()},probability:Ud}),s()},[]),{abuseParameters:c,playingState:u}=t,{abuseUrl:h}=An(c);return nn(()=>{const e=u.subscribeValueCondition(e=>"play"===e,()=>{"hidden"!==n()&&(xd.error({error:new Ea({code:"ABUSE_SCREEN_CLOSE_BY_RESUME",details:void 0})}),o("hidden"))});return()=>{e()}},[]),{isAbuseSupported:Boolean(h),abuseButtonClickHandler:d,abuseScreenStatus:n(),abuseScreenCloseHandler:l,abuseVariantChooseHandler:a,pauseByOpenAbuseScreen:i()}},Zp=()=>dn(Qp),$p=en({layoutVariant:"old"}),ef=e=>{let{adDisplayController:t}=e;const[i]=rn(function(e){const{controlsVariant:t}=e.config.controlsSettings;return void 0===t?"old":"regular"===t?"regular":"banner"===t?"banner":"old"}(t));return{layoutVariant:i}},tf=()=>dn($p);var rf=i(1),nf=i.n(rf);const of={full:"ABUSE_SCREEN_DESCRIPTION",short:"ABUSE_SCREEN_DESCRIPTION_SHORT"},sf=en(va),af=e=>An(e),df=()=>dn(sf),lf=en(document.body),cf=()=>dn(lf);Number(new Date);class uf{constructor(){this.usingStylesByContainersMap=new WeakMap}addStyleUsing(e,t){const i=this.usingStylesByContainersMap.get(e);if(!i)return this.usingStylesByContainersMap.set(e,new Map([[t,1]])),!0;const r=i.get(t);return r?(i.set(t,r+1),!1):(i.set(t,1),!0)}removeStyleUsing(e,t){const i=this.usingStylesByContainersMap.get(e);if(!i)return!0;const r=i.get(t);return!r||(i.set(t,r-1),!(r>1)&&(i.delete(t),0===i.size&&this.usingStylesByContainersMap.delete(e),!0))}}const hf=new class{constructor(){this.stylesUsingCounter=new uf,this.styleElementsMap=new WeakMap}useStyleModule(e,t){const i=t,r=[];for(let n=0;n<i.length;n++){const[t,o]=i[n];if(o){if(this.stylesUsingCounter.addStyleUsing(e,t)){const i=tt(e,o),r=this.styleElementsMap.get(e);r?r.set(t,i):this.styleElementsMap.set(e,new Map([[t,i]]))}r.push(t)}}return r.length?Q(()=>{Ja(r,t=>{const i=this.stylesUsingCounter.removeStyleUsing(e,t),r=this.styleElementsMap.get(e);i&&r&&(C(r.get(t)),r.delete(t),0===r.size&&this.styleElementsMap.delete(e))})}):a}},pf=en(e=>op(e,cc)),ff=e=>{let{adDisplayController:t}=e;const{lang:i}=t.config;return e=>op(e,i)},Af=()=>dn(pf);var mf=function(e){e.styles;var t=Object.assign({},e);return delete t.styles,Vr("svg",Object.assign({width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Vr("path",{d:"M1 1l24 24M1 25L25 1",stroke:"#F2F2F2","stroke-width":"2"},[])])};const gf=e=>{let{className:t}=e;return Vr(mf,{className:t})};var yf=i(6),vf=i.n(yf);const _f=e=>{let{children:t,isActive:i=!0,onClick:r,size:n,variant:o,className:s}=e;return mn(vf.a),Vr("div",{className:nf()(yf.locals.Button,s,{[yf.locals.Button_middle]:"middle"===n,[yf.locals.Button_active]:i,[yf.locals.Button_inline]:"inline"===o,[yf.locals.Button_block]:"block"===o}),onClick:r},Vr("div",{className:yf.locals.Button__clickable},Vr("div",{className:yf.locals.Button__button},Vr("div",{className:yf.locals.Button__content},t))))};var wf=function(e){e.styles;var t=Object.assign({},e);return delete t.styles,Vr("svg",Object.assign({width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Vr("path",{d:"M5.8 6l.34.34a.48.48 0 000-.68L5.8 6zM.66 1.54l4.8 4.8.68-.68-4.8-4.8-.68.68zm4.8 4.12l-4.8 4.8.68.68 4.8-4.8-.68-.68z",fill:"#fff"},[])])};const Ef=e=>{let{className:t}=e;return Vr(wf,{className:t})};var Sf=i(14),bf=i.n(Sf);const Tf=e=>{let{onClick:t,size:i,text:r,className:n}=e;mn(bf.a);const o=nf()(Sf.locals.AbuseVariantButton__content,{[Sf.locals.AbuseVariantButton__content_middle]:"middle"===i}),s=nf()({[Sf.locals.AbuseVariantButton__icon_middle]:"middle"===i});return Vr(_f,{className:nf()(Sf.locals.AbuseVariantButton,n),onClick:t,size:i,variant:"inline"},Vr("div",{className:o},r,Vr(Ef,{className:s})))};var Cf=i(5),kf=i.n(Cf);const If=()=>{mn(kf.a);const e=Af(),{width:t,height:i}=df(),{abuseVariantChooseHandler:r,abuseScreenCloseHandler:n}=Zp(),o=e("ABUSE_SCREEN_TITLE"),s=sn(()=>Ee(lp,(e,t)=>()=>r(t)),[r]),a=sn(()=>({notInterested:e("ABUSE_VARIANT_NOT_INTERESTED"),annoying:e("ABUSE_VARIANT_ANNOYING"),spam:e(t<600?"ABUSE_VARIANT_SPAM_SHORT":"ABUSE_VARIANT_SPAM")}),[e]),d=function(e){if(!(e<350))return e<450?"short":"full"}(i),l=void 0===d?void 0:e(of[d]),c=Boolean(l),u=t<700,h=function(e){let{abuseScreenWidth:t,hasDescription:i}=e;return t>=600?360:i?t>=400?320:240:t>=500?280:t>=400?240:200}({hasDescription:c,abuseScreenWidth:t}),p=i>200,f=function(e){let{abuseScreenWidth:t,hasDescription:i}=e;return t>=600?27:i&&t>=400?25:t>=500?19:17}({hasDescription:c,abuseScreenWidth:t}),A={marginBottom:yn({isShortDescription:"short"===d,abuseScreenWidth:t}),fontSize:t<400?11:13,lineHeight:t<400?"15px":"21px"};return Vr("div",{className:Cf.locals.AbuseScreen},Vr("div",{className:nf()(Cf.locals.AbuseScreen__content,{[Cf.locals.AbuseScreen__content_centered]:u}),style:{width:h,paddingBottom:u&&p?"5%":0}},p&&Vr("div",{className:nf()({[Cf.locals.AbuseScreen__title_centered]:!c}),style:{fontSize:f,marginBottom:t<500?7:14},dangerouslySetInnerHTML:{__html:o}}),c&&Vr("div",{style:A},l),Vr("div",{className:Cf.locals.AbuseScreen__buttons},ss(cp,e=>Vr(Tf,{key:e,className:Cf.locals.AbuseScreen__button,size:gn({abuseScreenWidth:t,hasDescription:c}),text:a[e],onClick:s[e]})))),Vr("div",{onClick:n,className:nf()(Cf.locals.AbuseScreen__crossContainer,{[Cf.locals.AbuseScreen__crossContainer_medium]:t>=700})},Vr(gf,{className:Cf.locals.AbuseScreen__cross})))},Pf=-1,{controlsVisibility:Nf}=kr({controlsVisibility:{}},{controlsVisibility:{},visibility:!1}),Df=en({controlsVisibility:{}}),Of=e=>{let{adDisplayController:t}=e;const[i]=rn(t.config.controlsSettings.controlsVisibility),[r,n]=rn(i),o=an(e=>{n(e?i:Nf)},[]);return nn(()=>{o(t.skinVisibility.getValue());const e=t.skinVisibility.add(o);return()=>{e()}},[]),{controlsVisibility:r}},Rf=()=>dn(Df),Vf=en({playingState:"idle",play:a,pause:a,isStarted:!1}),Bf=e=>{let{adDisplayController:t}=e;const[i,r]=rn(!1),n=An(t.playingState);nn(()=>{const e=t.onAdStart.addOne(()=>{r(!0)});return()=>{e()}},[]);return{playingState:n,play:()=>t.resume(),pause:()=>t.pause(),isStarted:i}},Mf=()=>dn(Vf),xf=en({timeToSkip:Pf,skipCurrentAdPod:a}),Lf=e=>{let{adDisplayController:t}=e;const{timeToSkip:i}=t;return{timeToSkip:An(i),skipCurrentAdPod:an(()=>{const e=i.getValue();0===i.getValue()?t.skipCurrentViewer():xd.event({name:"ClickToInactiveSkipButton",data:{timeToSkipValue:e}})},[])}},Ff=()=>dn(xf),Uf={volumeStatus:"unavailable",setMuted:a},Hf=en(Uf),zf=e=>{let{adDisplayController:t}=e;const[i,r]=rn(Uf.volumeStatus);nn(()=>{const{adVolume:e,adVolumeAvailability:i,adHasBeenUnmuted:n}=t,o=vn({adVolume:e.getValue(),adVolumeAvailability:i.getValue(),adHasBeenUnmuted:n.getValue()});return r(o),mr([e,i,n],(e,t,i)=>vn({adVolume:e,adVolumeAvailability:t,adHasBeenUnmuted:i}),r)},[]);return{volumeStatus:i,setMuted:e=>{t.setMuted(e)}}},Gf=()=>dn(Hf),Wf=450;var jf=function(e){e.styles;var t=Object.assign({},e);return delete t.styles,Vr("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Vr("g",{filter:"url(#svg-mute-jsx-inline-6mmt99U)"},[Vr("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M27.27 12.039c2.083 2.16 3.23 4.93 3.23 7.801 0 2.872-1.147 5.643-3.23 7.802l-1.73-1.42c1.704-1.768 2.643-4.033 2.643-6.382 0-2.347-.939-4.614-2.643-6.381l1.73-1.42zM14.61 17.24l3.966-3.9h1.33v13.002h-1.33l-3.973-3.9h-3.966V17.24h3.973zm11.255 2.6a7.666 7.666 0 00-2.054-5.2l-1.732 1.487a5.48 5.48 0 011.469 3.713 5.48 5.48 0 01-1.468 3.714l1.73 1.488a7.666 7.666 0 002.055-5.202z",fill:"#F2F2F2"},[])]),Vr("defs",{},[Vr("filter",{id:"svg-mute-jsx-inline-6mmt99U",x:"7.5",y:"12",width:"25",height:"20",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"},[Vr("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"},[]),Vr("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"},[]),Vr("feOffset",{dy:"2"},[]),Vr("feGaussianBlur",{stdDeviation:"1"},[]),Vr("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"},[]),Vr("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"},[]),Vr("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"},[])])])])};const Yf=e=>{let{className:t}=e;return Vr(jf,{className:t})};var qf=i(16),Kf=i.n(qf);const Xf=e=>{let{onClick:t,size:i}=e;mn(Kf.a);const r=nf()(qf.locals.MuteButton__icon,{[qf.locals.MuteButton__icon_middle]:"middle"===i});return Vr(_f,{className:qf.locals.MuteButton,onClick:t,size:i,variant:"block"},Vr(Yf,{className:r}))};var Qf=function(e){e.styles;var t=Object.assign({},e);return delete t.styles,Vr("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Vr("g",{filter:"url(#svg-unmute-jsx-inline-6mmt99U)"},[Vr("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.61 12L9.5 13.328l4.645 3.912h-3.508v5.201h3.966l3.973 3.901h1.33v-4.25L26.92 28s.3-.292.62-.64c.242-.271.582-.697.582-.697L10.61 12zm12.907 8.412l2.002 1.687a7.556 7.556 0 00.346-2.259 7.666 7.666 0 00-2.054-5.2l-1.732 1.487a5.48 5.48 0 011.469 3.713c0 .192-.01.383-.031.572zm3.817 3.215l1.79 1.508A10.962 10.962 0 0030.5 19.84c0-2.871-1.147-5.642-3.23-7.801l-1.73 1.42c1.704 1.767 2.643 4.034 2.643 6.381a8.918 8.918 0 01-.85 3.787zm-10.353-8.72l2.925 2.464v-4.032h-1.33l-1.595 1.569z",fill:"#F2F2F2"},[])]),Vr("defs",{},[Vr("filter",{id:"svg-unmute-jsx-inline-6mmt99U",x:"7.5",y:"12",width:"25",height:"20",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"},[Vr("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"},[]),Vr("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"},[]),Vr("feOffset",{dy:"2"},[]),Vr("feGaussianBlur",{stdDeviation:"1"},[]),Vr("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"},[]),Vr("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"},[]),Vr("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"},[])])])])};const Jf=e=>{let{className:t}=e;return Vr(Qf,{className:t})};var Zf=i(10),$f=i.n(Zf);const eA=e=>{let{onClick:t,size:i,unmuteText:r}=e;mn($f.a);const n=nf()(Zf.locals.UnmuteButton__icon,{[Zf.locals.UnmuteButton__icon_middle]:"middle"===i}),o=nf()(Zf.locals.UnmuteButton__text,{[Zf.locals.UnmuteButton__text_middle]:"middle"===i,[Zf.locals.UnmuteButton__without_text]:!r});return Vr(_f,{className:Zf.locals.UnmuteButton,onClick:t,size:i,variant:"block"},Vr(Jf,{className:n}),r&&Vr("div",{className:o},r))},tA=()=>{const{volumeStatus:e,setMuted:t}=Gf(),i=an(()=>{t(!0)},[]),r=an(()=>{t(!1)},[]),n=_n(df());if("unmuted"===e)return Vr(Xf,{onClick:i,size:n});const{layoutVariant:o}=tf();let s;return"banner"!==o&&("mutedStart"===e&&"middle"===n)&&(s=op("UNMUTE",cc)),Vr(eA,{onClick:r,unmuteText:s,size:n})};var iA=function(e){e.styles;var t=Object.assign({},e);return delete t.styles,Vr("svg",Object.assign({width:"34",height:"28",viewBox:"0 0 34 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Vr("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 14L0 28V0l24 14zm10 14V0h-4v28h4z",fill:"#fff"},[])])};const rA=e=>{let{className:t}=e;return Vr(iA,{className:t})};var nA=i(4),oA=i.n(nA);const sA=e=>{let{timeToSkipString:t,size:i}=e;const r=nf()(nA.locals.SkipButton__digitsContainer__leftDigit,{[nA.locals.SkipButton__digitsContainer__leftDigit_middle]:"middle"===i}),[n,o]=t;return Vr("div",{className:nA.locals.SkipButton__digitsContainer},Vr("div",{className:r},n),Vr("div",null,o))},aA=e=>{let{onClick:t,skipText:i,size:r,isActive:n,timeToSkipString:o}=e;mn(oA.a);const s=nf()(nA.locals.SkipButton__icon,{[nA.locals.SkipButton__icon_middle]:"middle"===r}),a=nf()(nA.locals.SkipButton__text,{[nA.locals.SkipButton__text_middle]:"middle"===r}),d=nf()(nA.locals.SkipButton__timeToSkipString,{[nA.locals.SkipButton__timeToSkipString_middle]:"middle"===r});return Vr(_f,{className:nA.locals.SkipButton,onClick:t,size:r,isActive:n,variant:"block"},Vr("div",{className:nA.locals.SkipButton__content},Vr("div",{className:a},i),Vr("div",{className:d},o?Vr(sA,{timeToSkipString:o,size:r}):Vr(rA,{className:s}))))},dA=2,lA=()=>{const e=df(),{skipCurrentAdPod:t,timeToSkip:i}=Ff(),r=Af(),n=_n(e);return Vr(aA,{size:n,onClick:t,skipText:r("SKIP"),isActive:0===i,timeToSkipString:wn(i)})},cA={currentNumber:0,count:0},uA=en(cA),hA=e=>{let{adDisplayController:t}=e;const[i,r]=rn(cA.currentNumber),[n,o]=rn(cA.count),s=an(e=>o(e),[]);return nn(()=>{const e=t.onAdMediaStart.add(()=>{const e=t.getCurrentViewerIndex(),i=t.getViewerLength();r(e),s(i)});return()=>{e()}},[]),{currentNumber:i,count:n}},pA={currentTime:NaN,duration:NaN},fA=en(pA),AA=e=>{let{adDisplayController:t}=e;const[i,r]=rn(pA.currentTime),[n,o]=rn(pA.duration);return nn(()=>{let e=a;const i=t.onAdMediaStart.add(()=>{e=t.onCurrentPositionChange.add(e=>{let{viewerTime:t,viewerDuration:i}=e;r(t),o(i)})}),n=t.onAdMediaEnd.add(()=>{e()});return()=>{e(),i(),n()}},[]),nn(()=>{const e=t.onAdMediaStart.add(e=>{let{viewer:t}=e;r(0),o(t.getDuration())});return()=>{e()}},[]),{currentTime:i,duration:n}},mA=4,gA=e=>Math.floor(1e4*e)/1e4;var yA=i(11),vA=i.n(yA);const _A=e=>{let{currentTime:t,duration:i,currentNumber:r,count:n}=e;mn(vA.a);const{width:o,transform:s}=function(e){let{currentNumber:t,count:i}=e;const r=mA*(i-1)/i,n="calc("+gA(100/i)+"% - "+gA(r)+"px)",o=t*mA;return{width:n,transform:"translateX("+("calc("+gA(100*t)+"% + "+gA(o)+"px)")+")"}}({currentNumber:r,count:n}),a=l(t/i,0,1);return Vr("div",{className:yA.locals.TimelineBar__container,style:{width:o,transform:s}},Vr("div",{className:nf()(yA.locals.TimelineBar,yA.locals.TimelineBar__background)}),Vr("div",{className:nf()(yA.locals.TimelineBar,yA.locals.TimelineBar__progress),style:"transform: scaleX("+a+")"}))};var wA=i(25),EA=i.n(wA);const SA=()=>{mn(EA.a);const{currentTime:e,duration:t}=dn(fA),{currentNumber:i,count:r}=dn(uA);return Vr("div",{className:wA.locals.Timeline},ss(function(e){const t=[];for(let i=0;i<e;i++)t.push(i);return t}(r),n=>Vr(_A,n<i?{key:n,currentTime:1,duration:1,currentNumber:n,count:r}:n===i?{key:n,currentTime:e,duration:t,currentNumber:n,count:r}:{key:n,currentTime:0,duration:1,currentNumber:n,count:r})))};var bA=i(26),TA=i.n(bA);const CA=()=>{mn(TA.a);const{timeToSkip:e}=Ff(),{playingState:t}=Mf(),{controlsVisibility:i}=Rf(),{volumeStatus:r}=Gf(),n="idle"!==t&&"unavailable"!==r&&!1!==i.mute,o=e!==Pf&&!1!==i.skip,s=!1!==i.timeline;return Vr("div",null,Vr("div",{className:bA.locals.ButtonControls},Vr("div",null,n&&Vr(tA,null)),Vr("div",null,o&&Vr(lA,null))),s&&Vr(SA,null))};var kA=function(e){e.styles;var t=Object.assign({},e);return delete t.styles,Vr("svg",Object.assign({width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Vr("path",{d:"M30 60c16.569 0 30-13.431 30-30C60 13.431 46.569 0 30 0 13.431 0 0 13.431 0 30c0 16.569 13.431 30 30 30z",fill:"#000","fill-opacity":".65"},[]),Vr("path",{d:"M25.423 19.454c-.793-.476-1.19-.714-1.516-.684a1 1 0 00-.713.404C23 19.44 23 19.901 23 20.826v18.348c0 .925 0 1.388.194 1.652a1 1 0 00.713.404c.326.03.723-.208 1.516-.684l15.29-9.174c.755-.453 1.132-.679 1.26-.971a1 1 0 000-.802c-.128-.292-.505-.518-1.26-.971l-15.29-9.174z",fill:"#fff","fill-rule":"evenodd","clip-rule":"evenodd"},[])])};const IA=e=>{let{className:t}=e;return Vr(kA,{className:t})};var PA=i(17),NA=i.n(PA);const DA=e=>{let{onClick:t,size:i}=e;mn(NA.a);const r=nf()(PA.locals.CirclePlayButton__icon,{[PA.locals.CirclePlayButton__icon_middle]:"middle"===i});return Vr(_f,{className:PA.locals.CirclePlayButton,onClick:t,size:i,variant:"inline"},Vr(IA,{className:r}))},OA=()=>{const e=_n(df()),{play:t}=Mf();return Vr(DA,{size:e,onClick:t})};var RA=i(27),VA=i.n(RA);const BA=()=>{mn(VA.a);const{playingState:e,isStarted:t}=Mf(),{controlsVisibility:i}=Rf(),{layoutVariant:r}=tf(),n="pause"===e,o=n&&!1!==i.play,s="banner"===r?n&&!t:o;return Vr("div",{className:RA.locals.CenterControls},s&&Vr(OA,null))};var MA=function(e){e.styles;var t=Object.assign({},e);return delete t.styles,Vr("svg",Object.assign({width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Vr("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 10h-4v12h4V10zm8 0h-4v12h4V10z",fill:"#fff"},[])])};const xA=e=>{let{className:t}=e;return Vr(MA,{className:t})};var LA=i(18),FA=i.n(LA);const UA=e=>{let{onClick:t,size:i}=e;mn(FA.a);const r=nf()(LA.locals.PauseButton__icon,{[LA.locals.PauseButton__icon_middle]:"middle"===i});return Vr(_f,{className:LA.locals.PauseButton,onClick:t,size:i,variant:"block"},Vr(xA,{className:r}))};var HA=function(e){e.styles;var t=Object.assign({},e);return delete t.styles,Vr("svg",Object.assign({width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Vr("path",{d:"M25.423 19.454c-.793-.476-1.19-.714-1.516-.684a1 1 0 00-.713.404C23 19.44 23 19.901 23 20.826v18.348c0 .925 0 1.388.194 1.652a1 1 0 00.713.404c.326.03.723-.208 1.516-.684l15.29-9.174c.755-.453 1.132-.679 1.26-.971a1 1 0 000-.802c-.128-.292-.505-.518-1.26-.971l-15.29-9.174z",fill:"#fff","fill-rule":"evenodd","clip-rule":"evenodd"},[])])};const zA=e=>{let{className:t}=e;return Vr(HA,{className:t})};var GA=i(19),WA=i.n(GA);const jA=e=>{let{onClick:t,size:i}=e;mn(WA.a);const r=nf()(GA.locals.SquarePlayButton__icon,{[GA.locals.SquarePlayButton__icon_middle]:"middle"===i});return Vr(_f,{className:GA.locals.SquarePlayButton,onClick:t,size:i,variant:"block"},Vr(zA,{className:r}))},YA=()=>{const{playingState:e,play:t,pause:i}=Mf(),r=_n(df());return"play"===e?Vr(UA,{onClick:i,size:r}):Vr(jA,{onClick:t,size:r})};var qA=i(28),KA=i.n(qA);const XA=()=>{mn(KA.a);const{playingState:e,isStarted:t}=Mf(),{volumeStatus:i}=Gf(),r="pause"===e&&t,n="play"===e,o=n||r,s=(n||r||"end"===e)&&"unavailable"!==i;return Vr("div",null,Vr("div",{className:qA.locals.TgoButtonControls},Vr("div",null,o&&Vr(YA,null)),Vr("div",null,s&&Vr(tA,null))))};var QA=function(e){e.styles;var t=Object.assign({},e);return delete t.styles,Vr("svg",Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Vr("g",{filter:"url(#svg-abuse-jsx-inline-6mmt99U)"},[Vr("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2 8a8 8 0 1116 0A8 8 0 012 8zm7 4c0-.093 0-.14.003-.178a.9.9 0 01.819-.819C9.86 11 9.907 11 10 11c.093 0 .14 0 .178.003a.9.9 0 01.819.819c.003.039.003.085.003.178 0 .093 0 .14-.003.178a.9.9 0 01-.819.819C10.14 13 10.093 13 10 13c-.093 0-.14 0-.178-.003a.9.9 0 01-.819-.819C9 12.14 9 12.093 9 12zm1.75-3L11 3H9l.25 6h1.5z",fill:"#fff"},[])]),Vr("defs",{},[Vr("filter",{id:"svg-abuse-jsx-inline-6mmt99U",x:"0",y:"0",width:"20",height:"20",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"},[Vr("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"},[]),Vr("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"},[]),Vr("feOffset",{dy:"2"},[]),Vr("feGaussianBlur",{stdDeviation:"1"},[]),Vr("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"},[]),Vr("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"},[]),Vr("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"},[])])])])};const JA=e=>{let{className:t}=e;return Vr(QA,{className:t})};var ZA=i(20),$A=i.n(ZA);const em=e=>{let{size:t,onClick:i}=e;return mn($A.a),Vr("div",{className:ZA.locals.AbuseButton,onClick:i},Vr(JA,{className:nf()(ZA.locals.AbuseButton__icon,{[ZA.locals.AbuseButton__icon_middle]:"middle"===t})}))};var tm=i(21),im=i.n(tm);const rm=e=>{let{size:t}=e;mn(im.a);const i=Af();return Vr("a",{className:nf()(tm.locals.AdLabel,{[tm.locals.AdLabel_middle]:"middle"===t}),href:i("YANDEX_DIRECT_LINK"),target:"_blank",title:i("YANDEX_DIRECT")},i("AD_TITLE"))},nm=()=>{const e=_n(df());return Vr(rm,{size:e})};var om=i(29),sm=i.n(om);const am=()=>{mn(sm.a);const{playingState:e}=Mf(),{controlsVisibility:t}=Rf(),{isAbuseSupported:i,abuseButtonClickHandler:r}=Zp(),n=_n(df()),o=!1!==t.adLabel&&"idle"!==e,s=!1!==t.abuse&&i;return Vr("div",{className:om.locals.TopControls},o&&Vr(nm,null),s&&Vr(em,{onClick:r,size:n}))},dm=()=>{const{abuseScreenStatus:e}=Zp();if("selection"===e)return Vr(If,null);const{layoutVariant:t}=tf(),i="banner"===t?()=>null:CA;return Vr(Mr,null,Vr("banner"===t?XA:am,null),Vr(BA,null),Vr(i,null))},lm=[e=>Vr(lf.Provider,{value:e.slotElement,children:e.children}),e=>Vr(Vf.Provider,{value:Bf(e),children:e.children}),e=>Vr(uA.Provider,{value:hA(e),children:e.children}),e=>Vr(fA.Provider,{value:AA(e),children:e.children}),e=>Vr(sf.Provider,{value:af(e.adDisplayController.slotSizeSensor.onResize),children:e.children}),e=>Vr(xf.Provider,{value:Lf(e),children:e.children}),e=>Vr(pf.Provider,{value:ff(e),children:e.children}),e=>Vr(Df.Provider,{value:Of(e),children:e.children}),e=>Vr(Hf.Provider,{value:zf(e),children:e.children}),e=>Vr($p.Provider,{value:ef(e),children:e.children}),e=>Vr(Qp.Provider,{value:Jp(e),children:e.children})],cm=e=>Vr(Mr,null,ca(lm,(t,i)=>i(En({},e,{children:t})),e.children));const um=(e,t)=>{const i=Vr(cm,{adDisplayController:t,slotElement:e},Vr(dm,null));return Ct("Skin: render skin"),$r(i,e),()=>{Ct("Skin: destroy skin"),$r(null,e)}},hm=180,pm=320,fm=160,Am=300,mm=2,gm={height:0,width:0},ym=function(e){if(void 0===e&&(e=window),void 0===e.screen)return gm;const{width:t=gm.width,height:i=gm.height}=e.screen;return{width:t,height:i}};var vm,_m;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.ETHERNET=1]="ETHERNET",e[e.WIFI=2]="WIFI",e[e.CELL_2G=3]="CELL_2G",e[e.CELL_3G=4]="CELL_3G"}(vm||(vm={})),function(e){e.BLUETOOTH="bluetooth",e.CELLULAR="cellular",e.ETHERNET="ethernet",e.MIXED="mixed",e.NONE="none",e.OTHER="other",e.UNKNOWN="unknown",e.WIFI="wifi",e.WIMAX="wimax"}(_m||(_m={}));const wm="https://yastatic.net/awaps-ad-sdk-js/1_0/overlay_creative.js",Em={OverlayTGO:wm,MotionTGO:gp},Sm={OverlayTGO:"overlay-creative/javascript",MotionTGO:"motion-creative/javascript"},bm={OverlayTGO:"overlay",MotionTGO:"motion"},Tm="https://yastatic.net/pcode/media/vpaid-creative.js",Cm=15,km=1e3,Im=[{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}},{enabled:"webkitSupportsFullscreen",element:"webkitDisplayingFullscreen",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}}],Pm="Fullscreen is not supported";class Nm{constructor(e,t){void 0===e&&(e=window),this.handlers=[],this.names=void 0,this.onDestroy=new $s,this.win=void 0,this.video=void 0,this.fullscreenElement=null,this.setFullScreenElementFromAPI=()=>{const e=function(e,t){const i=Pn(e,t);if(!i)return null;let r=e.document[i.element];return t&&t[i.element]&&(r=t),r||null}(this.win,this.video);this.setFullscreenElement(e)},this.win=e,this.video=t,t&&Pl&&(this.onDestroy.addOne(d(t,"webkitbeginfullscreen",()=>{this.setFullscreenElement(t)})),this.onDestroy.addOne(d(t,"webkitendfullscreen",()=>{this.setFullscreenElement(null)}))),this.names=Pn(e,t),this.names&&(this.onDestroy.addOne(d(this.win.document,this.names.events.change,this.setFullScreenElementFromAPI)),this.setFullScreenElementFromAPI())}requestFullscreenForElement(e,t){if(void 0===this.names)throw new this.win.Error(Pm);{const{request:i}=this.names;if(!(i in e))throw new this.win.Error(Pm);e[i](t)}}isFullscreen(){return null!==this.fullscreenElement}exit(){if(void 0===this.names)throw new Error(Pm);this.video&&this.fullscreenElement===this.video?this.video[this.names.exit]():this.win.document[this.names.exit]()}getFullscreenElement(){return this.fullscreenElement}addHandler(e){if("function"!==typeof e)throw new this.win.Error("Fullscreen handler must be a function");this.handlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e)}destroy(){this.handlers.length=0,this.onDestroy.dispatch(void 0)}setFullscreenElement(e){this.fullscreenElement=e,this.handlers.forEach(t=>t(e))}}const Dm=function(e){return void 0===e&&(e=window),-1!==ns(e)}(),Om=null===Ku.onwaiting,Rm=!Om||Dm||fs?(e,t)=>{let i=0,r=!1;return M(()=>{const n=e.currentTime,o=e.duration,s=1/ta;if(!e.paused){const e=i+s;r?n>e&&(t(!1),r=!1):n<e&&n!==o&&(t(!0),r=!0)}i=n})}:(e,t)=>{let i=!1;const r=d(e,"waiting",()=>{i||(i=!0,t(!0))},{passive:!0}),n=d(e,"playing",()=>{i&&(i=!1,t(!1))},{passive:!0}),o=d(e,"canplay",()=>{i&&(i=!1,t(!1))},{passive:!0});return()=>{r(),n(),o()}},Vm=2,Bm=50;class Mm{constructor(e){this.video=e,this.unsubscribeVideoTimeupdate=void 0,this.lastLegalCurrentTime=void 0,this.lastTimestamp=void 0,this.seekAllowed=!0,this.onVideoTimeUpdate=()=>{const{currentTime:e}=this.video;this.isSeekingIllegal()?this.video.currentTime=this.lastLegalCurrentTime:(this.lastLegalCurrentTime=e,this.lastTimestamp=Date.now())},this.lastLegalCurrentTime=e.currentTime,this.lastTimestamp=Date.now(),this.unsubscribeVideoTimeupdate=d(e,"timeupdate",this.onVideoTimeUpdate)}setSeekAllowed(e){this.seekAllowed=e}isSeekingIllegal(){return!this.seekAllowed&&this.isSeekingVideo()}destroy(){this.seekAllowed=!0,this.unsubscribeVideoTimeupdate()}isSeekingVideo(){const{currentTime:e,playbackRate:t}=this.video;if(this.lastLegalCurrentTime){const i=Date.now()-this.lastTimestamp;if(i>Bm){if((e-this.lastLegalCurrentTime)/(i/1e3)>(t||1)*Vm)return!0}}return!1}}let xm;!function(e){e.PLAY="play",e.PAUSE="pause",e.BUFFERING="buffering",e.END="end"}(xm||(xm={}));class Lm{constructor(e){this.violatedSources=[],this.unsubscribeEvent=void 0,this.securityPolicyViolationCallback=e=>{let{blockedURI:t,violatedDirective:i,originalPolicy:r}=e;if("media-src"!==i)return;const n={blockedURI:t,violatedDirective:i,originalPolicy:r};this.violatedSources.push(n)},this.unsubscribeEvent=d(e,"securitypolicyviolation",this.securityPolicyViolationCallback)}getViolatedSourceBySrc(e){return bs(this.violatedSources,t=>{let{blockedURI:i}=t;return 0===e.indexOf(i)})}destroy(){this.violatedSources=[],this.unsubscribeEvent()}}const Fm=async e=>{let{src:t,videoNode:i,addTeardownHandler:r}=e;if(!wh)throw new Error("No MSE");if(!kh)throw new Error("Environment is NOT supported");const n=new wh,o=URL.createObjectURL(n);i.src=o,r(()=>{(e=>{e.removeAttribute("src"),e.load()})(i)});const s=(e,t)=>new Promise(i=>{const n=d(e,t,()=>i(),{once:!0});r(n)});await s(n,"sourceopen");const a=n.addSourceBuffer('video/webm; codecs="vorbis,vp8"');r(()=>a.abort());const l=new AbortController;r(()=>l.abort());const c=await fetch(t,{signal:l.signal});if(!c.body)throw new ReferenceError("empty body");const u=c.body.getReader();let h;r(()=>u.cancel());const p=e=>{if(!h)return void(h=e);const t=new Uint8Array(h.length+e.length);t.set(h),t.set(e,h.length),h=t};let f;r(()=>{h=void 0});const A=await u.read();await async function e(t){if(t.done)return void(await async function(){for(;a.updating;)await s(a,"updateend");n.endOfStream()}());p(t.value),function e(){if(h){if(a.updating){if(f)return;return d(a,"updateend",()=>{f=!1,e()},{once:!0}),void(f=!0)}a.appendBuffer(h),h=void 0}}();const i=await u.read();await e(i)}(A)},Um=e=>{let{src:t,videoNode:i,onError:r}=e;const n=[],o=()=>{F(()=>O(n)),n.length=0},s=e=>{o(),r(e)},a=e=>n.push(()=>F(e));return F(()=>Fm({src:t,videoNode:i,addTeardownHandler:a}).catch(s),s),o},Hm=.5,zm=1,Gm=Math.ceil(2/(ta/vd)),Wm=500,jm=1e3,Ym=.25,qm=1e3,Km=1e3,Xm=.1,Qm=fs;class Jm extends Zs{constructor(e){super(),this.videoNode=e,this.onClick=new $s,this.onCurrentPositionChange=new $s,this.playingState=new ea(this.videoNode.paused?xm.PAUSE:xm.PLAY),this.onError=new $s,this.onEnd=new $s,this.onVolumeChange=new $s,this.onPlay=new $s,this.onPlayAfterPause=new $s,this.onBufferingAfterPlay=new $s,this.isBuffering=new ea(!1),this.onPlaying=new $s,this.fullscreenApi=void 0,this.pauseRequest=new ea(-1),this.seekController=void 0,this.cspErrorHandler=void 0,this.seekController=new Mm(e);const t=kn(e)?e.ownerDocument.defaultView:window;this.fullscreenApi=new Nm(t,e),this.cspErrorHandler=new Lm(t);let i=this.playingState.getValue();this.playingState.add(e=>{const{currentTime:t,duration:r,paused:n,ended:o}=this.videoNode;switch(Ct("VideoNodeController.playingStateChange=["+JSON.stringify({previousPlayingState:i,nextPlayingState:e,currentTime:t,duration:r,paused:n,ended:o})+"]"),e){case xm.PLAY:"pause"===i&&this.onPlayAfterPause.dispatch(void 0),this.onPlay.dispatch(void 0);break;case xm.END:this.onEnd.dispatch(void 0);break;case xm.BUFFERING:"play"===i&&this.onBufferingAfterPlay.dispatch(void 0)}this.isBuffering.dispatch(e===xm.BUFFERING),i=e});const r={error:()=>{const{src:e}=this.videoNode,t=()=>{const t=this.cspErrorHandler.getViolatedSourceBySrc(e);return t?new Ea({code:"MEDIA_SRC_VIOLATES_CSP_POLICY",details:{violatedSource:t}}):void 0},i=()=>{const e=t();e&&xd.error({error:e})};let r=t();if(!r){r=this.getVideoNodeError();const{promise:e,clear:t}=ha(qm);this.addDestroyHandler(()=>{t(),i()}),e.then(i).catch(L)}this.onError.dispatch(r)},play:()=>{this.playingState.dispatch(xm.PLAY)},playing:()=>{this.onPlaying.dispatch(void 0),this.playingState.dispatch(xm.PLAY)}};this.subscribeClick(),this.subscribeTimeupdate(),this.subscribePause(),this.subscribeEnded(),this.subscribeBuffering(),this.subscribeVolumeChange();for(const n in r)r.hasOwnProperty(n)&&e.addEventListener(n,r[n]);this.addDestroyHandler(()=>{for(const t in r)r.hasOwnProperty(t)&&e.removeEventListener(t,r[t]);this.fullscreenApi.destroy(),this.seekController.destroy(),this.cspErrorHandler.destroy()})}play(){const e=this.videoNode.play();la(e)&&e.catch(e=>{this.shouldIgnorePlayRejection(e)||xd.error({error:new Ea(e,{code:"VIDEO_PLAY_REJECTED",details:{errorCode:e.code,errorName:e.name,errorMessage:e.message}})})})}pause(){this.pauseRequest.dispatch(Date.now()),this.videoNode.pause()}setSrc(e){const{url:t}=e,{videoNode:i}=this,r=()=>{i.src=t,i.load()};Sr(i,()=>{Ih(e)?Um({src:t,videoNode:i,onError:e=>{xd.error({error:new Ea(e,{code:"MSE_VIDEO_ATTACH_FAIL",details:{errorCode:e.code,errorName:e.name,errorMessage:e.message}})}),r()}}):r()})}getWidth(){return this.videoNode.clientWidth}getHeight(){return this.videoNode.clientHeight}getCurrentTime(){return function(e){const t=e.currentTime||0;return Math.max(0,t)}(this.videoNode)}getDuration(){return function(e){const t=e.duration||0;return Math.max(0,t)}(this.videoNode)}setCurrentTime(e){this.videoNode.currentTime=e}setVisibleControls(e){this.videoNode.controls=e}setPoster(e){this.videoNode.poster=e}isFullscreen(){return this.fullscreenApi.getFullscreenElement()===this.videoNode}getPaused(){return this.videoNode.paused}getMuted(){return 0===this.getVolume()}setMuted(e){!function(e,t){Sr(e,()=>{e.muted=t;const i=e.volume;if(!t&&0===i){const t=i>0?i:Hm;e.volume=t}})}(this.videoNode,e)}getVolume(){return(e=this.videoNode).muted?0:e.volume;var e}setVolume(e){!function(e,t){Sr(e,()=>{e.volume=t,e.muted=0===t})}(this.videoNode,e)}setSeekAllowed(e){this.seekController.setSeekAllowed(e)}getVideoNodeError(){const{videoNode:e}=this,{src:t,currentSrc:i,currentTime:r,duration:n,error:o}=e,s=o&&o.code,a={code:s,message:o&&o.message||"",src:t,currentSrc:i,currentTime:r,duration:n};if(!o||"undefined"===typeof MediaError)return new Ea({code:"VIDEO_ERROR",details:a});switch(s){case MediaError.MEDIA_ERR_ABORTED:return new Ea({code:"MEDIA_ERR_ABORTED",details:a});case MediaError.MEDIA_ERR_NETWORK:return new Ea({code:"MEDIA_ERR_NETWORK",details:a});case MediaError.MEDIA_ERR_DECODE:return new Ea({code:r>0?"MEDIA_ERR_DECODE_DURING_PLAYBACK":"MEDIA_ERR_DECODE_ON_START",details:a});case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return new Ea({code:"MEDIA_ERR_SRC_NOT_SUPPORTED",details:a});default:return new Ea({code:"MEDIA_ERROR_UNRECOGNIZED",details:a})}}subscribeClick(){const e=()=>{this.onClick.dispatch(void 0)},t=Cl>=11?In(this.videoNode,e):d(this.videoNode,"click",e);this.addDestroyHandler(t)}subscribeTimeupdate(){let e=0;const t=()=>{this.seekController.isSeekingIllegal()||(e=Date.now(),this.onCurrentPositionChange.dispatch({currentTime:this.getCurrentTime(),duration:this.getDuration()}))},i=d(this.videoNode,"timeupdate",t,{passive:!0}),r=M(()=>{const i=Date.now()-e;this.playingState.getValue()===xm.PLAY&&i>Wm&&(Ct("dispatch synthetic timeupdate event for currentTime=["+this.videoNode.currentTime+"] duration=["+this.videoNode.duration+"] ended=["+this.videoNode.ended+"]"),t())});this.addDestroyHandler(i),this.addDestroyHandler(r)}subscribePause(){const{videoNode:e}=this,t=d(e,"pause",()=>{this.getCurrentTime()>=this.getDuration()||this.playingState.dispatch(xm.PAUSE)},{passive:!0}),i=M(()=>{const{paused:t,ended:i}=e;if(this.playingState.getValue()===xm.PLAY&&t&&!i){const{currentTime:t,duration:i}=e;Ct("DetectVideoPauseByPausedProperty currentTime=["+t+"] duration=["+i+"]"),xd.event({name:"DetectVideoPauseByPausedProperty",data:{currentTime:t,duration:i}}),this.playingState.dispatch(xm.PAUSE)}});this.addDestroyHandler(t),this.addDestroyHandler(i)}subscribeEnded(){const e=d(this.videoNode,"ended",()=>{this.seekController.isSeekingIllegal()||(this.getCurrentTime()+Ym>=this.getDuration()?this.playingState.dispatch(xm.END):Ct("video ended ignored with currentTime=["+this.getCurrentTime()+"] duration=["+this.getDuration()+"]"))},{passive:!0});let t=0,i=NaN;const r=M(()=>{const e=this.getDuration(),r=this.getCurrentTime(),{paused:n}=this.videoNode,o=this.playingState.getValue();if(e>0&&r>=e)return void(o!==xm.END&&(xd.event({name:"DetectVideoEndByCurrentTime",data:void 0}),this.playingState.dispatch(xm.END)));const s=!n&&e>0&&r===i&&e-r<zm&&this.playingState.getValue()===xm.PLAY;i=r,s?t>=Gm?(t=0,o!==xm.END&&(xd.event({name:"DetectVideoEndByStalledOffset",data:void 0}),this.playingState.dispatch(xm.END))):t++:t=0});this.addDestroyHandler(e),this.addDestroyHandler(r)}subscribeBuffering(){let e=a;const t=Rm(this.videoNode,t=>{const i=t?xm.BUFFERING:this.videoNode.paused?xm.PAUSE:xm.PLAY;if(e(),this.playingState.dispatch(i),t&&Qm){const{clear:t,promise:i}=ha(Km);e=t,this.addDestroyHandler(t),i.then(()=>{if("buffering"!==this.playingState.getValue())return;const e=this.getCurrentTime()+Xm;this.setCurrentTime(e);const{currentSrc:t,src:i}=this.videoNode;xd.event({name:"RecoverSafariPlayingHangup",data:{currentSrc:t,src:i,currentTime:this.getCurrentTime(),duration:this.getDuration()}})}).catch(L)}});this.addDestroyHandler(t)}subscribeVolumeChange(){this.addDestroyHandler(d(this.videoNode,"volumechange",()=>{this.onVolumeChange.dispatch(void 0)}))}shouldIgnorePlayRejection(e){if(20!==e.code&&"AbortError"!==e.name)return!1;if(this.isDestroyed)return!0;return Date.now()-this.pauseRequest.getValue()<=jm}}let Zm;!function(e){e.inline="inline",e.pictureInPicture="picture-in-picture"}(Zm||(Zm={}));class $m{constructor(e){this.videoTagAttributes=void 0,this.videoTagProps=void 0,this.sources=[],this.videoNode=void 0,this.restoreVideoPiP=a,this.restoreVideoStyle=a,this.restoreVideoCrossoriginAttribute=a,this.revertVideoNodePosition=()=>!1,this.videoNode=e;const t=kn(e);if(this.videoTagProps={controls:e.controls,loop:e.loop},!t)return;const i=e.getAttribute("poster"),r=e.getAttribute("src")||e.src;this.videoTagAttributes={autoplay:e.getAttribute("autoplay"),controls:e.getAttribute("controls"),height:e.getAttribute("height"),loop:e.getAttribute("loop"),poster:""===i?null:i,preload:e.getAttribute("preload"),src:r||null,width:e.getAttribute("width"),style:e.getAttribute("style")},this.sources=ss(oe(e.getElementsByTagName("source")),e=>({src:e.getAttribute("src"),type:e.getAttribute("type")})),this.restoreVideoPiP=Dn(e),this.restoreVideoCrossoriginAttribute=yr(e,{crossorigin:null}),this.restoreVideoStyle=Nn(e,{objectFit:""});try{this.revertVideoNodePosition=function(e){const{parentElement:t}=e;let i;return t?(i=document.createComment(N(16)),t.insertBefore(i,e),()=>{const{parentElement:r,previousSibling:n}=e;let o=!1;return t===r&&n===i||(t.insertBefore(e,i),o=!0),t.removeChild(i),o}):()=>!1}(e)}catch(c_){xd.error({error:new Ea(c_,{code:"CANNOT_SAVE_VIDEO_NODE_DOM_POSITION"})})}}revert(){const{videoNode:e}=this;e&&(this.videoTagAttributes&&gr(e,this.videoTagAttributes),function(e,t){const i=["controls","loop"];Ja(ae(t),r=>{-1!==i.indexOf(r)&&(e[r]=t[r])})}(e,this.videoTagProps),function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e),Ja(this.sources,t=>{const i=e.ownerDocument.createElement("source");e.appendChild(i),J(t,(e,t)=>{i.setAttribute(t,String(e))})}),this.restoreVideoPiP(),this.restoreVideoCrossoriginAttribute(),this.restoreVideoStyle(),Sr(e,()=>{e.load()}),this.revertVideoNodePosition()&&xd.event({name:"MovedVideoNode",probability:zd,data:{}}),this.destroy())}destroy(){this.videoNode=void 0,this.revertVideoNodePosition=()=>!1}}const eg=.8,tg=1.6,ig=1.2,rg=50,ng=5,og=2,sg=100,ag=1.8,dg=3,lg=.1,cg=.3,ug=.1;class hg{constructor(e,t){this.container=e,this.videoNode=t,this.blurWrapper=void 0,this.canvas=void 0,this.context=void 0,this.isStarted=!1,this.isBlurRequired=void 0,this.framesInterval=sg,this.lastTime=void 0,this.slowFramesCounter=0,this.slowDevice=!1,this.repaintTimeoutId=0,this.rafId=0,this.repaint=()=>{const{duration:e,currentTime:t,videoWidth:i,videoHeight:r}=this.videoNode,n=e-t<=cg;if(!this.isStarted||n)return this.clearRepaintTimeout(),void this.setVisibility(!1);if(!i)return void this.setRepaintTimeout();const{clientWidth:o,clientHeight:s}=this.container,a=i/r,d=a-o/s;if(void 0===this.isBlurRequired){if(this.isBlurRequired=Math.abs(d)>lg,!this.isBlurRequired)return void this.setVisibility(!1);this.prepareBlurCanvas(a,d),this.setVisibility(!0)}const{context:l,videoNode:c}=this,{width:u,height:h}=this.canvas;if(this.slowDevice){const e=og;l.drawImage(c,0,0,i,r,0,0,e,e),l.drawImage(this.canvas,0,0,e,e,0,0,u,h)}else l.drawImage(c,0,0,i,r,0,0,u,h);l.globalAlpha=ug,this.handleSlowDevices(),this.setRepaintTimeout()};const i=document.createElement("div"),r=document.createElement("canvas");this.context=r.getContext("2d"),i.appendChild(r),Ve(e,i),this.blurWrapper=i,this.canvas=r,this.appendStyles()}start(){this.isStarted||(this.isStarted=!0,this.isBlurRequired=void 0,this.repaint(),this.canvas.style.display="")}stop(){this.isStarted=!1,this.isBlurRequired=!1,this.clearRepaintTimeout(),this.setVisibility(!1)}setContainerDisplay(e){this.blurWrapper.style.display=e?"":"none"}destroy(){this.stop(),this.blurWrapper.style.display="none",C(this.blurWrapper)}appendBlurScale(e,t){const i=[tg,Math.max(e,tg)];t&&i.reverse(),this.slowDevice||Jc(this.canvas,{transform:"translate(-50%,-50%) scaleX("+i[0]+") scaleY("+i[1]+")"})}setCanvasOpacity(e){Jc(this.canvas,{opacity:e})}slimplifyBlur(){const e=2*ng,{clientWidth:t,clientHeight:i}=this.container;this.setCanvasSize(t+e,i+e);const r="-"+ng+"px";Jc(this.canvas,{left:r,top:r,transform:"",filter:"blur("+ng+"px)",width:100*(1+e/t)+"%",height:100*(1+e/i)+"%"})}appendStyles(){const e={position:"absolute",margin:0,padding:0,top:0,bottom:0,left:0,right:0,overflow:"hidden"},t=si(this.videoNode).position;-1===Nl(["fixed","absolute"],t)&&(e["z-index"]="-1"),Jc(this.blurWrapper,e),Jc(this.canvas,{position:"absolute",margin:0,padding:0,left:"50%",top:"50%",transform:"translate(-50%,-50%) scaleX("+ig+") scaleY("+ig+")",filter:"blur("+rg+"px)",opacity:0,transition:"opacity 1s"})}setRepaintTimeout(){this.clearRepaintTimeout(),this.repaintTimeoutId=window.setTimeout(()=>this.rafId=_s(this.repaint),this.framesInterval)}clearRepaintTimeout(){clearTimeout(this.repaintTimeoutId),ws(this.rafId)}handleSlowDevices(){const e=Date.now();if(this.lastTime){const t=e-this.lastTime;t>this.framesInterval*ag?(this.slowFramesCounter++,this.slowFramesCounter>=dg&&(this.framesInterval+=t,this.slowFramesCounter=0,this.slowDevice||(this.slowDevice=!0,this.slimplifyBlur()))):this.slowFramesCounter=0}this.lastTime=e}prepareBlurCanvas(e,t){const{container:i,videoNode:r}=this,n=t<0,o=n?r.offsetHeight*e:r.offsetWidth/e,s=n?o:r.offsetWidth,a=n?r.offsetHeight:o,d=(n?i.offsetWidth:i.offsetHeight)/o*eg;this.setCanvasSize(s,a),this.appendBlurScale(d*eg,n)}setCanvasSize(e,t){const{canvas:i}=this;i.width=e,i.height=t}setVisibility(e){this.setCanvasOpacity(e?1:0)}}const pg=-1,fg=-1,Ag={handshakeVersion:"2.0",getAdDuration:-2,getAdRemainingTime:-2,getAdVolume:ga,getAdIcons:!1,getAdExpanded:!1,getAdHeight:vp,getAdWidth:wp,getAdLinear:!0,getAdSkippableState:yp},mg=Rn({},{startAd:void 0,stopAd:void 0,skipAd:void 0,resizeAd:void 0,pauseAd:void 0,resumeAd:void 0,expandAd:void 0,collapseAd:void 0,subscribe:void 0,unsubscribe:void 0,setAdVolume:void 0},{initAd:void 0}),gg=Rn({},Ag,mg),yg={adLinear:0,adWidth:0,adHeight:0,adExpanded:0,adSkippableState:0,adRemainingTime:0,adDuration:0,adVolume:0,adIcons:0},vg={adLinear:"getAdLinear",adWidth:"getAdWidth",adHeight:"getAdHeight",adExpanded:"getAdExpanded",adSkippableState:"getAdSkippableState",adRemainingTime:"getAdRemainingTime",adDuration:"getAdDuration",adVolume:"getAdVolume",adIcons:"getAdIcons"},_g={adVolume:"setAdVolume"},wg={getAdUnitId:0};class Eg{constructor(){this.isStarted=!1,this.lastStartTime=void 0,this.spent=0,this.callbacks=[],this.timeoutId=0,this.recalculateTimeAndDispatchCallbacks=()=>{if(!this.isStarted)return;const e=Date.now();if(this.spent+=e-this.lastStartTime,this.lastStartTime=e,this.dispatchCallbacksByTime(),this.callbacks.length<=0)return;const{time:t}=this.callbacks[0];window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(this.recalculateTimeAndDispatchCallbacks,t-this.spent)}}start(){this.isStarted||(this.isStarted=!0,this.lastStartTime=Date.now(),this.recalculateTimeAndDispatchCallbacks())}stop(){this.isStarted&&(window.clearTimeout(this.timeoutId),this.isStarted=!1,this.spent+=Date.now()-this.lastStartTime)}getTime(){return this.isStarted?Date.now()-this.lastStartTime+this.spent:this.spent}addCallback(e,t){e<=this.getTime()&&this.isStarted?t():(this.addCallbackToArray(e,t),this.recalculateTimeAndDispatchCallbacks())}waitForTime(e){return new Promise(t=>{this.addCallback(e,t)})}addCallbackToArray(e,t){const i={time:e,callback:t};for(let r=0;r<this.callbacks.length;r++){const{time:t}=this.callbacks[r];if(t>=e)return void this.callbacks.splice(r,0,i)}this.callbacks.push(i)}dispatchCallbacksByTime(){const[e,t]=De(this.callbacks,e=>{let{time:t}=e;return t<=this.spent});this.callbacks=t,e.forEach(e=>{let{callback:t}=e;t()})}}class Sg{setTimeout(e,t){const i=window.setTimeout(e,t);return()=>window.clearTimeout(i)}now(){return Date.now()}}class bg{constructor(e,t){void 0===t&&(t=new Sg),this.distributionFunction=e,this.clock=t,this.stopped=!0,this.cancel=void 0,this.lastNow=0,this.lastKnockTime=void 0,this.lastTimeout=0,this.restTime=0,this.destroyed=!1,this.isFirstKnock=!0,this.count=0}setEnabled(e){return e?this.start():this.stop(),this}stop(){return this.stopped||(this.stopped=!0,this.cancelTimeout(),this.restTime=Math.max(this.restTime-(this.clock.now()-this.lastKnockTime),0)),this}start(){return this.stopped&&!this.destroyed&&(this.stopped=!1,this.lastKnockTime=this.clock.now(),this.cancel=this.clock.setTimeout(()=>{this.knock(this.lastNow+this.lastTimeout)},this.restTime)),this}destroy(){this.cancelTimeout(),this.stopped=!0,this.destroyed=!0}knock(e){this.lastNow=e,this.lastKnockTime=this.clock.now(),this.isFirstKnock?this.isFirstKnock=!1:this.count++;const t=this.restTime=this.lastTimeout=this.distributionFunction({time:e,count:this.count});this.stopped||this.destroyed||(this.cancel=this.clock.setTimeout(()=>{this.knock(e+t)},t))}cancelTimeout(){this.cancel&&this.cancel(),this.cancel=void 0}}class Tg extends Zs{constructor(){super(),this.bufferingTimeCount=void 0,this.isPlaying=new ea(!1),this.isBuffering=new ea(!1),this.bufferingTimeCount=new Eg}start(e){this.isPlaying.dispatch(!0),this.addDestroyHandler(Rm(e,e=>{this.isBuffering.dispatch(e)})),this.addDestroyHandler(mr([this.isPlaying,this.isBuffering],(e,t)=>e&&t,e=>{e?this.bufferingTimeCount.start():this.bufferingTimeCount.stop()}))}pause(){this.isPlaying.dispatch(!1)}resume(){this.isPlaying.dispatch(!0)}getBufferingTime(){return this.bufferingTimeCount.getTime()/vd}}const Cg="Yandex creative cannot be played in a third-party environment, use Video Ads SDK https://yandex.ru/dev/video-sdk/",kg={AdSkipped:"skip",AdStarted:"creativeView",AdImpression:"impression",AdVideoFirstQuartile:"firstQuartile",AdVideoMidpoint:"midpoint",AdVideoThirdQuartile:"thirdQuartile",AdVideoComplete:"complete",AdClickThru:"clickThrough",AdUserAcceptInvitation:"acceptInvitation",AdUserMinimize:"collapse",AdUserClose:"close",AdPaused:"pause",AdPlaying:"resume"},{initMoatTracking:Ig}=i(50),Pg=ae({AdLoaded:0,AdStarted:0,AdStopped:0,AdSkipped:0,AdSkippableStateChange:0,AdSizeChange:0,AdLinearChange:0,AdDurationChange:0,AdExpandedChange:0,AdRemainingTimeChange:0,AdVolumeChange:0,AdImpression:0,AdVideoStart:0,AdVideoFirstQuartile:0,AdVideoMidpoint:0,AdVideoThirdQuartile:0,AdVideoBeforeComplete:0,AdVideoComplete:0,AdClickThru:0,AdInteraction:0,AdUserAcceptInvitation:0,AdUserMinimize:0,AdUserClose:0,AdPaused:0,AdPlaying:0,AdLog:0,AdError:0});class Ng{constructor(){var e=this;this.events={},this.subscribe=(e,t,i)=>{if("string"!==typeof t)throw new Error("Event name MUST be a string");if("function"!==typeof e)throw new Error("Event listener MUST be a function");let r=this.events[t];r||(r=this.events[t]=[]),r.push({callback:e,context:i})},this.unsubscribe=(e,t)=>{if("string"!==typeof t)throw new Error("Event name MUST be a string");if("function"!==typeof e)throw new Error("Event listener MUST be a function");const i=this.events[t];i&&(this.events[t]=Es(i,t=>{let{callback:i}=t;return e!==i}))},this.dispatch=function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];if("string"!==typeof t)throw new Error("Event name MUST be a string");const o=e.events[t];o&&Ja(o,e=>{let{callback:i,context:n}=e;try{i.apply(n,r)}catch(u_){xd.error({error:new Ea(u_,{code:"VpaidEventBusCallbackError",details:{vpaidEventName:t,params:r}})})}})}}}i(51);const Dg=WBViewAbility,Og=8,Rg="https://yastatic.net/pcode-static/measurers/35/video/adloox.js",Vg="https://verify.yandex.ru/verify_adloox?platformid=3&platform=206",Bg=sd.split("/"),Mg=Bg[Bg.length-1],{initMoatTracking:xg}=i(52),Lg={AdStopped:0,AdVideoStart:0,AdVideoFirstQuartile:0,AdVideoMidpoint:0,AdVideoThirdQuartile:0,AdVideoComplete:0,AdPaused:0,AdPlaying:0,AdVolumeChange:0},Fg="yandexhostedvideo786420153684",Ug=async e=>{let{vpaidCreative:t,slot:i,measurerParameters:r}=e;await Ye({src:"https://yastatic.net/pcode-static/measurers/1/main.js"}),verify(i,{vpaidCreative:t,measurerParameters:r})},Hg={adriver:async e=>{let{vpaidCreative:t,slot:i,measurerParameters:r}=e;const n=i.ownerDocument.defaultView;await Ye({win:n,src:"https://yastatic.net/pcode-static/measurers/28/video/adriver.js"}),Ct("adriver measurer loaded",new n.AdriverViewabilityYandexVPAID(Mn({},r,{ya_custom:"ADSID="+Ba}),i,t))},moat:async function(e){let{vpaidCreative:t,slot:i,measurerParameters:r,onMeasurerError:n}=e;const o=xg(i,xn({},r,{zMoatADID:Ba,slicer1:Mg,partnerCode:Fg}),t.getAdDuration(),Fg);Ja(ae(Lg),e=>{t.subscribe(()=>{try{o.dispatchEvent({type:e,adVolume:t.getAdVolume()})}catch(c_){n(new Ea({code:"MOAT_DISPATCH_EVENT_ERROR",details:{error:c_,eventName:e}}))}},e)})},adloox:async function(e){let{vpaidCreative:t,slot:i,measurerParameters:r,onMeasurerError:n}=e;const o=((s=i).id||(s.id=N(Og)),s.id);var s;const a=ca(de(Bn({},r,{targetelt:o,urli:Vg,urlv:Vg,urle:Vg},{id8:Ba})),(e,t,i)=>{let[r,n]=t;return"string"!==typeof n?e:e+(0===i?"#":"&")+r+"="+encodeURIComponent(n)},"");t.subscribe(()=>{const e=""+Rg+a;Ye({win:i.ownerDocument.defaultView,src:e}).catch(e=>{n(new Ea({code:"ADLOOX_SCRIPT_LOADING_ERROR",details:{error:e}}))})},"AdStarted")},admetrica:Ug,sizmek:Ug,weborama:async e=>{let{vpaidCreative:t,slot:i,measurerParameters:r}=e;const n=i.ownerDocument.defaultView;await Ye({win:n,src:"https://yastatic.net/pcode-static/measurers/42/video/weborama.js"}),Ct("weborama measurer loaded",new n.WBMeasurerV(i,t,JSON.stringify(Ln({},r,{siteid:Ba}))))}},zg=3e4,Gg=ae(Hg),Wg={1:[],2:[],3:[],5:[]};class jg extends Zs{constructor(e,t,i){var r;super(),r=this,this.vpaidCreative=e,this.parameters=t,this.callbacks=i,this.playingStateValueSignal=new ea(!1),this.bufferingTimeManager=void 0,this.slotVisibilityStateValueSignal=new ea(!1),this.slotHoverStateValueSignal=new ea(!1),this.vpaidInitParameters=void 0,this.measurerStartParameters=void 0,this.shouldPlayTimeCounter=new Eg,this.lastVolume=void 0,this.vpaidEventBus=new Ng,this.isVisibilityConfirmed=!1,this.initMeasurableParameters=Q(e=>{const t=e[4];if(!p(t))throw new Ea({code:"VPAID_MEASURER_INVALID_CREATIVE_DATA",details:void 0});const{AdParameters:i}=t,r=e[5];if(!p(r)||!p(r.slot))throw new Ea({code:"VPAID_MEASURER_INVALID_ENVIRONMENT_VARS",details:void 0});const{slot:n,videoSlot:o,yandexAdPlaybackParams:s}=r;this.bufferingTimeManager.start(o);const{parameters:a,errors:d}=function(e){if(!e)return{parameters:void 0,errors:[new Ea({code:"AD_PARAMETERS_ABSENT_IN_MEASURER",details:{adParametersString:e}})]};let t={};try{t=JSON.parse(e)}catch(c_){return{parameters:void 0,errors:[new Ea({code:"INVALID_AD_PARAMETERS_JSON_IN_MEASURER",details:{adParametersString:e}})]}}const{viewability:i,encounters:r,dwell:n,start:o,trackingEvents:s,viewedComplete:a,weborama:d,moat:l}=t,{measurers:c,errors:u}=zn(t);return{parameters:{measurers:c,viewability:Gn(i),dwell:Gn(n),trackingEvents:vt(yt(s),{encounters:Fn(r),viewedComplete:Fn(a),start:Fn(o)}),weborama:d,moat:jn(l),skipAdSdkDetect:Wn(t)},errors:u}}(i);if(Ja(d,this.callbacks.onExecutionError),!a)throw new Ea({code:"VPAID_MEASURER_AD_PARAMETERS_ERROR",details:{adParameters:i}});const{skipAdSdkDetect:l}=a;if(!p(s)){const e=new Ea({code:l?"LEGAL_DIRECT_AD_PLAYING":"ILLEGAL_DIRECT_AD_PLAYING",message:Cg,details:{adParameters:i}});if(this.callbacks.onExecutionError(e),!l)throw e}this.vpaidInitParameters={slot:n,videoSlot:o,adParameters:a},this.initMeasurers()}),this.initMeasurers=Q(()=>{const{vpaidInitParameters:e,measurableVpaidCreative:t}=this;if(!e||!t)return this.callbacks.onExecutionError(new Ea({code:"ATTEMPT_TO_INIT_MEASURERS_WITHOUT_PARAMETERS",details:{measurableVpaidExists:Boolean(t),vpaidInitParametersExist:Boolean(e)}})),Promise.resolve();const{adParameters:{measurers:i,weborama:r,moat:n},slot:o}=e;if(r&&"string"===typeof r.wbStatData)try{(new Dg).init(o,r.wbStatData,t)}catch(c_){this.callbacks.onExecutionError(new Ea(c_,{code:"WEBORAMA_INIT_ERROR",details:void 0}))}if(n){const{partnerCode:e,ids:i}=n;try{!function(e,t,i,r){Ig(e,t,i,r)}(t,o,i,e)}catch(c_){this.callbacks.onExecutionError(new Ea(c_,{code:"INIT_MOAT_TRACKING_ERROR",details:{ids:i,partnerCode:e}}))}}return Promise.all(ss(ae(i),async e=>{const r=i[e],n=Hg[e];try{await n({vpaidCreative:t,slot:o,measurerParameters:r,onMeasurerError:e=>{this.callbacks.onExecutionError(e)}}),this.callbacks.onInitMeasurer({measurerName:e,measurableVpaidCreative:t,slot:o,measurerParameters:r})}catch(c_){this.callbacks.onExecutionError(new Ea({code:"MEASURER_INIT_ERROR",details:{measurerName:e,measurerParameters:r,error:new Ns(c_)}}))}}))}),this.trackEncounters=Q(e=>{this.vpaidInitParameters?(this.isVisibilityConfirmed=!0,this.trackEvent("encounters",this.getTrackingUrlsByTrackingEventName("encounters"),{reason:e}),this.vpaidEventBus.dispatch("AdImpression"),this.trackEvent("impression",this.getTrackingUrlsByTrackingEventName("impression"),void 0)):this.callbacks.onExecutionError(new Ea({code:"VPAID_MEASURER_CANNOT_TRACK_ENCOUNTERS_BEFORE_START",details:{eventName:"encounters"}}))}),this.trackTrueView=Q(e=>{this.trackEvent("trueView",this.getTrackingUrlsByTrackingEventName("trueView"),{reason:e})}),this.startMeasurement=Q(()=>{const{vpaidInitParameters:e}=this;if(!e)return void this.destroy({error:new Ea({code:"VPAID_MEASURER_NO_PARAMS_ON_START",details:void 0})});const{slot:t,adParameters:i}=e,{viewability:r,dwell:n}=i;this.addDestroyHandler(function(e,t){let i=function(e){if(!e)return!1;const{parentElement:t}=e;return!(!t||"function"!==typeof t.querySelector)&&t.querySelector(":hover")===e}(e);i&&t(!0);const r=d(e,"mouseenter",()=>{i||(i=!0,t(!0))}),n=d(e,"mouseleave",()=>{i&&(i=!1,t(!1))});return()=>{r(),n()}}(t,e=>{this.slotHoverStateValueSignal.dispatch(e)}));const o=new na(t),s=o.getSize();this.callbacks.onSlotSizeChange(s);const a=new ea(Sn(s));o.onResize.add(e=>{this.callbacks.onSlotSizeChange(e),a.dispatch(Sn(e))});const l=new Uh(t,{numberOfMeasurementSteps:Ep});this.measurerStartParameters={slotSizeSensor:o,slotVisibilitySensor:l},this.addDestroyHandler(l.onChangeVisibility(e=>{this.slotVisibilityStateValueSignal.dispatch(e)})),this.addDestroyHandler(()=>{l.destroy(),o.destroy()});const c=new bg(e=>{let{count:t}=e;return 1===t&&(c.destroy(),this.trackTrueView("progress")),zg}),u=new bg(e=>{let{count:t}=e;const i=function(e){return e>3?{eventName:"viewability5",intervalId:5}:1===e?{eventName:"viewability1",intervalId:1}:2===e?{eventName:"viewability2",intervalId:2}:3===e?{eventName:"viewability3",intervalId:3}:void 0}(t);return void 0!==i&&(this.trackEvent(i.eventName,r[i.intervalId],void 0),2===t&&this.trackEncounters("viewability")),Yn(t)}),h=new bg(e=>{let{count:t}=e;const i=function(e){return e>3?{eventName:"dwell5",intervalId:5}:1===e?{eventName:"dwell1",intervalId:1}:2===e?{eventName:"dwell2",intervalId:2}:3===e?{eventName:"dwell3",intervalId:3}:void 0}(t);return void 0!==i&&this.trackEvent(i.eventName,n[i.intervalId],void 0),Yn(t)});this.addDestroyHandler(()=>{c.destroy(),u.destroy(),h.destroy()}),this.addDestroyHandler(this.playingStateValueSignal.add(e=>{c.setEnabled(e)})),this.addDestroyHandler(mr([this.playingStateValueSignal,this.slotVisibilityStateValueSignal,a],(e,t,i)=>e&&t&&i,e=>{u.setEnabled(e)})),this.addDestroyHandler(mr([this.playingStateValueSignal,this.slotVisibilityStateValueSignal,this.slotHoverStateValueSignal,a],(e,t,i,r)=>e&&t&&i&&r,e=>{h.setEnabled(e)}))}),this.methodSniffers={subscribe:this.vpaidEventBus.subscribe,unsubscribe:this.vpaidEventBus.unsubscribe},this.eventSniffers={AdLoaded:()=>{this.initMeasurers().then(()=>{this.vpaidEventBus.dispatch("AdLoaded")}).catch(L)}},this.measurableVpaidCreative=void 0,this.vpaidWillSetProperty=(e,t)=>{this.vpaidCreative[e]=t},this.vpaidWillCallMethod=(e,t)=>{if(this.updatePlayTimeCounter(e),"initAd"===e)try{this.initMeasurableParameters(t)}catch(c_){return this.vpaidEventBus.dispatch("AdError",c_),void this.destroy({error:c_})}switch(e){case"startAd":this.startMeasurement();break;case"stopAd":this.destroy({reason:e})}const i=this.methodSniffers[e];return i?i(...t):this.vpaidCreative[e].apply(this.vpaidCreative,t)},this.measurableVpaidDidCreate=e=>{this.measurableVpaidCreative=e},this.updatePlayTimeCounter=e=>{switch(e){case"startAd":case"resumeAd":return this.shouldPlayTimeCounter.start();case"pauseAd":return this.shouldPlayTimeCounter.stop();default:return}},this.trackEvent=function(e,t,i){if(void 0===t&&(t=[]),Ct("Track VPAIDMeasurer event=["+e+"]"),!r.vpaidInitParameters||!r.measurerStartParameters)return void r.callbacks.onExecutionError(new Ea({code:"VPAID_MEASURER_CANNOT_TRACK_EVENT_BEFORE_START",details:{eventName:e}}));const{slotSizeSensor:n,slotVisibilitySensor:o}=r.measurerStartParameters,s={eventName:e,trackingEventDetails:i,trackingUrls:t,options:Tn({slotSize:n.getSize(),slotVisibilityRatio:o.getVisibilityRatio(),videoNode:r.vpaidInitParameters.videoSlot,bufferingTime:r.bufferingTimeManager.getBufferingTime()})};Vi(s),r.callbacks.onTrackEvent(s)},this.playingStateValueSignal.add(i.onPlayingStateChange),this.slotVisibilityStateValueSignal.add(i.onSlotVisibilityStateChange),this.slotHoverStateValueSignal.add(i.onSlotHoverStateChange),this.bufferingTimeManager=new Tg,this.addDestroyHandler(()=>this.bufferingTimeManager.destroy()),this.addDestroyHandler(e=>{i.onStop(e),Ja([this.playingStateValueSignal,this.slotVisibilityStateValueSignal,this.slotHoverStateValueSignal],e=>{e.dispatch(!1),e.removeAll()})}),this.addDestroyHandler(()=>{this.shouldPlayTimeCounter.stop()}),this.subscribeVPAIDEvents()}subscribeVPAIDEvents(){var e=this;Ja(Pg,t=>{this.vpaidCreative.subscribe((function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];e.vpaidDidDispatchEvent(t,r)}),t)})}vpaidDidDispatchEvent(e,t){const i=kg[e];if(i&&this.trackEvent(i,this.getTrackingUrlsByTrackingEventName(i),void 0),"AdVideoStart"===e&&this.onAdVideoStart(),"AdVideoComplete"===e&&(this.isVisibilityConfirmed&&this.trackEvent("viewedComplete",this.getTrackingUrlsByTrackingEventName("viewedComplete"),void 0),this.trackTrueView("complete")),"AdError"===e){const e=this.getTrackingUrlsByTrackingEventName("error"),i={error:new Ea({code:"VPAID_MEASURER_AD_ERROR",details:{args:t}}),trackingUrls:e};Ct("Track VPAIDMeasurer event=[error]"),kt(i),this.callbacks.onAdError(i)}if("AdStarted"===e&&(this.lastVolume=this.vpaidCreative.getAdVolume()),"AdClickThru"===e&&(this.trackEncounters("click"),this.trackTrueView("click")),"AdVolumeChange"===e&&"number"===typeof this.lastVolume){const e=this.vpaidCreative.getAdVolume();0===e&&this.lastVolume>0&&this.trackEvent("mute",this.getTrackingUrlsByTrackingEventName("mute"),void 0),e>0&&0===this.lastVolume&&this.trackEvent("unmute",this.getTrackingUrlsByTrackingEventName("unmute"),void 0),this.lastVolume=e}switch(e){case"AdStarted":case"AdPlaying":this.playingStateValueSignal.dispatch(!0),this.bufferingTimeManager.resume();break;case"AdPaused":this.playingStateValueSignal.dispatch(!1),this.bufferingTimeManager.pause();break;case"AdStopped":case"AdError":case"AdSkipped":this.destroy({reason:e})}const r=this.eventSniffers[e];r?r(...t):this.vpaidEventBus.dispatch(e,...t)}getTrackingUrlsByTrackingEventName(e){if(!this.vpaidInitParameters)return[];const{adParameters:{trackingEvents:t}}=this.vpaidInitParameters,i=t[e];return Array.isArray(i)?ss(i,t=>{const i=this.getConsumerAdditionalTrackingParams(e,t);return p(i)?re(t,i,{override:!1}):t}):[]}getConsumerAdditionalTrackingParams(e,t){const i=F(()=>this.parameters.getAdditionalTrackingParameters({eventName:e,url:t}));return p(i)&&ae(i).length?i:null}onAdVideoStart(){this.measurerStartParameters?this.trackEvent("start",this.getTrackingUrlsByTrackingEventName("start"),{timeToStart:this.shouldPlayTimeCounter.getTime()}):this.callbacks.onExecutionError(new Ea({code:"VPAID_AD_VIDEO_START_BEFORE_START_AD_CALL",details:void 0}))}}const Yg=()=>!1,qg=()=>!1,Kg=e=>"2.0",Xg=15e4,Qg={complete:"AdVideoComplete",skip:"AdSkipped",close:"AdUserClose",stopAd:"AdStopped"};class Jg extends Zs{constructor(e){super(),this.params=e,this.vpaidEventBus=new Ng,this.handshakeVersion=Kg,this.subscribe=this.vpaidEventBus.subscribe,this.unsubscribe=this.vpaidEventBus.unsubscribe,this.resizeAd=a,this.pauseAd=a,this.resumeAd=a,this.expandAd=a,this.collapseAd=a,this.setAdVolume=a,this.getAdIcons=qg,this.getAdExpanded=Yg,this.closeAd=a,this.initAd=Q((e,t,i,r,n,o)=>{this.slot=o.slot,this.vpaidEventBus.dispatch("AdLoaded")}),this.slot=void 0,this.getAdVolume=()=>ga,this.getAdHeight=()=>vp,this.getAdWidth=()=>wp,this.getAdLinear=()=>!1,this.getAdDuration=()=>{const{getAdDuration:e}=this.params.adCreative;return h(e)?e():pg},this.getAdRemainingTime=()=>{const{getAdRemainingTime:e}=this.params.adCreative;return h(e)?e():fg},this.getAdSkippableState=()=>!0,this.addDestroyHandler(Q(()=>{this.vpaidEventBus.dispatch("AdStopped"),this.params.adCreative.stopAd()}))}startAd(){var e=this;this.vpaidEventBus.dispatch("AdStarted"),this.vpaidEventBus.dispatch("AdVideoStart");const{slot:t}=this;if(!t)throw new Ea({code:"AD_CREATIVE_START_WITHOUT_SLOT",details:void 0});const{adCreative:i,slotSizeSensor:r}=this.params,n=i.startAd({slot:t,callbacks:{AdClickThru:this.ignoreAfterDestroy((function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];e.vpaidEventBus.dispatch("AdClickThru",...i)})),AdVideoFirstQuartile:this.ignoreAfterDestroy(Q(()=>{this.vpaidEventBus.dispatch("AdVideoFirstQuartile")})),AdVideoMidpoint:this.ignoreAfterDestroy(Q(()=>{this.vpaidEventBus.dispatch("AdVideoMidpoint")})),AdVideoThirdQuartile:this.ignoreAfterDestroy(Q(()=>{this.vpaidEventBus.dispatch("AdVideoThirdQuartile")})),AdVideoBeforeComplete:this.ignoreAfterDestroy(Q(()=>{this.vpaidEventBus.dispatch("AdVideoBeforeComplete")}))},size:r.getSize()});if(this.addDestroyHandler(r.onResize.add(e=>{h(i.resizeAd)&&i.resizeAd(e)})),!la(n))throw new Ea({code:"OVERLAY_CREATIVE_START_AD_RETURNS_NON_PROMISE_RESULT",details:void 0});const{promise:o,clear:s}=ha(Xg);o.then(()=>{this.vpaidEventBus.dispatch("AdError",new Ea({code:"OVERLAY_MAX_PLAYING_DURATION_REACHED",details:void 0})),this.destroy()}).catch(L),this.addDestroyHandler(s),n.then(this.ignoreAfterDestroy(e=>{let t="AdVideoComplete";p(e)&&e.reason&&Qg[e.reason]&&(t=Qg[e.reason]),this.vpaidEventBus.dispatch(t),this.destroy()})).catch(this.ignoreAfterDestroy(e=>{this.vpaidEventBus.dispatch("AdError",e),this.destroy()}))}stopAd(){this.destroy()}skipAd(){this.vpaidEventBus.dispatch("AdSkipped"),this.stopAd()}}const Zg={OverlayTGO:"https://yastatic.net/awaps-ad-sdk-js/1_0/overlay_tgo.js",MotionTGO:"https://yastatic.net/awaps-ad-sdk-js/1_0/motion_ad_creative.js"},$g=(e,t)=>new Promise((i,r)=>{$e({moduleName:e,version:void 0,onSuccess:e=>{i(e.initAdCreative)},onError:e=>{r(e)},win:t})});class ey extends Zs{constructor(e){super(),this.params=e,this.promise=void 0,this.promise=this.loadAdCreative().catch(e=>{throw this.destroy(),e})}async loadAdCreative(){const{slotSizeSensor:e,adParametersString:t,mediaFile:i,slot:r,isNonLinear:n,scriptWindow:o}=this.params;let s,a,d;try{s=await async function(e){let{url:t,win:i,isNonLinear:r}=e;const n=r?"OverlayTGO":"MotionTGO";return t===Zg[n]?$g(n,i):Xe({src:t,win:i}).then(()=>i.initAdCreative)}({url:i.url,win:o,isNonLinear:n})}catch(c_){throw new Ea(c_,{code:n?"CANNOT_LOAD_OVERLAY_MEDIA_FILE":"CANNOT_LOAD_LINEAR_AD_CREATIVE_MEDIA_FILE",details:this.getAdCreativeErrorDetails()})}if("function"!==typeof s)throw new Ea({code:n?"OVERLAY_INIT_IS_NOT_A_FUNCTION":"LINEAR_AD_CREATIVE_INIT_IS_NOT_A_FUNCTION",details:this.getAdCreativeErrorDetails()});try{a=s({adParametersString:t,slot:r})}catch(u_){throw new Ea(u_,{code:n?"OVERLAY_INIT_CALL_ERROR":"LINEAR_AD_CREATIVE_INIT_CALL_ERROR",details:this.getAdCreativeErrorDetails()})}if(!la(a))throw new Ea({code:n?"OVERLAY_INIT_RETURNS_NON_PROMISE_RESULT":"LINEAR_AD_CREATIVE_INIT_RETURNS_NON_PROMISE_RESULT",details:this.getAdCreativeErrorDetails()});try{d=await a}catch(u_){throw new Ea(u_,{code:n?"OVERLAY_INIT_ERROR":"LINEAR_AD_CREATIVE_INIT_ERROR",details:this.getAdCreativeErrorDetails()})}const l=Kn({adCreative:d,slotSizeSensor:e});return this.destroy(),l}getAdCreativeErrorDetails(){const{adParametersString:e,mediaFile:t}=this.params;return{mediaFile:t,adParametersString:e}}}const ty=100,iy={position:"absolute",width:"100%",height:"100%",left:"0",top:"0"},ry=20;class ny{constructor(e){this.trackingUrls={portion:[],seconds:[]},Ja(e,e=>{let{urls:t,offset:{unit:i,value:r}}=e;this.trackingUrls[i].push({urls:[...t],offset:r})})}getTrackingUrlsByPosition(e){let{duration:t,remainingTime:i}=e;if(!t)return[];const r=t-i,n={portion:r/t,seconds:r},o=[];return Ja(kc,e=>{const t=this.getTrackingUrlsByUnitAndOffset(e,n[e]);o.push(...t)}),o}getTrackingUrlsByUnitAndOffset(e,t){const[i,r]=De(this.trackingUrls[e],e=>{let{urls:i,offset:r}=e;return t>=r});return this.trackingUrls[e]=r,Ne(ss(i,e=>{let{urls:t}=e;return t}))}}class oy extends Zs{get contentType(){return this.mediaAd.contentType}constructor(e){let{adDisplayController:t,mediaAd:i,viewerPlaybackParams:r}=e;super(),this.adDisplayController=void 0,this.mediaAd=void 0,this.viewerPlaybackParams=void 0,this.onCurrentPositionChange=new $s,this.playingState=new ea("idle",(e,t)=>"idle"===t?(xd.error({error:new Ea({code:"ATTEMPT_TO_CHANGE_PLAYING_STATE_TO_IDLE",details:void 0})}),!0):"end"===e?("end"!==t&&xd.error({error:new Ea({code:"ATTEMPT_TO_CHANGE_PLAYING_STATE_AFTER_END",details:void 0})}),!0):e===t),this.isCreativeStartRequested=new ea(!1),this.onReady=new $s,this.onVpaidStop=new $s,this.isStarted=new ea(!1),this.onResume=new $s,this.onPause=new $s,this.onVolumeChange=new $s,this.onImpression=new $s,this.onFirstQuartile=new $s,this.onMidpoint=new $s,this.onThirdQuartile=new $s,this.onBeforeComplete=new $s,this.onClickThrough=new $s,this.playingTimeCounter=new Eg,this.shouldPlayTimeCounter=new Eg,this.bufferingTimeManager=void 0,this.addDestroyHandler(e=>{this.onVpaidStop.dispatch(e)}),this.adDisplayController=t,this.mediaAd=i,this.viewerPlaybackParams=r,this.isStarted.add(()=>{this.trackEvent("creativeView",void 0)}),this.onResume.add(()=>{this.trackEvent("resume",void 0)}),this.onPause.add(()=>{this.trackEvent("pause",void 0)});let n=0===this.getVolume();this.onVolumeChange.add(()=>{const e=0===this.getVolume();n!==e&&(this.trackEvent(e?"mute":"unmute",void 0),n=e)}),this.onImpression.addOne(()=>{this.trackEvent("impression",void 0)});const o=new ny(i.vastAd.progressTrackings);this.onCurrentPositionChange.add(e=>{let{currentTime:t,duration:i}=e;const r=o.getTrackingUrlsByPosition({duration:i,remainingTime:i-t});r.length&&xi({eventName:"progress",trackingEventDetails:void 0,trackingUrls:r,options:this.adDisplayController.getAdPlacementOptions()})}),this.onFirstQuartile.add(()=>{this.trackEvent("firstQuartile",void 0)}),this.onMidpoint.add(()=>{this.trackEvent("midpoint",void 0)}),this.onThirdQuartile.add(()=>{this.trackEvent("thirdQuartile",void 0)}),this.bufferingTimeManager=new Tg,this.addDestroyHandler(()=>this.bufferingTimeManager.destroy()),this.playingState.subscribeValueConditionOnce(e=>"play"===e,()=>{this.shouldPlayTimeCounter.start(),this.bufferingTimeManager.start(t.videoNode),this.playingState.add(e=>{"play"!==e?(this.shouldPlayTimeCounter.stop(),this.bufferingTimeManager.pause()):(this.shouldPlayTimeCounter.start(),this.bufferingTimeManager.resume())})}),this.isStarted.addOne(()=>{const e=(this.getDuration()+ry)*vd;this.playingTimeCounter.addCallback(e,()=>{this.trackError(new Ea({code:"TOO_LONG_PLAYING",details:{src:this.getSrc()}}))}),this.playingTimeCounter.start(),this.onPause.add(()=>{this.playingTimeCounter.stop()}),this.onResume.add(()=>{this.playingTimeCounter.start()}),this.addDestroyHandler(()=>{this.playingTimeCounter.stop()})}),this.isStarted.add(()=>{this.playingState.dispatch("play")}),this.onPause.add(()=>{this.playingState.dispatch("pause")}),this.onResume.add(()=>{this.playingState.dispatch("play")}),this.addDestroyHandler(()=>{this.playingState.dispatch("end")}),this.onBeforeComplete.add(()=>{this.trackEvent("beforeComplete",void 0)}),this.addDestroyHandler(e=>{let{reason:t}=e;"complete"!==t&&"skip"!==t&&"close"!==t||this.trackEvent(t,void 0)}),this.addDestroyHandler(()=>{this.isStarted.removeAll(),this.onResume.removeAll(),this.onPause.removeAll(),this.playingState.removeAll(),this.onCurrentPositionChange.removeAll(),this.onFirstQuartile.removeAll(),this.onMidpoint.removeAll(),this.onThirdQuartile.removeAll(),this.onVolumeChange.removeAll()})}trackEvent(e,t){this.adDisplayController.onAdPodTrackingEvent.dispatch(e),this.mediaAd.trackEvent(e,this.adDisplayController.getAdPlacementOptions(),t)}trackStartEvent(){this.isCreativeStartRequested.getValue()||xd.error({error:new Ea({code:"TRACK_START_BEFORE_PLAY",details:{isVPAID:this.mediaAd.contentType===Iu.js}})});let e=this.shouldPlayTimeCounter.getTime();e<0&&(e=fa),this.trackEvent("start",{timeToStart:e})}trackError(e){this.mediaAd.trackError(e)}clickThrough(e){var t=this;void 0===e&&(e={});const{playerHandles:i=!0}=e,{clickThroughUrl:r}=this.viewerPlaybackParams;let n;e.url?n=e.url:r&&(n=r);const{pauseOnClickThrough:o,clickThroughConfirmation:s}=this.adDisplayController.config,{clickThroughCallback:a}=this.adDisplayController.config;if(!Boolean(a||n)||!i)return void this.trackEvent("clickThrough",void 0);n&&(n=dt({url:Zn(n),options:this.adDisplayController.getAdPlacementOptions()}));const d=Q((function(i){if(void 0===i&&(i=!1),o&&(t.pause(),i)){const e=b(window.document,i=>{i&&(t.resume(),e())});t.addDestroyHandler(e)}t.trackEvent("clickThrough",void 0),t.onClickThrough.dispatch({adWasPaused:Boolean(o)}),a&&Wd&&xd.event({name:"ClickThroughCallbackHandle",probability:zd,data:{clickThroughParams:e,url:n,pauseOnClickThrough:o}})}));if(a)s||d(),a({url:n,onHandle:d}),xd.event({name:"ClickThroughCallbackCall",probability:zd,data:{clickThroughParams:e,url:n,pauseOnClickThrough:o}});else{null!==window.open(n,"_blank")&&d(!0)}}isClickable(){return Boolean(this.viewerPlaybackParams.isClickable)}getBufferingTime(){return this.bufferingTimeManager.getBufferingTime()}isJSVpaidViewer(){return void 0!==this.mediaAd.getJSMediaFile()}}const sy=["idle","load","init","start","play"];const ay="2.0";class dy extends oy{static isVPAIDCreative(e){return e&&"function"===typeof e.handshakeVersion&&"function"===typeof e.initAd&&"function"===typeof e.startAd&&"function"===typeof e.stopAd&&"function"===typeof e.skipAd&&"function"===typeof e.resizeAd&&"function"===typeof e.pauseAd&&"function"===typeof e.resumeAd&&"function"===typeof e.expandAd&&"function"===typeof e.collapseAd&&"function"===typeof e.subscribe&&"function"===typeof e.unsubscribe}static isSupportedVersion(e){const t=ss(ay.split("."),e=>parseInt(e,10)),i=ss(e.split("."),e=>parseInt(e,10));for(let r=0;r<i.length;r++){const e=i[r],n=t[r],o="undefined"===typeof n?0:n;if(e>o)return!1;if(e<o)return!0}return!0}constructor(e){super(e),this.onAdSkippableStateChange=new $s,this.creative=void 0,this.adSkippableState=!1,this.lifeCycleStage=new ea("idle",(e,t)=>{const i=sy.indexOf(e);return sy.indexOf(t)-i!==1&&xd.error({error:new Ea({code:"CREATIVE_STAGES_SEQUENCE_VIOLATED",details:to({},this.getVPAIDLogDetails(),{currentStage:e,nextStage:t})})}),!1}),this.startVpaidCreative=Q(e=>{this.isCreativeStartRequested.dispatch(!0),this.lifeCycleStage.dispatch("start"),Ct("VPAID.startAd() called in startVpaidCreative method"),e.startAd();const t=this.shouldPlayTimeCounter.getTime();e.subscribe(Q(()=>{Ct("VPAID dispatched AdStarted");const e=this.shouldPlayTimeCounter.getTime();this.lifeCycleStage.dispatch("play"),xd.values({name:"VpaidCreativeStarted",probability:zd,data:this.getVPAIDLogDetails(),values:{timeBeforeStart:t,timeToStart:e-t,fullTime:e},labels:{}})}),"AdStarted")}),this.updatePosition=this.ignoreAfterDestroy(()=>{this.onCurrentPositionChange.dispatch({currentTime:this.getCurrentTime(),duration:this.getDuration()})}),this.creativeAdStartedCallback=xt(()=>{if(this.isDestroyed)return void xd.error({error:new Ea({code:"VPAID_STARTED_AFTER_AD_DESTROY",details:this.getVPAIDLogDetails()})});this.isCreativeStartRequested.getValue()||xd.error({error:new Ea({code:"VPAID_STARTED_BEFORE_START_AD_CALL",details:this.getVPAIDLogDetails()})});const e=Q(()=>{this.isStarted.dispatch(!0)}),t=this.playingState.getValue();Ct("VPAID dispatched AdStarted event with playingState=["+t+"]"),"play"!==t?this.playingState.subscribeValueConditionOnce(e=>"play"===e,e):e()},()=>{xd.error({error:new Ea({code:"VPAID_STARTED_MORE_THAN_ONCE",details:this.getVPAIDLogDetails()})})}),this.showContainerNode=a,this.createContainerNode=Q(e=>{let{isAdCreative:t,isNonLinear:i}=e;const{gui:r,wrapperNode:o}=this.adDisplayController,s=o.ownerDocument.createElement("div");n(s,to({},iy,{pointerEvents:i?"none":"auto",visibility:"hidden",overflow:"hidden"})),this.showContainerNode=Q(()=>n(s,{visibility:"visible"})),this.addDestroyHandler(()=>{C(s)}),r&&r.wrapper.el.parentElement===o?o.insertBefore(s,r.wrapper.el):o.appendChild(s);let a=null;return(t||i)&&(a=bn(s))&&n(a,iy),a||s}),this.prepareVpaidCreative=Q(async()=>{this.addDestroyHandler(this.videoNodeController.onVolumeChange.add(()=>{this.onVolumeChange.dispatch(void 0)}));const e=await this.initCreative();if(this.isDestroyed)throw new Ea({code:"VPAID_WAS_DESTROYED_DURING_INIT",details:this.getVPAIDLogDetails()});if(e.subscribe(e=>{this.onVpaidStop.dispatch({reason:"error",details:this.parseVpaidError(e,"VPAIDPlayingError")})},"AdError"),"function"===typeof e.getAdUnitId){const t=e.getAdUnitId();t&&(xd.event({name:"UsingVpaidAdUnitId",data:this.getVPAIDLogDetails(),probability:zd}),vu.addUnit(t))}return this.creative=e,this.addDestroyHandler(()=>{this.creative=void 0}),this.onReady.dispatch(void 0),e}),this.isAdPlayingCalled=!1,this.getVPAIDLogDetails=()=>({adParametersString:this.mediaAd.vastAd.adParameters,mediaFile:this.getCurrentSource(),viewerPlaybackParams:this.viewerPlaybackParams,isViewerDestroyed:this.isDestroyed,hasCreativeInstance:Boolean(this.creative),isSlotInDom:Ar(this.adDisplayController.wrapperNode),lifeCycleStage:this.lifeCycleStage.getValue()});const{viewerPlaybackParams:t}=e,i=new Error,{vpaidTimeout:r}=t;this.shouldPlayTimeCounter.addCallback(r,()=>{const e=this.getSrc(),n=this.lifeCycleStage.getValue(),o={timeout:r,src:e,config:this.adDisplayController.config,viewerPlaybackParams:t,liveCycleStage:n};this.isDestroyed?xd.error({error:new Ea({code:"SHOULD_PLAY_TIMER_IS_STARTED_AFTER_VIEWER_DESTROY",details:o})}):(this.isAdPlayingCalled&&!this.isStarted.getValue()&&xd.error({error:new Ea({code:"VPAID_TIMEOUT_PREVENTED_BY_AD_PLAYING_EVENT",details:o})}),this.isStarted.getValue()||this.isAdPlayingCalled||this.onVpaidStop.dispatch({reason:"error",details:new Ea(i,{code:eo(n,this.isYandexCreative()),details:o})}))}),this.isStarted.addOne(()=>{this.addDestroyHandler(M(this.updatePosition))}),this.addDestroyHandler(()=>{this.onAdSkippableStateChange.removeAll()})}play(e){void 0===e&&(e=!0),this.isDestroyed&&xd.error({error:new Ea({code:"PLAY_VPAID_VIEWER_AFTER_DESTROY",details:void 0})}),this.playingState.dispatch(e?"play":"pause"),this.creative?this.resume():this.prepareVpaidCreative().then(()=>{this.resume()}).catch(e=>{this.onVpaidStop.dispatch({reason:"error",details:e})}),this.onVpaidStop.promise().then(e=>{ha(ty).promise.then(()=>{this.destroy(e)}).catch(L)}).catch(L)}getCurrentTime(){if(!this.creative)return 0;const e=this.creative.getAdRemainingTime()||0;return Y(e)?this.getDuration()-e:0}getAdRemainingTime(){if(this.isDestroyed)return 0;if(!this.creative)return this.mediaAd.getDuration();const e=this.creative.getAdRemainingTime();return!Y(e)||e<0?this.isStarted.getValue()?0:this.getDuration():e}pause(){this.playingState.dispatch("pause"),this.creative&&(Ct("VPAID.pauseAd() called in pause method"),this.creative.pauseAd())}resume(){const{creative:e}=this;return e?(this.showContainerNode(),this.isCreativeStartRequested.getValue()?(this.playingState.dispatch("play"),Ct("VPAID.resumeAd() called in resume method"),void e.resumeAd()):("play"!==this.playingState.getValue()?this.startAndPauseVpaidCreative(e):this.startVpaidCreative(e),void this.updateAdSkippableState())):(Ct("JSVpaidViewer dispatch playingState=play without creative"),void this.playingState.dispatch("play"))}skipAd(){this.creative&&this.creative.skipAd()}getAdSkippableState(){return this.creative&&"function"===typeof this.creative.getAdSkippableState?this.creative.getAdSkippableState():yp}getDuration(){if(this.creative){const e=this.creative.getAdDuration();if(e>0)return e}const e=this.mediaAd.getDuration();return e||0}getAdWidth(){if(this.creative){const{adWidth:e}=this.creative;if("number"===typeof e)return e;if("function"===typeof this.creative.getAdWidth)return this.creative.getAdWidth()}return wp}getAdHeight(){if(this.creative){const{adHeight:e}=this.creative;if("number"===typeof e)return e;if("function"===typeof this.creative.getAdHeight)return this.creative.getAdHeight()}return vp}resizeAd(e,t,i){var r;void 0===i&&(i=Ph.NORMAL),null===(r=this.creative)||void 0===r||r.resizeAd(e,t,i)}getSrc(){return this.getScriptSrc()}setMuted(e){const t=this.videoNodeController.videoNode.volume,i=t>0?t:Hm;this.setVolume(e?0:i)}getVolume(){var e,t;return null!==(e=null===(t=this.creative)||void 0===t?void 0:t.getAdVolume())&&void 0!==e?e:this.videoNodeController.getVolume()}setVolume(e){this.isDestroyed||(this.creative?this.creative.setAdVolume(e):this.videoNodeController.setVolume(e))}startAndPauseVpaidCreative(e){this.isYandexCreative()&&(Ct("preload VPAID creative by start and pause"),this.startVpaidCreative(e),xd.event({name:"PreloadVPAIDCreativeByStartAndPause",probability:zd,data:{vpaidSrc:this.getSrc()}}),Ct("VPAID.pauseAd() called for start and pause"),e.pauseAd())}async initCreative(){let e,t;const i=Date.now();this.lifeCycleStage.dispatch("load");const{vastAd:r}=this.mediaAd,{isNonLinear:o,adParameters:s}=r,{gui:a}=this.adDisplayController,d=Ir(r),l=this.createContainerNode({isAdCreative:d,isNonLinear:o});let c;if(d)c=l,e=await this.loadAdCreative(c),t=Q(()=>{try{e.stopAd()}catch(c_){const t=o?"OVERLAY_STOP_AD_ERROR":"LINEAR_AD_CREATIVE_STOP_AD_ERROR";xd.error({error:new Ea(c_,{code:t,details:this.getVPAIDLogDetails()})})}});else{const i=rr(l);if(!i)throw new Ea({code:"CANNOT_CREATE_IFRAME_ELEMENT_FOR_VPAID",details:void 0});n(i,iy),c=i.contentDocument.body;const r=i.contentWindow,o=await this.loadVpaidMediaFile(r),s=this.getStandardVpaidCreative(o);e=s.creative,t=s.stopAd}if(this.onVpaidStop.addOne(t),xd.values({name:"VpaidCreativeLoaded",probability:zd,data:this.getVPAIDLogDetails(),values:{timeSpent:Date.now()-i},labels:{}}),this.isDestroyed)throw new Ea({code:"VPAID_WAS_DESTROYED_DURING_LOAD",details:this.getVPAIDLogDetails()});const{clientWidth:u,clientHeight:h}=this.videoNodeController.videoNode,{desiredBitrate:p=fc}=this.adDisplayController,f={AdParameters:s},{canPlayMuted:A,canPlayUnMuted:m}=this.adDisplayController.autoplayAbility,g=this.getScriptSrc(),y=at(g)||!_i(g);if(y&&a){const e=a.getBlockedControls();this.onVpaidStop.addOne(()=>a.setBlockedControls(e))}const v={slot:c,videoSlot:this.videoNodeController.videoNode,videoSlotCanAutoPlay:this.videoNodeController.videoNode.muted?A:m,isYandexAdPlayer:!0,yandexAdPlaybackParams:{lang:this.config.lang,skipDelay:this.config.skipDelay,controlsSettings:kr(this.config.controlsSettings,this.adDisplayController.vpaidControlsSettings),pauseOnClickThrough:!1,description:this.mediaAd.getDescription(),getGui:()=>(xd.event({name:"VPAIDGetGuiCalled",probability:zd,data:{vpaidSrc:g}}),y?a:void 0)}},_=Jn({creative:e,isYandexCreative:this.isYandexCreative(),getLogDetails:this.getVPAIDLogDetails});this.subscribeCreativeEvents(_);const w=Date.now();return await new Promise((i,r)=>{_.subscribe(()=>{Ct("VPAID dispatched AdLoaded event"),i(_)},"AdLoaded"),_.subscribe(e=>{Ct("VPAID dispatched AdError event"),r(this.parseVpaidError(e,"VPAIDLoadingError"))},"AdError"),this.lifeCycleStage.dispatch("init");try{e.initAd(u,h,Ph.NORMAL,p,f,v)}catch(c_){throw t(),new Ea(c_,{code:"INIT_AD_ERROR",details:this.getVPAIDLogDetails()})}}),xd.values({name:"VpaidCreativeInitialized",probability:zd,data:this.getVPAIDLogDetails(),values:{timeSpent:Date.now()-w},labels:{}}),_}loadAdCreative(e){const{vastAd:t}=this.mediaAd,{adParameters:i,isNonLinear:r,mediaFiles:n}=t,{parsed:{adMediaFiles:o,adParameters:s},errors:a}=bt(i);if(Lt(a),0===o.length)throw new Ea({code:r?"OVERLAY_HAS_NO_MEDIA_FILES_IN_AD_PARAMETERS":"LINEAR_AD_CREATIVE_HAS_NO_MEDIA_FILES_IN_AD_PARAMETERS",details:this.getVPAIDLogDetails()});if(o.length>1)throw new Ea({code:r?"OVERLAY_HAS_TOO_MANY_MEDIA_FILES_IN_AD_PARAMETERS":"LINEAR_AD_CREATIVE_HAS_TOO_MANY_MEDIA_FILES_IN_AD_PARAMETERS",details:this.getVPAIDLogDetails()});if(r&&!function(e){let{url:t}=e;return t===wm}(n[0]))throw new Ea({code:"CANNOT_PLAY_NON_YANDEX_OVERLAY",details:this.getVPAIDLogDetails()});const[d]=o,l=r?"OverlayTGO":"MotionTGO";if(d.type!==Sm[l])throw new Ea({code:r?"OVERLAY_MEDIA_FILE_TYPE_IS_INCORRECT":"LINEAR_AD_CREATIVE_MEDIA_FILE_TYPE_IS_INCORRECT",details:this.getVPAIDLogDetails()});const c=nr(e);if(!c)throw new Ea({code:r?"CANNOT_CREATE_IFRAME_ELEMENT_FOR_OVERLAY":"CANNOT_CREATE_IFRAME_ELEMENT_FOR_LINEAR_AD_CREATIVE",details:void 0});const{contentWindow:u}=c,h=r?"OVERLAY_FRIENDLY_IFRAME":"LINEAR_AD_CREATIVE_FRIENDLY_IFRAME";this.addDestroyHandler(Ki(u,(e,t,i)=>{xd.error({error:Yi({scope:h,errorType:t,error:e,details:to({},this.getVPAIDLogDetails(),{error:e,data:i})})})}));const p=new ey({scriptWindow:u,slot:e,slotSizeSensor:this.adDisplayController.slotSizeSensor,adParametersString:s,mediaFile:d,isNonLinear:r});return this.addDestroyHandler(()=>{p.destroy()}),p.promise}async loadVpaidMediaFile(e){const t=this.isYandexCreative()?"YANDEX_VPAID_FRIENDLY_IFRAME":"VPAID_FRIENDLY_IFRAME";this.addDestroyHandler(Ki(e,(e,i,r)=>{xd.error({error:Yi({scope:t,errorType:i,error:e,details:to({},this.getVPAIDLogDetails(),{error:e,data:r})})})}));const i=this.mediaAd.getPreloadVpaidWindow();if(i)return i.getVPAIDAd;try{return await lh({src:this.getScriptSrc(),win:e})}catch(c_){throw new Ea(c_,{code:"CANNOT_LOAD_VPAID_MEDIA_FILE",details:void 0})}}getStandardVpaidCreative(e){const t=this.isYandexCreative();if("function"!==typeof e)throw new Ea({code:t?"YANDEX_NO_GET_VPAID_AD_FUNC":"NO_GET_VPAID_AD_FUNC",details:to({},this.getVPAIDLogDetails(),{typeOfGetVPAIDAd:typeof e})});let i;try{i=e()}catch(c_){throw new Ea(c_,{code:"GET_VPAID_AD_ERROR",details:this.getVPAIDLogDetails()})}const r=Q(()=>{try{i.stopAd()}catch(c_){xd.error({error:new Ea(c_,{code:"STOP_AD_ERROR",details:this.getVPAIDLogDetails()})})}});if(!dy.isVPAIDCreative(i))throw new Ea({code:"INVALID_VPAID_API",details:this.getVPAIDLogDetails()});const n=i.handshakeVersion(ay);if(!dy.isSupportedVersion(n))throw r(),new Ea({code:"VPAID_VERSION_ERROR",details:to({},this.getVPAIDLogDetails(),{playerSupportedVersion:ay,creativeVersion:n})});return{creative:i,stopAd:r}}getScriptSrc(){return this.getCurrentSource().url}getCurrentSource(){return this.mediaAd.getJSMediaFile()}subscribeCreativeEvents(e){e.subscribe(()=>{this.onVpaidStop.dispatch({reason:"stop",details:void 0})},"AdStopped"),e.subscribe((e,t,i)=>{this.clickThrough({url:e,id:t,playerHandles:Boolean(i)})},"AdClickThru"),e.subscribe(()=>{this.updateAdSkippableState()},"AdSkippableStateChange"),e.subscribe(this.updatePosition,"AdRemainingTimeChange");const t=()=>{const t=e.getAdDuration();t>0&&this.mediaAd.actualizeDuration(t)};e.subscribe(t,"AdStarted"),e.subscribe(t,"AdDurationChange"),e.subscribe(this.creativeAdStartedCallback,"AdStarted"),e.subscribe(()=>{Ct("VPAID dispatched AdPaused event"),this.onPause.dispatch(void 0)},"AdPaused"),e.subscribe(()=>{Ct("VPAID dispatched AdPlaying event"),this.isAdPlayingCalled=!0,this.onResume.dispatch(void 0)},"AdPlaying"),e.subscribe(()=>{this.trackStartEvent()},"AdVideoStart"),e.subscribe(()=>{this.onImpression.dispatch(void 0)},"AdImpression"),e.subscribe(()=>{this.onFirstQuartile.dispatch(void 0)},"AdVideoFirstQuartile"),e.subscribe(()=>{this.onMidpoint.dispatch(void 0)},"AdVideoMidpoint"),e.subscribe(()=>{this.onThirdQuartile.dispatch(void 0)},"AdVideoThirdQuartile");const i=Q(()=>this.onBeforeComplete.dispatch(void 0));e.subscribe(()=>{i()},"AdVideoBeforeComplete"),e.subscribe(()=>{this.onVolumeChange.dispatch(void 0)},"AdVolumeChange"),e.subscribe(()=>{this.destroy({reason:"skip",details:void 0})},"AdSkipped"),e.subscribe(()=>{this.onVpaidStop.dispatch({reason:"complete",details:void 0})},"AdVideoComplete"),e.subscribe(()=>{this.destroy({reason:"close",details:void 0})},"AdUserClose")}parseVpaidError(e,t){const i=this.getVPAIDLogDetails();return"string"===typeof e?new Ea({code:t,message:"String error from vpaid ["+e+"]",details:i}):e?new Ea(e,{code:t,details:i}):new Ea({code:t,message:"unknown error from VPAID creative",details:i})}updateAdSkippableState(){const e=this.getAdSkippableState();this.adSkippableState!==e&&(this.adSkippableState=e,this.onAdSkippableStateChange.dispatch(e))}isYandexCreative(){return at(this.getSrc())}get videoNodeController(){return this.adDisplayController.videoNodeController}get config(){return this.adDisplayController.config}}const{locals:ly}=ap.a,cy=640,uy=480;class hy extends oy{constructor(e){super(e),this.preferredSource=void 0,this.videoNodeController=void 0,this.curtain=void 0,this.startTracked=!1,this.makeVideoClickable=this.ignoreAfterDestroy(()=>{const{videoNode:e,wrapperNode:t}=this.adDisplayController,i=()=>{this.viewerPlaybackParams.clickThroughUrl&&this.clickThrough({})};this.addDestroyHandler(this.videoNodeController.onClick.add(i)),this.addDestroyHandler(d(t,"click",e=>{e.target===t&&i()})),kn(e)&&this.isClickable()&&(hp||(this.addDestroyHandler(Nn(e,{cursor:"pointer"})),this.addDestroyHandler(Nn(t,{cursor:"pointer"}))))}),this.setAdMediaFile=Q(e=>{this.preferredSource=e,this.videoNodeController.setSrc(e),this.onReady.dispatch(void 0)}),this.prepareVideoElement=Q(()=>{const{width:e,height:t}=this.getVideoSize(),i=this.mediaAd.getMediaFiles(),{prioritisedMediaFile:r}=ir(i,{container:{width:e,height:t},desiredBitrate:this.adDisplayController.desiredBitrate}),[n]=this.mediaAd.imageSources;if(n&&this.videoNodeController.setPoster(n.url),!r)throw new Ea({code:1===i.length?"CANNOT_PLAY_SINGLE_VIDEO_MEDIA_FILE":"NO_APPROPRIATE_VIDEO_SOURCE",details:{mediaFiles:i}});this.setAdMediaFile(r)}),this.startTime=0,this.onVideoPlayingFirstFrame=()=>{this.startTracked=!0,this.startTime=this.videoNodeController.getCurrentTime(),this.isStarted.dispatch(!0),this.trackStartEvent(),this.onImpression.dispatch(void 0)};const{adDisplayController:t}=e;this.videoNodeController=t.videoNodeController,this.videoNodeController.isFullscreen()&&this.trackEvent("fullscreen",void 0);const i=()=>{this.videoNodeController.isFullscreen()?this.trackEvent("fullscreen",void 0):this.trackEvent("exitFullscreen",void 0)};this.videoNodeController.fullscreenApi.addHandler(i),this.addDestroyHandler(()=>{this.videoNodeController.fullscreenApi.removeHandler(i),this.curtain&&C(this.curtain)});const r=Q(()=>this.onBeforeComplete.dispatch(void 0));this.videoNodeController.onCurrentPositionChange.add(e=>{let{currentTime:t,duration:i}=e;const{isBeforeEnd:n}=function(e){let{currentTime:t,duration:i}=e;return t>=i?{isBeforeEnd:!1,isEnd:!0}:t+Ed.beforeCompleteOffset>=i?{isBeforeEnd:!0,isEnd:!1}:{isBeforeEnd:!1,isEnd:!1}}({currentTime:t,duration:i});n&&r()}),this.isStarted.addOne(this.makeVideoClickable);const{viewerPlaybackParams:n}=this,o=new Error,{videoTimeout:s}=n;this.shouldPlayTimeCounter.addCallback(s,()=>{this.isStarted.getValue()||this.destroy({reason:"error",details:new Ea(o,{code:"VIDEO_TIMEOUT",details:{timeout:s,src:this.getSrc(),config:t.config,viewerPlaybackParams:n}})})})}resume(){this.playingState.dispatch("play"),this.videoNodeController.play()}play(e){void 0===e&&(e=!0),this.isDestroyed&&xd.error({error:new Ea({code:"PLAY_VIDEO_VIEWER_AFTER_DESTROY",details:void 0})}),this.playingState.dispatch(e?"play":"pause"),this.prepareVideoElement(),e?this.isCreativeStartRequested.getValue()?this.resume():this.start():this.addDestroyHandler(this.videoNodeController.onPlay.addOne(()=>{if(this.isCreativeStartRequested.getValue())return;this.videoNodeController.videoNode.currentSrc===this.preferredSource.url&&(xd.event({name:"StartVideoAdByVideoPlay",data:void 0}),this.start())}))}pause(){this.playingState.dispatch("pause"),this.videoNodeController.pause()}skipAd(){this.destroy({reason:"skip",details:void 0})}getAdSkippableState(){const{skipDelay:e}=this.viewerPlaybackParams;return e>0&&this.getCurrentTime()>e}getAdWidth(){var e,t;const i=this.videoNodeController.videoNode;return i.videoWidth>0?i.videoWidth:null!==(e=null===(t=this.preferredSource)||void 0===t?void 0:t.width)&&void 0!==e?e:wp}getAdHeight(){var e,t;const i=this.videoNodeController.videoNode;return i.videoHeight>0?i.videoHeight:null!==(e=null===(t=this.preferredSource)||void 0===t?void 0:t.height)&&void 0!==e?e:vp}getCurrentTime(){return this.videoNodeController.getCurrentTime()}getAdRemainingTime(){if(this.isDestroyed)return 0;const e=this.getDuration();return this.isCreativeStartRequested.getValue()?e-this.videoNodeController.getCurrentTime():e}getDuration(){const e=this.mediaAd.getDuration();return!this.isStarted.getValue()||this.isDestroyed?e:this.videoNodeController.getDuration()||e}getSrc(){var e,t;return null!==(e=null===(t=this.preferredSource)||void 0===t?void 0:t.url)&&void 0!==e?e:""}setMuted(e){this.videoNodeController.setMuted(e)}getVolume(){return this.adDisplayController.videoNodeController.getVolume()}setVolume(e){this.videoNodeController.setVolume(e)}resizeAd(e,t,i){void 0===i&&(i=Ph.NORMAL)}setCurtain(){if(!nt()||!/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window.navigator.userAgent))return;this.curtain=ot(ly.yaAdSdk_iosVideoCurtain_wrapper);const e=ot(ly.yaAdSdk_iosVideoCurtain);this.curtain.appendChild(e),this.curtain.addEventListener("click",()=>this.clickThrough());const{videoNode:t,wrapperNode:i}=this.adDisplayController,{nextSibling:r,parentNode:n}=t,o=n===i&&r?r:i.firstChild;i.insertBefore(this.curtain,o)}subscribeEvents(){this.addDestroyHandler(this.videoNodeController.onVolumeChange.add(()=>{this.onVolumeChange.dispatch(void 0)})),this.addDestroyHandler(this.videoNodeController.onPlayAfterPause.add(()=>{this.startTracked&&this.onResume.dispatch(void 0)})),this.addDestroyHandler(this.videoNodeController.playingState.add(e=>{"pause"===e&&this.onPause.dispatch(void 0)})),this.addBufferEmptyLimitHandler(),this.addBufferFullTimeoutHandler(),this.addDestroyHandler(this.videoNodeController.onError.add(e=>{this.destroy({reason:"error",details:e})}));const e=Q(()=>this.onFirstQuartile.dispatch(void 0)),t=Q(()=>this.onMidpoint.dispatch(void 0)),i=Q(()=>this.onThirdQuartile.dispatch(void 0)),r=r=>{let{currentTime:n,duration:o}=r;const s=(n-this.startTime)/o;s>=.25&&e(),s>=.5&&t(),s>=.75&&i()};this.onCurrentPositionChange.add(r);const n=this.videoNodeController.onCurrentPositionChange.add(e=>{let{currentTime:t,duration:i}=e;if(i>0)this.mediaAd.actualizeDuration(i);else{const e=this.mediaAd.getDuration();if(!e)return;i=e}this.onCurrentPositionChange.dispatch({currentTime:t,duration:i})}),o=()=>{r({currentTime:this.getCurrentTime(),duration:this.getDuration()}),this.destroy({reason:"complete",details:void 0})};this.videoNodeController.onEnd.add(o),this.addDestroyHandler(function(e,t){const i=d(e,"timeupdate",()=>{e.currentTime>0&&!e.paused&&(n(),t())}),r=d(e,"playing",()=>{e.duration>0&&(n(),t())}),n=()=>{i(),r()};return n}(this.videoNodeController.videoNode,this.onVideoPlayingFirstFrame)),this.addDestroyHandler(()=>{this.videoNodeController.onEnd.remove(o),n()})}start(){this.isCreativeStartRequested.dispatch(!0),this.subscribeEvents(),this.setCurtain(),this.videoNodeController.setSeekAllowed(!1),this.addDestroyHandler(()=>{this.videoNodeController.setSeekAllowed(!0)}),this.videoNodeController.play(),this.videoNodeController.setVisibleControls(!1)}getVideoSize(){const e=this.videoNodeController.getWidth(),t=this.videoNodeController.getHeight();if(e&&t)return{width:e,height:t};const{width:i,height:r}=this.adDisplayController.slotSizeSensor.getSize();return i&&r?{width:i,height:r}:{width:cy,height:uy}}addBufferEmptyLimitHandler(){const{bufferEmptyLimit:e}=this.viewerPlaybackParams;if(!e)return;let t=0;const i=this.videoNodeController.onBufferingAfterPlay.add(()=>{if(Ct("bufferEmptyCount=["+ ++t+"] limit=["+e+"]"),t<=e)return;const i=new Ea({code:"BUFFER_EMPTY_LIMIT",details:{bufferEmptyLimit:e}});this.destroy({reason:"error",details:i})});this.addDestroyHandler(i)}addBufferFullTimeoutHandler(){const{bufferFullTimeout:e}=this.viewerPlaybackParams;let t=a;this.addDestroyHandler(this.videoNodeController.isBuffering.add(async i=>{if(t(),!i)return;const{promise:r,clear:n}=ha(e);t=n,this.addDestroyHandler(t),await r,this.destroy({reason:"error",details:new Ea({code:"BUFFER_FULL_TIMEOUT",details:{bufferFullTimeout:e}})})}))}}const{locals:py}=ap.a;let fy=0;const Ay=100;class my{constructor(e){let{config:t,videoNode:i,videoWrapperNode:r,vpaidControlsSettings:n=pc,renderOldSkinStrategy:o="OnInit"}=e;this.slotVisibilitySensor=void 0,this.slotSizeSensor=void 0,this.onChangeHover=void 0,this.isHovered=void 0,this.wrapperNode=void 0,this.onReady=new $s,this.onDestroy=new $s,this.onBeforeAdStart=new $s,this.onAdStart=new $s,this.onAdMediaStart=new $s,this.onAllAdPodComplete=new $s,this.onAdMediaEnd=new $s,this.onAdEnd=new $s,this.onAdSkipped=new $s,this.onClickThrough=new $s,this.isFinished=void 0,this.config=void 0,this.vpaidControlsSettings=void 0,this.videoNodeController=void 0,this.videoNode=void 0,this.gui=void 0,this.desiredBitrate=void 0,this.autoplayAbility=io({},ep),this.onDetectAutoplayAbility=new $s,this.onAdStop=new $s,this.onAdPodPlayAdMedia=new $s,this.onAdPodStart=new $s,this.onAdPodImpression=new $s,this.onAdPodFirstQuartile=new $s,this.onAdPodMidpoint=new $s,this.onAdPodThirdQuartile=new $s,this.onAdPodPause=new $s,this.onAdPodResume=new $s,this.onAdPodTrackingEvent=new $s,this.onAdPodError=new $s,this.onAdPodComplete=new $s,this.onAdPodClose=new $s,this.abuseParameters=new ea(dp),this.adVolume=new ea(ga),this.adHasBeenUnmuted=new ea(!1),this.adVolumeAvailability=new ea(_p),this.onCurrentPositionChange=new $s,this.timeToSkip=new ea(Pf),this.adSkippableState=new ea(yp),this.playingState=new ea("idle",(e,t)=>"idle"===t?(xd.error({error:new Ea({code:"ATTEMPT_TO_CHANGE_ADC_PLAYING_STATE_TO_IDLE",details:void 0})}),!0):e===t),this.skinVisibility=new ea(!0),this.renderOldSkinStrategy=void 0,this.controlsVariant=void 0,this.shouldHandleResize=!0,this.blur=void 0,this.emitAdEnd=void 0,this.viewersList=[],this.currentViewer=void 0,this.nativeControlsHideStyle=void 0,this.initialVideoState=void 0,this.adType=void 0,this.shouldGuiBeVisibleByAdLogic=new ea(!1),this.shouldGuiBeVisibleByPublicAPI=new ea(!0),this.showAdCounter=0,this.addSkin=Q(()=>{this.controlsVariant?this.addPreactSkin():this.addGui()}),this.startBlur=e=>{let{viewer:t}=e;t.viewerPlaybackParams.backgroundBlur&&(this.tryAppendBlur(),this.blur&&this.blur.start())},this.stopBlur=()=>{this.blur&&(this.blur.stop(),this.config.backgroundBlur||this.destroyBlur())},this.destroyBlur=()=>{this.blur&&(this.blur.destroy(),this.blur=void 0)},this.wrapperNode=r,this.slotVisibilitySensor=new Uh(r,{numberOfMeasurementSteps:Ep}),this.slotSizeSensor=new na(r),this.slotSizeSensor.onResize.add(e=>{this.shouldHandleResize&&this.resizeAd(e.width,e.height)});const{signal:s,unsubscribe:a}=function(e){const t=new $s,i=()=>{t.dispatch(!0)},r=()=>{t.dispatch(!1)};return e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",r),{signal:t,unsubscribe:()=>{e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",r)}}}(r);s.add(e=>this.isHovered=e),this.onChangeHover=s,this.onDestroy.add(()=>{a(),this.slotVisibilitySensor.destroy(void 0),this.slotSizeSensor.destroy()}),this.renderOldSkinStrategy=o;const{config:d,errors:l}=_t(t),{controlsSettings:c}=d;this.controlsVariant=c.controlsVariant,this.vpaidControlsSettings=kr(n,this.controlsVariant&&{controlsVisibility:{},visibility:!1}),Lt(l),this.config=d,this.videoNode=i,this.timeToSkip.add(e=>{this.adSkippableState.dispatch(0===e)});const u=this.adVolume.add(e=>{0!==e&&(this.adHasBeenUnmuted.dispatch(!0),u())});this.onAdPodPlayAdMedia.add(e=>{const{abuseUrl:t}=e.mediaAd.vastAd;this.abuseParameters.dispatch({abuseUrl:t})}),++fy===Ay&&xd.error({error:new Ea({code:"TOO_MANY_CREATE_AD_DISPLAY_CONTROLLER_REQUESTS",details:void 0})}),xd.event({name:"CreateAdDisplayController",probability:zd,data:{config:this.config}}),this.desiredBitrate=t.desiredBitrate,this.videoNodeController=new Jm(i),this.onAdEnd.add(()=>this.setVisibleNativeControls(!0)),this.onReady.add(()=>this.setVisibleNativeControls(!1)),"OnInit"!==this.renderOldSkinStrategy||this.controlsVariant||this.addSkin(),this.initBlur(),this.onDestroy.add(()=>{this.isFinished=!0,this.playingState.dispatch("end"),Ja(this.viewersList,e=>{e.destroy({reason:"destroy",details:void 0})}),this.viewersList.length=0,this.gui&&this.gui.wrapper.hide(),this.abuseParameters.removeAll(),this.playingState.removeAll(),this.onAdStop.removeAll(),this.onAdPodPlayAdMedia.removeAll(),this.onAdPodStart.removeAll(),this.onAdPodPause.removeAll(),this.onAdPodResume.removeAll(),this.onAdPodTrackingEvent.removeAll(),this.onCurrentPositionChange.removeAll(),this.timeToSkip.removeAll(),this.onAdPodComplete.removeAll(),this.onAdPodClose.removeAll(),this.adVolume.removeAll(),this.currentViewer&&(this.currentViewer.isCreativeStartRequested.getValue()&&(void 0===this.adType&&xd.error({error:new Ea({code:"EMPTY_AD_TYPE_WHILE_PLAYING",details:void 0})}),this.onAdMediaEnd.dispatch({adType:this.adType})),this.currentViewer.destroy({reason:"destroy",details:void 0}),this.currentViewer=void 0),this.videoNodeController.destroy(),C(this.nativeControlsHideStyle),this.gui&&this.gui.destroy(),this.revertVideoState()})}async prepareToPlayAd(e){this.config.autoplay=!1,this.showAd(e),await Promise.race([this.onReady.promise(),this.onAdEnd.promise().then(()=>{throw new Ea({code:"AD_STOPPED_BEFORE_READY_TO_PLAY",details:void 0})})])}showAd(e){const t=kn(this.videoNode)?Ar(this.videoNode):void 0;if(!1===t){const e=Bh(this.wrapperNode)?Ar(this.wrapperNode):void 0;return xd.error({error:new Ea({code:"WRAPPER_OR_VIDEO_NODE_NOT_IN_DOM",details:{videoNodeInDom:t,wrapperInDom:e}})}),Promise.resolve()}if(!e.mediaAds.length)return xd.error({error:new Ea({code:"NO_AD_PODS_TO_PLAY_IN_SHOW_AD_METHOD",details:{config:this.config}})}),Promise.resolve();this.showAdCounter++,this.showAdCounter>1&&xd.event({name:"CallShowAdMultipleTimes",probability:zd,data:void 0});const{adBreak:i}=e.getFirstMediaAd(),r=i.adType?i.adType:"preroll";return this.adType=r,this.isFinished=!1,new Promise((t,i)=>{this.addSkin(),this.viewersList=Es(ss(e.mediaAds,e=>this.createViewer(e)),Boolean),this.getIfIsNonLinear()&&this.setSkinVisibility(!1),this.emitAdEnd=t,this.onBeforeAdStart.dispatch({adType:r}),this.startAdPlayback(r).then(t).catch(e=>{this.isFinished=!0,this.playingState.dispatch("end"),this.onAdMediaEnd.dispatch({adType:r}),i(e)})}).catch(e=>{xd.errorToStats(e)}).then(()=>{this.revertVideoState(),this.isFinished=!0,this.playingState.dispatch("end"),this.onAdEnd.dispatch({adType:r})})}getAdPlacementOptions(e){void 0===e&&(e=this.currentViewer);const{videoNode:t}=this;let i,r,n=0;if(e&&(n=e.getBufferingTime()),e&&(i=e.mediaAd.adBreak.adType),e){const t=e.mediaAd.getMediaFiles();t.length>0&&(r=function(e,t){let{type:i,url:r}=e,{vastAd:n}=t;if(Fi({type:i})!==Iu.js)return"video";if(!at(r))return"external";try{const{adFormatType:e}=Cn(n.adParameters);return e}catch(c_){return"external"}}(t[0],{vastAd:e.mediaAd.vastAd}))}return Tn({slotSize:this.slotSizeSensor.getSize(),slotVisibilityRatio:this.slotVisibilitySensor.getVisibilityRatio(),videoNode:t,bufferingTime:n,adBreakType:i,adFormatType:r})}setMuted(e){this.currentViewer?this.currentViewer.setMuted(e):this.videoNodeController.setMuted(e)}resizeAd(e,t,i){var r;void 0===i&&(i=Ph.NORMAL),null===(r=this.currentViewer)||void 0===r||r.resizeAd(e,t,i)}clickThrough(e){this.currentViewer&&this.currentViewer.clickThrough(e)}async play(e){void 0===e&&(e=!0);const{currentViewer:t,config:i}=this;return e&&(i.autoplay=!0),t?(t.play(e),new Promise((e,i)=>{t.addDestroyHandler(t=>{const r=Dr(t);r?i(r):e()})})):Promise.reject(new Error("AdSDK Error: play request without AdMedia"))}pause(){this.currentViewer?this.currentViewer.pause():this.isFinished||this.playingState.dispatch("pause")}resume(){this.currentViewer?this.currentViewer.resume():this.isFinished||this.playingState.dispatch("play")}close(){this.destroyNextViewers("close")}skipAllViewers(){this.skipCurrentViewer(),this.destroyNextViewers("skip")}skipCurrentViewer(){if(this.shouldGuiBeVisibleByAdLogic.dispatch(!1),!this.currentViewer)return this.stop(),void xd.error({error:new Ea({code:"SKIP_NOT_PLAYING_AD_POD",details:{isFinished:this.isFinished}})});this.currentViewer.getAdSkippableState()?this.currentViewer.skipAd():xd.error({error:new Ea({code:"ATTEMPT_TO_SKIP_NOT_SKIPPABLE_AD_POD",details:void 0})})}handleChooseAbuseVariant(e){if(!this.currentViewer)return void xd.error({error:new Ea({code:"ABUSE_CALLED_WITHOUT_VIEWER",details:void 0})});const{abuseUrl:t}=this.abuseParameters.getValue();t||xd.error({error:new Ea({code:"ABUSE_CALLED_WITHOUT_URL",details:void 0})});const{reason:i,action:r}=lp[e];Vi({eventName:"close",trackingEventDetails:void 0,trackingUrls:[re(t,{"reason-id":""+i,"action-id":""+r},{override:!0})],options:this.getAdPlacementOptions()}),this.currentViewer.destroy({reason:"close",details:void 0})}setSkinVisibility(e){this.skinVisibility.dispatch(e)}setGuiVisibility(e){this.shouldGuiBeVisibleByPublicAPI.dispatch(e)}stop(){this.isFinished=!0,this.playingState.dispatch("end"),this.onAdStop.dispatch(void 0),this.emitAdEnd&&this.emitAdEnd()}getAdWidth(){var e,t;return null!==(e=null===(t=this.currentViewer)||void 0===t?void 0:t.getAdWidth())&&void 0!==e?e:wp}getAdHeight(){var e,t;return null!==(e=null===(t=this.currentViewer)||void 0===t?void 0:t.getAdHeight())&&void 0!==e?e:vp}trackEvent(e,t){var i;null===(i=this.currentViewer)||void 0===i||i.trackEvent(e,t)}getCurrentContentType(){return this.currentViewer?this.currentViewer.contentType:void 0}getAdRemainingTime(){if(this.isFinished)return 0;if(this.currentViewer){let e=this.currentViewer.getAdRemainingTime();for(let t=this.getCurrentViewerIndex()+1;t<this.viewersList.length;t++){e+=this.viewersList[t].mediaAd.getDuration()}return e}return this.getDuration()}getAdPodRemainingTime(){var e;if(this.isFinished)return 0;if(this.currentViewer)return this.currentViewer.getAdRemainingTime();const[t]=this.viewersList;return null!==(e=null===t||void 0===t?void 0:t.mediaAd.getDuration())&&void 0!==e?e:0}getCurrentTime(){return this.currentViewer?this.getCurrentViewerStartTime()+this.currentViewer.getCurrentTime():0}getAdPodDuration(){if(this.currentViewer){const e=this.currentViewer.getDuration();if(e>0)return e}return 0}getDuration(){let e=0;return Ja(this.viewersList,t=>{const i=t.getDuration();i>0&&(e+=i)}),e}getPaused(){return this.currentViewer?"play"!==this.currentViewer.playingState.getValue():!!this.isFinished||"pause"===this.playingState.getValue()}getVolume(){return this.adVolume.getValue()}setVolume(e){this.adVolume.dispatch(e);const{currentViewer:t}=this;t?t.setVolume(e):this.videoNodeController.setVolume(e)}setVisibleNativeControls(e){this.getIfIsNonLinear()||(e?C(this.nativeControlsHideStyle):(this.videoNode.controls=!1,this.nativeControlsHideStyle||(this.nativeControlsHideStyle=tt(this.wrapperNode,"\n                        #"+this.videoNode.id+"::-webkit-media-controls{\n                            display: none !important;\n                        }\n                    ")),document.head.appendChild(this.nativeControlsHideStyle)))}getCurrentClickability(){return!!this.currentViewer&&this.currentViewer.isClickable()}getCurrentSrc(){var e,t;return null!==(e=null===(t=this.currentViewer)||void 0===t?void 0:t.getSrc())&&void 0!==e?e:""}getMuted(){const{currentViewer:e}=this;return e?0===e.getVolume():this.videoNodeController.getMuted()}getAdVolumeAvailability(){return this.adVolumeAvailability.getValue()}setBlurDisplay(e){this.blur&&this.blur.setContainerDisplay(e)}getCurrentViewerIndex(){return this.currentViewer?Math.max(this.viewersList.indexOf(this.currentViewer),0):0}getViewerLength(){return this.viewersList.length}disableResizeHandling(){this.shouldHandleResize=!1}enableResizeHandling(){const{width:e,height:t}=this.wrapperNode.getBoundingClientRect();this.resizeAd(e,t),this.shouldHandleResize=!0}destroy(e){this.onDestroy.dispatch(e),this.onDestroy.removeAll(),this.onBeforeAdStart.removeAll(),this.onAdStart.removeAll(),this.onAdMediaStart.removeAll(),this.onAdMediaEnd.removeAll(),this.onAdEnd.removeAll(),this.onChangeHover.removeAll(),this.onReady.removeAll(),this.onAllAdPodComplete.removeAll()}revertVideoState(){this.initialVideoState&&(this.initialVideoState.revert(),delete this.initialVideoState)}trackError(e){this.currentViewer&&this.currentViewer.trackError(e)}getAutoplay(){if(this.getCurrentViewerIndex()>0)return Ct("autoplay=true due to subsequent viewer"),!0;if(this.autoplayAbility.requireUserGesture)return Ct("autoplay=false due to requireUserGesture"),!1;const{autoplay:e}=this.config;if(void 0!==e)return Ct("autoplay=["+e+"] due to config"),e;const t=this.playingState.getValue();if("idle"!==t){const e="pause"!==t;return Ct("autoplay=["+e+"] due to playingStateValue"),e}return Ct("autoplay=true due to default"),!0}addGui(){const e=new Np(this.wrapperNode,this.config.lang),{wrapper:t,controls:i}=e;i.play.setVisible(!this.getAutoplay()),this.onAdPodPause.add(()=>{i.play.show()}),this.onAdStart.add(()=>{i.play.hide()}),this.onAdPodResume.add(()=>{i.play.hide()}),this.onAdPodPlayAdMedia.addOne(()=>{i.play.setVisible(!this.getAutoplay()||this.autoplayAbility.requireUserGesture)}),e.on({click:()=>this.clickThrough(),pause:()=>this.pause(),play:()=>{this.getCurrentContentType()===Iu.video?this.videoNodeController.play():this.play()},skip:()=>{this.skipCurrentViewer()}}),e.onMuteButtonClick.add(()=>{this.setMuted(!this.getMuted())}),this.onAdPodPlayAdMedia.addOne(()=>{e.addSkin(),this.getCurrentClickability()?t.addClass(py.pointer):t.removeClass(py.pointer)}),this.adVolume.add(t=>{const i=0===t;e.setMuted(i)}),this.onAdMediaStart.add(t=>{let{viewer:r}=t;const{controlsSettings:n}=r.viewerPlaybackParams,o=r.mediaAd.getTitle();e.topRightBlock.className=!1!==n.controlsVisibility[yc.skip]?py.topRightBlock:py.topRightBlockMinimal,i.skip.setVisible(!1),i.timeLeft.show(),i.title.setText(o).setVisible(!(Pl||Il)&&Boolean(o)),i.mute.setVisible(!nt()),e.setMuted(this.getMuted())}),this.onBeforeAdStart.addOne(()=>{this.shouldGuiBeVisibleByAdLogic.dispatch(!0)}),this.onAdMediaStart.add(e=>{let{viewer:t}=e;const{contentType:i,viewerPlaybackParams:r}=t,{showGuiForVpaid:n}=r,o=i===Iu.video||Boolean(i===Iu.js&&n);this.shouldGuiBeVisibleByAdLogic.dispatch(o)}),this.onAdMediaEnd.add(()=>{this.shouldGuiBeVisibleByAdLogic.dispatch(!1)}),mr([this.shouldGuiBeVisibleByAdLogic,this.shouldGuiBeVisibleByPublicAPI,this.slotSizeSensor.onResize],(e,t,i)=>{let{width:r}=i;return e&&t&&r>=Dp},t=>{t?(Ct("Show GUI"),e.show()):(Ct("Hide GUI"),e.hide())});const{lang:r}=this.config;this.onCurrentPositionChange.add(t=>{let{viewerTime:i,viewerDuration:n}=t;if(!this.currentViewer)return;const{skipDelay:o}=this.currentViewer.viewerPlaybackParams,s=o>0&&i>=o;e.controls.skip.setVisible(s);const a=function(e){const t=Math.floor(e/_d),i=Math.floor(e-t*_d);if(isNaN(i))return"";const r=be(String(i),2,"0");return t?be(String(t),2,"0")+":"+r:r}(n-i),d=op("AD_TITLE",r);e.controls.timeLeft.setText(d+" "+a)}),this.gui=e}addPreactSkin(){const e=document.createElement("div");n(e,{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1",pointerEvents:"none"}),this.wrapperNode.appendChild(e);const t=bn(e),i=um(t||e,this);this.onDestroy.add(()=>{i(),C(e)})}initBlur(){eh>-1||(this.onAdMediaStart.add(this.startBlur),this.onAdMediaEnd.add(this.stopBlur),this.onDestroy.add(this.destroyBlur),this.config.backgroundBlur&&this.tryAppendBlur())}tryAppendBlur(){if(this.blur)return;if(!kn(this.videoNode))return;const e=this.videoNode.parentElement;e?this.blur=new hg(e,this.videoNode):xd.error({error:new Ea({code:"NO_PARENT_ELEMENT_FOR_BLUR",details:void 0})})}playAdMedia(e,t){this.currentViewer=e,e.trackEvent("onCreativeInit",void 0);let i=NaN;e.playingState.subscribeValueConditionOnce(e=>"play"===e,()=>{i=Date.now()}),e.isStarted.add(()=>{isNaN(i)?xd.error({error:new Ea({code:"AdPodStartWithoutPlayRequest",details:void 0})}):Wd&&xd.values({name:"AdPodStart",values:{startTime:Date.now()-i},data:{src:e.getSrc(),config:this.config,playRequestTime:String(i)},labels:{contentType:e.contentType}})}),this.onAdPodPlayAdMedia.dispatch(e);const r=e.playingState.getValue();"idle"!==r&&xd.error({error:new Ea({code:"VIEWER_PLAYING_STATE_INITIALIZED_BEFORE_START",details:{playingState:r}})}),e.playingState.subscribeValueCondition(e=>"end"!==e,t=>{this.currentViewer===e?this.playingState.dispatch(t):xd.error({error:new Ea({code:"VIEWER_PLAYING_STATE_DISPATCHED_OUT_OF_LIFECYCLE",details:{playingState:t}})})});const n=this.getAutoplay();n&&(this.config.autoplay=!0),e.play(n),e.addDestroyHandler(i=>{const r=Dr(i);r&&(this.trackError(r),xd.error({error:r}),or("AdPod playing error",r),this.onAdPodError.dispatch(r)),this.currentViewer=void 0,e.isDestroyed||(e.destroy({reason:"destroy",details:void 0}),xd.error({error:new Ea({code:"VIEWER_IS_NOT_DESTROYED_AFTER_COMPLETE",details:{src:e.getSrc()}})})),t(i)})}getCurrentViewerStartTime(){const e=this.getCurrentViewerIndex();let t=0;for(let i=0;i<e;i++)t+=this.viewersList[i].getDuration();return t}createViewer(e){this.config.trackingEvents&&(e.vastAd.trackingEvents=vt(e.vastAd.trackingEvents,this.config.trackingEvents));const t={adDisplayController:this,mediaAd:e,viewerPlaybackParams:Nr(this.config,e)},i=e.contentType===Iu.js?new dy(t):new hy(t);return i.onImpression.add(this.onAdPodImpression),i.onFirstQuartile.add(this.onAdPodFirstQuartile),i.onMidpoint.add(this.onAdPodMidpoint),i.onThirdQuartile.add(this.onAdPodThirdQuartile),i}async startAdPlayback(e){if(!this.getIfIsNonLinear()){this.initialVideoState=new $m(this.videoNode),this.videoNode.loop=!1;const{poster:e}=this.config;e&&this.videoNodeController.setPoster(e)}let t;const i=Lc(this.viewersList,e=>e.mediaAd.getIsIndependentOnVideoElement()),{videoSlotCanAutoPlay:r}=this.config;if(i?(Ct("autoplayAbility=positive for independentOnVideoElement ad"),t=tp):"boolean"===typeof r?(Ct("autoplayAbility=["+r+"] due to videoSlotCanAutoPlay"),t=r?tp:ep):kn(this.videoNode)?(Ct("start autoplay ability request"),t=await this.requestAutoplayAbility(),Ct("autoplayAbility=["+JSON.stringify(t)+"]")):(Ct("autoplayAbility=positive for fake video element"),t=tp),this.isFinished)throw new Ea({code:"AD_FINISHED_DURING_RAA",details:void 0});this.autoplayAbility=t,this.onDetectAutoplayAbility.dispatch(t),this.autoplayAbility.requireMute&&this.videoNodeController.setMuted(!0);const n=Q(()=>{this.onReady.dispatch(void 0)}),o=Q(()=>{this.onAdStart.dispatch({adType:e})});return Ja(this.viewersList,(t,i)=>{t.addDestroyHandler(t=>{let{reason:i}=t;"complete"===i?this.onAdPodComplete.dispatch(void 0):"skip"===i?this.onAdSkipped.dispatch({adType:e}):"close"===i&&this.onAdPodClose.dispatch(void 0)}),t.onReady.addOne(n),t.isStarted.addOne(o),t.isStarted.add(()=>{this.onAdPodStart.dispatch(void 0)}),t.onPause.add(()=>{this.onAdPodPause.dispatch(void 0)}),t.onResume.add(()=>{this.onAdPodResume.dispatch(void 0)}),t.onVolumeChange.add(()=>{this.adVolume.dispatch(t.getVolume())}),t.isStarted.addOne(()=>{this.adVolume.dispatch(t.getVolume())}),t.isStarted.addOne(()=>{this.onAdMediaStart.dispatch({viewer:t,adType:e})}),t.onCurrentPositionChange.add(e=>{let{currentTime:t,duration:i}=e;this.onCurrentPositionChange.dispatch({viewerTime:t,viewerDuration:i,totalTime:this.getCurrentViewerStartTime()+t,totalDuration:this.getDuration()})}),t.onClickThrough.add(e=>this.onClickThrough.dispatch(e));const{skipDelay:r}=t.viewerPlaybackParams;(function(e,t){let{controlsVariant:i}=t;const{showGuiForVpaid:r}=e.viewerPlaybackParams;return!e.isJSVpaidViewer()||(!!r||("regular"===i?e.mediaAd.getIsYandexCreative():e.mediaAd.getMediaFiles()[0].url===gp))})(t,{controlsVariant:this.controlsVariant})?t.onCurrentPositionChange.add(e=>{let{currentTime:t,duration:i}=e;const n=function(e){let{remainingTime:t,duration:i,skipDelay:r}=e;if(0===r)return Pf;if(r>i-mm)return Pf;const n=i-t;return r<=n?0:r-n}({remainingTime:i-t,duration:i,skipDelay:r});this.timeToSkip.dispatch(n)}):t.onAdSkippableStateChange.add(e=>{this.timeToSkip.dispatch(e?0:Pf)})}),new Promise(t=>{this.playAdViewers(e,i=>{Lc(i,e=>{let{reason:t}=e;return"complete"===t})&&this.onAllAdPodComplete.dispatch({adType:e}),t()})})}playAdViewers(e,t){const i=[],r=ss(this.viewersList,t=>r=>{if(this.timeToSkip.dispatch(Pf),this.isFinished){const e=new Ea({code:"AD_BREAK_IS_STOPPED",details:void 0});return t.mediaAd.trackError(e),i.push({reason:"error",details:e}),r()}const n=this.getAdPodContainerSizeError(t);if(n)return t.mediaAd.trackError(n),this.onAdPodError.dispatch(n),i.push({reason:"error",details:n}),r();this.adVolume.dispatch(this.videoNodeController.getVolume()),this.gui&&this.gui.applyControlsSettings(t.viewerPlaybackParams.controlsSettings),this.adVolumeAvailability.dispatch(Pr(t.mediaAd.vastAd)),this.playAdMedia(t,t=>{i.push(t),this.onAdMediaEnd.dispatch({adType:e}),r()})});let n=-1;!function e(){const o=r[++n];o?o(e):t(i)}()}getAdPodContainerSizeError(e){if(!e.mediaAd.getIsYandexCreative())return;const t=this.slotSizeSensor.getSize();if(Sn(t))return;if(Sn(this.wrapperNode.getBoundingClientRect()))return;const i=0===t.width||0===t.height,r="none"===si(this.wrapperNode).display;let n;return new Ea({code:n=i?r?"SLOT_DISPLAY_NONE":"SLOT_ZERO_SIZE":"SLOT_SMALL_SIZE",details:{slotSize:t,config:this.config,adConfig:e.mediaAd.adConfig}})}async requestAutoplayAbility(){const e=Date.now(),{promise:t,stop:i}=function(e,t){let{checkSoundEnabled:i=!0}=void 0===t?{}:t;const r=Cr(e),n=new rp(e,{checkSoundEnabled:i,promise:r});return{promise:n.promise,stop:n.stop}}(this.videoNode,{checkSoundEnabled:!this.getMuted()});return this.onDestroy.add(i),new Promise(r=>{t.then(t=>{xd.values({name:"DetectAutoplayAbility",values:{duration:Date.now()-e},data:{config:this.config,autoplayAbility:t},labels:{},probability:zd}),r(t)}).catch(()=>{this.isFinished||xd.error({error:new Ea({code:"RAA_WAS_STOPPED_WITHOUT_AD_FINISH",details:void 0})})}),"idle"===this.playingState.getValue()&&this.playingState.addOne(e=>{Ct("RAA stopped by playingState=["+e+"]"),i(),r(tp)})})}destroyNextViewers(e){const{viewersList:t,currentViewer:i}=this;this.shouldGuiBeVisibleByAdLogic.dispatch(!1),i&&i.destroy({reason:"destroy",details:void 0});for(let r=this.getCurrentViewerIndex()+1;r<t.length;r++){const{mediaAd:i}=t[r];i.trackEvent(e,this.getAdPlacementOptions(t[r]),void 0)}this.stop()}getIfIsNonLinear(){return Lc(this.viewersList,e=>e.mediaAd.vastAd.isNonLinear)}}let gy,yy;!function(e){e.AdStarted="AdStarted",e.AdPlayingStateChange="AdPlayingStateChange",e.AdPodStarted="AdPodStarted",e.AdPodImpression="AdPodImpression",e.AdPodVideoFirstQuartile="AdPodVideoFirstQuartile",e.AdPodVideoMidpoint="AdPodVideoMidpoint",e.AdPodVideoThirdQuartile="AdPodVideoThirdQuartile",e.AdRemainingTimeChange="AdRemainingTimeChange",e.AdPodSkipped="AdPodSkipped",e.AdClickThru="AdClickThru",e.AdPodStopped="AdPodStopped",e.AdPodComplete="AdPodComplete",e.AdPodClose="AdPodClose",e.AdPodError="AdPodError",e.AdStopped="AdStopped",e.AllAdPodVideoComplete="AllAdPodVideoComplete",e.AdSkippableStateChange="AdSkippableStateChange",e.AdVolumeChange="AdVolumeChange",e.AdVolumeAvailabilityStateChange="AdVolumeAvailabilityStateChange"}(gy||(gy={})),function(e){e.adComplete="adComplete",e.stopAd="stopAd"}(yy||(yy={}));class vy extends Zs{constructor(e){let{videoSlot:t,slot:i,mediaAds:r,playbackParameters:n,onPlayAd:o,renderOldSkinStrategy:s}=e;super(),this.pauseAd=this.createPlaybackMethod("pauseAd",()=>{this.adDisplayController.pause()}),this.resumeAd=this.createPlaybackMethod("resumeAd",()=>{this.adDisplayController.resume()}),this.isPlayAdCalled=!1,this.adDisplayController=void 0,this.videoSlot=void 0,this.slot=void 0,this.mediaAds=void 0,this.playbackParameters=void 0,this.onPlayAd=void 0,this.getPublicInstance=()=>({playAd:this.playAd,stopAd:this.stopAd,pauseAd:this.pauseAd,getAdPlayingState:this.getAdPlayingState,resumeAd:this.resumeAd,subscribe:this.subscribe,skipAd:this.skipAd,getAdSkippableState:this.getAdSkippableState,getAdPodTimeToSkip:this.getAdPodTimeToSkip,getAdVolume:this.getAdVolume,setAdVolume:this.setAdVolume,getAdVolumeAvailabilityState:this.getAdVolumeAvailabilityState,getAdRemainingTime:this.getAdRemainingTime,getAdPodRemainingTime:this.getAdPodRemainingTime,getAdDuration:this.getAdDuration,getAdPodDuration:this.getAdPodDuration}),this.playAd=()=>{if(this.isPlayAdCalled){It(new Ea({code:"ATTEMPT_TO_PLAY_AD_SECOND_TIME",details:void 0}))}else this.isPlayAdCalled=!0,this.onPlayAd(),this.adDisplayController.showAd(this.mediaAds).then(()=>{this.destroy(yy.adComplete)}).catch(L)},this.stopAd=()=>{this.destroy(yy.stopAd)},this.getAdPlayingState=()=>this.isPlayAdCalled?this.adDisplayController.isFinished?"end":this.adDisplayController.playingState.getValue():"idle",this.getAdSkippableState=()=>this.adDisplayController.adSkippableState.getValue(),this.getAdPodTimeToSkip=()=>!this.isPlayAdCalled||this.isDestroyed?Pf:this.adDisplayController.timeToSkip.getValue(),this.getAdVolume=()=>!this.isPlayAdCalled||this.isDestroyed?ga:this.adDisplayController.getVolume(),this.setAdVolume=e=>{this.isPlayAdCalled&&!this.isDestroyed&&(0===e?this.adDisplayController.setMuted(!0):this.adDisplayController.setVolume(e))},this.getAdVolumeAvailabilityState=()=>!this.isPlayAdCalled||this.isDestroyed?_p:this.adDisplayController.getAdVolumeAvailability(),this.getAdRemainingTime=()=>this.isPlayAdCalled?this.adDisplayController.getAdRemainingTime():this.getAdDuration(),this.getAdPodRemainingTime=()=>this.isPlayAdCalled?this.adDisplayController.getAdPodRemainingTime():this.getAdPodDuration(),this.getAdDuration=()=>this.isPlayAdCalled?this.adDisplayController.getDuration():this.mediaAds.getDuration(),this.getAdPodDuration=()=>{if(this.isPlayAdCalled)return this.adDisplayController.getAdPodDuration();const[e]=this.mediaAds.mediaAds;return e?e.getDuration():0},this.skipAd=()=>{this.getAdSkippableState()?this.adDisplayController.skipAllViewers():xd.error({error:new Ea({code:"ATTEMPT_TO_SKIP_NOT_SKIPPABLE_AD",details:void 0})})},this.subscribe=(e,t)=>{if("function"!==typeof t)return a;const i=i=>{try{t(i)}catch(c_){xd.error({error:new Ea({code:"APC_CALLBACK_ERROR",details:{eventName:e,data:i}})}),L(c_)}},r=()=>{i({})};switch(e){case gy.AdStarted:return this.adDisplayController.onAdStart.add(r);case gy.AdPodStarted:return this.adDisplayController.onAdMediaStart.add(r);case gy.AdPodImpression:return this.adDisplayController.onAdPodImpression.add(r);case gy.AdPodVideoFirstQuartile:return this.adDisplayController.onAdPodFirstQuartile.add(r);case gy.AdPodVideoMidpoint:return this.adDisplayController.onAdPodMidpoint.add(r);case gy.AdPodVideoThirdQuartile:return this.adDisplayController.onAdPodThirdQuartile.add(r);case gy.AdRemainingTimeChange:return this.adDisplayController.onCurrentPositionChange.add(()=>{i({})});case gy.AdPodSkipped:return this.adDisplayController.onAdSkipped.add(r);case gy.AdClickThru:return this.adDisplayController.onClickThrough.add(r);case gy.AdPodError:return this.adDisplayController.onAdPodError.add(e=>{let t;"string"===typeof e.code?t=e.code:(t="AD_POD_UNRECOGNIZED_ERROR_CODE",xd.error({error:new Ea({code:t,details:{error:e}})})),i({code:t})});case gy.AdPodStopped:return this.adDisplayController.onAdMediaEnd.add(r);case gy.AdPodComplete:return this.adDisplayController.onAdPodComplete.add(r);case gy.AdPodClose:return this.adDisplayController.onAdPodClose.add(r);case gy.AllAdPodVideoComplete:return this.adDisplayController.onAllAdPodComplete.add(r);case gy.AdStopped:return this.adDisplayController.onDestroy.add(r);case gy.AdSkippableStateChange:return this.adDisplayController.adSkippableState.add(e=>{i({skippableState:e})});case gy.AdVolumeChange:return this.adDisplayController.adVolume.add(()=>{i({})});case gy.AdVolumeAvailabilityStateChange:return this.adDisplayController.adVolumeAvailability.add(()=>{i({})});case gy.AdPlayingStateChange:return this.adDisplayController.playingState.add(e=>{i({playingState:e})});default:return a}},this.videoSlot=t,this.slot=i,this.mediaAds=r,this.playbackParameters=n,this.onPlayAd=o,this.adDisplayController=new my({config:this.playbackParameters,videoNode:this.videoSlot,videoWrapperNode:this.slot,renderOldSkinStrategy:s}),this.addDestroyHandler(()=>{this.adDisplayController.destroy()})}createPlaybackMethod(e,t){return()=>{if(this.isPlayAdCalled&&!this.isDestroyed)t();else{It(new Ea({code:this.isDestroyed?"CALL_PLAYBACK_METHOD_AFTER_STOP":"CALL_PLAYBACK_METHOD_BEFORE_PLAY",details:{methodName:e}}))}}}}class _y{constructor(e,t){var i=this;this.mediaAds=e,this.vast=t,this.preloadPromise=void 0,this.showAdPlaybackControllers=[],this.subscriptions=[],this.getPublicInstance=()=>({createPlaybackController:this.createPlaybackController,showAd:this.showAd,getAdDuration:this.getAdDuration,separateAdPods:this.separateAdPods,getAdSourceTypes:this.getAdSourceTypes,setStatsRootFields:this.setStatsRootFields,hasNotReplacedBroadcastAd:this.hasNotReplacedBroadcastAd,hasYandexCreative:this.hasYandexCreative,getNonYandexVastXmlTree:this.getNonYandexVastXmlTree,destroy:this.destroy,preload:this.preload,filterAdPodsIndependentOnHtmlControls:this.filterAdPodsIndependentOnHtmlControls,preventPlaying:this.preventPlaying,getAdPodsCount:this.getAdPodsCount,subscribe:this.subscribe}),this.cancelPreloading=e=>{Ja(this.mediaAds.mediaAds,t=>{t.isPreloaded()||t.cancelPreloading(e)})},this.destroyPreloading=e=>{Ja(this.mediaAds.mediaAds,t=>{t.cancelPreloading(e)})},this.createPlaybackController=function(e,t,r){void 0===r&&(r={}),xd.event({name:"CreatePlaybackController",probability:zd,data:{config:r}});const n=ro(r,["autoplay"]),{config:o,errors:s}=_t(n);Lt(s);const a=new vy({videoSlot:e,slot:t,mediaAds:i.mediaAds,playbackParameters:o,onPlayAd:()=>i.cancelPreloading("PublicControllerPlayAd"),renderOldSkinStrategy:"OnInit"}).getPublicInstance(),d=Es(i.subscriptions,e=>{let{event:t}=e;return"CreateAdPlaybackController"===t});return Ja(d,e=>{let{handler:t}=e;return t({playbackController:a})}),a},this.showAd=function(e,t,r){void 0===r&&(r={}),i.cancelPreloading("AdViewerShowAd");const n=i.createPlaybackController(e,t,r);i.showAdPlaybackControllers.push(n);const o=new Promise(e=>{n.subscribe(gy.AdStopped,()=>{i.showAdPlaybackControllers=Es(i.showAdPlaybackControllers,e=>e!==n),e()})});return n.playAd(),o},this.getAdDuration=()=>this.mediaAds.getDuration(),this.separateAdPods=()=>ss(this.mediaAds.mediaAds,e=>{const t=new _y(new Vh([e]),this.vast);return Ja(this.subscriptions,e=>{let{event:i,handler:r}=e;t.subscribe(i,r)}),t.getPublicInstance()}),this.getAdSourceTypes=()=>Es(ss(this.mediaAds.mediaAds,e=>{let{contentType:t}=e;return t}),(e,t,i)=>i.indexOf(e)===t),this.setStatsRootFields=e=>{xd.setRootFields(e)},this.hasNotReplacedBroadcastAd=()=>nc(this.mediaAds.mediaAds,e=>e.isNotReplacedBroadcastAd()),this.hasYandexCreative=()=>nc(this.mediaAds.mediaAds,e=>e.getIsYandexCreative()),this.getNonYandexVastXmlTree=()=>this.hasYandexCreative()?void 0:function e(t){const i=ss(t.children,t=>e(t));return{xmlString:t.xmlString,children:i}}(this.vast),this.destroy=()=>{Ja(this.showAdPlaybackControllers,e=>{e.stopAd()}),this.showAdPlaybackControllers.length=0,this.destroyPreloading("AdViewerDestroy"),this.preloadPromise=void 0,this.subscriptions.length=0},this.preload=e=>{let{preloadTimeout:t=gc}=e,i=ro(e,["preloadTimeout"]);if(h(Xa(window)))return Promise.resolve();const r=ha(t).promise.then(()=>this.destroyPreloading("Timeout"));if(void 0===this.preloadPromise){const e=ss(this.mediaAds.mediaAds,e=>e.preload(i));this.preloadPromise=Promise.all(e).then(a)}return Promise.race([this.preloadPromise,r])},this.filterAdPodsIndependentOnHtmlControls=e=>{const[t,i]=De(this.mediaAds.mediaAds,e=>e.getIfIsRequiredHtmlControls());this.mediaAds=new Vh(i),Ja(t,t=>{t.trackError(new Ea({code:"CANNOT_SHOW_CPC_CONTROLS",details:{mediaFile:t.getJSMediaFile(),reason:e}}))})},this.preventPlaying=(e,t)=>{Ja(this.mediaAds.mediaAds,i=>{i.trackError(new Ea({code:"AD_VIEWER_PLAYING_PREVENTED",details:{mediaFiles:i.vastAd.mediaFiles,reason:e,details:t}}))}),this.mediaAds=new Vh([])},this.getAdPodsCount=()=>this.mediaAds.mediaAds.length,this.subscribe=(e,t)=>(this.subscriptions.push({event:e,handler:t}),()=>{this.subscriptions=Es(this.subscriptions,i=>{return!(i.event===e&&i.handler===t)})})}}class wy{constructor(e){let{adConfig:t,whenVmapLoaded:i,adBreak:r,adPlacementOptions:n}=e;this.whenVmapLoaded=void 0,this.adBreak=void 0,this.vmap=void 0,this.adConfig=void 0,this.adPlacementOptions=void 0,this.getPublicInstance=()=>({loadAd:this.loadAd}),this.load=async e=>{await this.whenVmapLoaded;const{adConfig:t,adPlacementOptions:i}=this,{mediaAds:r}=await ur({adConfig:t,adBreak:e,adPlacementOptions:i,win:window});return r},this.loadAd=async()=>{try{await this.whenVmapLoaded;const e=this.adBreak?this.adBreak:this.getDefaultAdBreakToPlayAd();if(!e)throw new Ea({code:"AD_BREAK_IS_NOT_FOUND",details:{adConfig:this.adConfig,adBreaks:this.getAdBreaks()}});const{adConfig:t,adPlacementOptions:i}=this,{mediaAds:r,vast:n}=await ur({adConfig:t,adBreak:e,adPlacementOptions:i,win:window});return new _y(r,n).getPublicInstance()}catch(c_){throw or(c_),xd.errorToStats(c_),c_}},this.getInPageBlock=()=>hr(this.getAdBreaks(),"inpage")[0],this.getPrerollBlock=()=>hr(this.getAdBreaks(),"preroll")[0],this.getDefaultAdBreakToPlayAd=()=>{const{impId:e}=this.adConfig;return e?function(e,t){return bs(e,e=>e.impId===t)}(this.getAdBreaks(),e):hr(this.getAdBreaks(),"preroll")[0]},this.adConfig=t,this.whenVmapLoaded=i,this.adBreak=r,this.adPlacementOptions=n,xd.event({name:"CreateAdLoader",probability:zd,data:{adConfig:t,adBreak:r}}),i.then(e=>{this.vmap=e}).catch(e=>{xd.errorToStats(e)})}getAdBreaks(){if(this.adBreak)return[this.adBreak];if(this.vmap)return this.vmap.adBreaks;throw new Ea({code:"NO_AD_BREAK_OR_VMAP_IN_AD_LOADER",details:void 0})}}let Ey;!function(e){e.start="start",e.end="end"}(Ey||(Ey={}));const Sy={[Ey.start]:"preroll",[Ey.end]:"postroll"},by=ae({inpage:0,preroll:0,midroll:0,pauseroll:0,overlay:0,postroll:0,replaced:0,notReplaced:0,inroll:0,"inroll-overlay":0}),Ty="linear,nonlinear",Cy="linear",ky="nonlinear",Iy=0,Py=0,Ny=0,Dy={dark:"dark",light:"light"},Oy={top:"top",bottom:"bottom",auto:"auto","bottom-right":"bottom-right","bottom-left":"bottom-left","top-left":"top-left","top-right":"top-right"};let Ry;!function(e){e.manual="manual",e.auto="auto"}(Ry||(Ry={}));const Vy=e=>{const t=lo("Collapse",e);return!0===lo("Repeat",e)?Ry.auto:!1===t?Ry.manual:null},By=Pt(qu),My=qu.Unsafe,xy=e=>{if(!e||!p(e))return My;const{secureMode:t}=e;return t&&-1!==By.indexOf(t)?t:My},Ly=async e=>{let t,{url:i,vmapLoadParams:r,timeout:n}=e;xd.event({name:"VmapLoadStart",data:r,probability:zd});try{const e=!h(Xa(window));t=await Bt({url:i,data:null,timeout:n,withCredentials:e})}catch(c_){const t=Vc({thrownError:c_,errorCode:"VMAP_LOAD_ERROR",errorDetails:r,timeoutCode:"VMAP_LOAD_TIMEOUT",timeoutDetails:r});throw xd.error({error:t}),t}const{responseStatus:o,responseText:s}=t;if(200!==o){const e=(e=>{const t=e.match(/<!-- Page (\d+) disabled -->/i);if(!Array.isArray(t))return;const[,i]=t;return void 0!==i?parseInt(i,10):void 0})(s);if(U(e))throw new Ea({code:"BAD_PARTNER_OR_DOMAIN_FOR_VMAP_REQUEST",details:wo({},r,{responseStatus:o,disabledPageId:e})});throw new Ea({code:"INVALID_VMAP_RESPONSE_STATUS",details:wo({},r,{responseStatus:o,responseText:t.responseText})})}try{const{vmap:e,events:i,errors:n}=function(e,t,i){const{xml:r,responseText:n}=e,o={responseText:n};if(null===r||void 0===r)throw new Ea({code:"VMAP_EMPTY_RESPONSE",details:po({},t,{vmapXmlObject:e})});const s=r.querySelector("VMAP");if(!s)throw new Ea({code:"NO_VMAP_ROOT_NODE",details:o});const d=s.querySelectorAll("AdBreak"),l=new Yy,c=r.querySelector("VMAP > Extensions");if(!c)throw new Ea({code:"NO_VMAP_EXTENSIONS",details:o});a(s.querySelectorAll("TrackingEvents"));const u=e=>{const t=c.querySelector('Extension[type="'+e+'"]');return t?ut(t):""},h=e=>parseInt(u(e),10),p=e=>"true"===u(e);l.isSingleVideoSession=p("SingleVideoSession");const f={sessionId:u("SessionID"),title:u("Title").trim(),timeLeftShow:p("TimeLeftShow"),vastTimeout:h("VASTTimeout"),videoTimeout:h("VideoTimeout"),vpaidTimeout:h("VPAIDTimeout"),wrapperTimeout:h("WrapperTimeout"),wrapperMaxCount:h("WrapperMaxCount"),bufferFullTimeout:h("BufferFullTimeout"),bufferEmptyLimit:h("BufferEmptyLimit")},A=[],m=[];for(let a=0;a<d.length;a++)try{const{adBreak:e,errors:t,events:r}=ho(po({},f,i),o,d[a]);l.adBreaks.push(e),A.push(...t),m.push(...r)}catch(c_){A.push(c_)}return{vmap:l,errors:A,events:m}}(t,r,_o(r.config));return Lt(n),Ja(i,e=>xd.event(wo({labels:void 0},e))),xd.event({name:"VmapLoadSuccess",data:wo({},r,{vmap:e}),probability:zd}),e}catch(c_){throw xd.errorToStats(c_),c_}},Fy=3e3,Uy=()=>Vs()/vd,Hy="adsdksessionwatchedtimesinceadmap",zy=0;class Gy{constructor(){this.storage=void 0,localStorage&&(this.storage=localStorage)}update(e){let{category:t}=e;!function(e){let{category:t,storage:i,now:r=Uy}=e;if(!i)return;const n=Eo(i);n[t]=r();try{i.setItem(Hy,JSON.stringify(n))}catch(o){}}({category:t,storage:this.storage})}getWatchedTimeSinceAd(e){let{category:t}=e;return function(e){let{category:t,storage:i,now:r=Uy}=e;if(!i)return zy;const n=Eo(i)[t];if(!U(n))return zy;const o=r();if(!U(o))return zy;const s=o-n;return U(s)?s:zy}({category:t,storage:this.storage})}}const Wy="https://an.yandex.ru/vmap/",jy=e=>{const{category:t,startWatchedTime:i,additionalParams:r}=e,n=function(e){let{vmapId:t,category:i}=e;return t&&i?{"vmap-id":String(t),"video-category-id":String(i)}:t?{"vmap-id":String(t),"video-category-id":void 0}:{"vmap-id":void 0,"video-category-id":String(i)}}(e),o=_u(e);let s;try{s=new Gy}catch(c_){}let a=zy;return"number"===typeof t&&s&&(a=s.getWatchedTimeSinceAd({category:t})),So({},o,n,{wtime:"number"===typeof i?String(Math.floor(i)):void 0,"wtime-since-ad":String(Math.floor(a)),client_type:"html","vh-from":p(r)&&"string"===typeof r.from?r.from:void 0})};class Yy{constructor(){this.adBreaks=[],this.isSingleVideoSession=!1}static async load(e,t){const i=mo(e),r=function(e){let{config:t,adPlacementOptions:i=_a,win:r=window}=e;const{partnerId:n}=t;if(!n)throw new Ea({code:"VMAP_CONFIG_WITHOUT_PARTNER_ID",details:void 0});const o=jy(t),s=dt({url:re(""+Wy+n,o),ignoreAbd:!0,options:i}),a=Xa(r);return"function"===typeof a?a(re(s,{abd:"1"})):s}({config:i,adPlacementOptions:t,win:window}),{vmapLoadTimeout:n,blockInfoLoadTimeout:o}=i;o&&xd.warning({name:"VmapBlockInfoLoadTimeout",message:"blockInfoLoadTimeout is deprecated, use vmapLoadTimeout"});let s=Fy;n?s=n:o&&(s=o);const a={url:r,config:e,timeout:s};return await Ly({url:r,vmapLoadParams:a,timeout:s})}}const qy={impId:Iy,sessionId:"",title:"",timeLeftShow:!1,vastTimeout:3e3,videoTimeout:1e4,vpaidTimeout:1e4,wrapperTimeout:3e3,wrapperMaxCount:3,bufferFullTimeout:5e3,bufferEmptyLimit:5},Ky={adTagURI:"",adFoxParameters:void 0},Xy=bo({adType:"preroll"},Ky,qy),Qy="0",Jy=Co({adType:"inpage",replayMode:null,stick:!1},Ky,qy),Zy={repeatAfter:Ny,maxRepeatCount:Py,repeatNumber:0,timeOffset:10},$y=ko({adType:"midroll",broadcastReplace:!1},Ky,Zy,qy),ev=Io({adType:"overlay"},Ky,Zy,qy),tv=Po({adType:"postroll"},Ky,qy),iv={inpage:Jy,preroll:Xy,midroll:$y,postroll:tv,overlay:ev},rv=ae(iv),nv=async function(e,t,i,r){void 0===t&&(t=!1),void 0===i&&(i="preroll"),void 0===r&&(r=_a);const{adConfig:n,adBreak:o,warnings:s}=function(e,t,i){const{vastBase64:r,adBreakType:n}=e,o=Oo(e,["vastBase64","adBreakType"]),s=[],a=yo(o),{config:{videoContentId:d},errors:l}=a,c=Oo(a.config,["videoContentId"]);s.push(...l);const u=Do({},c,{videoContentId:To(d)});let h,p;if(r&&(u.vast=j(r)),No(n)?p=n:t&&(s.push(new Ea({code:"USING_SYNTHETIC_VMAP_TYPE_PARAMETER",details:{adLoaderConfig:e,useDefaultAdPlaybackParameters:t,syntheticVMAPType:i}})),No(i)&&(p=i)),p){const e=_o(o);h=Do({},iv[p],e)}return{adConfig:u,adBreak:h,warnings:s}}(e,t,i);Lt(s);const{adFoxParameters:a}=n;if(a){const e=o||Xy,t=new Yy;return t.adBreaks=[e],new wy({adConfig:n,whenVmapLoaded:Promise.resolve(t),adBreak:e,adPlacementOptions:r})}if(o){const e=new Yy;return e.adBreaks=[o],new wy({adConfig:n,whenVmapLoaded:Promise.resolve(e),adBreak:e.adBreaks[0],adPlacementOptions:r})}const d=Yy.load(n,r),l=new wy({adConfig:n,whenVmapLoaded:d,adPlacementOptions:r});return d.then(()=>l)},ov="_displayController_"+Math.floor(1e3*Math.random());class sv{get displayController(){return xd.warning({name:"GetDisplayControllerInPublicController",message:"AdSDK Warning: get displayController is deprecated, it will NOT be working in next versions"}),Vo(this)}set displayController(e){xd.warning({name:"SetDisplayControllerInPublicController",message:"AdSDK Warning: set displayController is deprecated, it will NOT be working in next versions"}),Ro(this,e)}constructor(e){this.onClickThrough=void 0,this.onStartError=void 0,this.onPlayStateChanged=void 0,this.onAdSkippableStateChange=void 0,this.onComplete=void 0,this.onFulfilled=void 0,this.onSlotVisible=void 0,this.onBeforeAdStart=void 0,this.onAdStart=void 0,this.onAdEnd=void 0,this.onAdMediaStart=void 0,this.onAdMediaEnd=void 0,this.onAdSkipped=void 0,this.onAdImpression=void 0,this.adStarted=!1,this.paused=!0,Ro(this,e),Vo(this).onBeforeAdStart.add(e=>{let{adType:t}=e;if("function"===typeof this.onBeforeAdStart)try{this.onBeforeAdStart(t)}catch(u_){console.error(u_)}}),Vo(this).onAdStart.add(e=>{let{adType:t}=e;if("function"===typeof this.onAdStart)try{this.onAdStart(t)}catch(u_){console.error(u_)}}),Vo(this).onAdMediaStart.add(e=>{let{adType:t}=e;if(this.adStarted=!0,!this.paused&&"function"===typeof this.onPlayStateChanged)try{this.onPlayStateChanged(!0)}catch(u_){console.error(u_)}if("function"===typeof this.onAdMediaStart)try{this.onAdMediaStart(t)}catch(u_){console.error(u_)}}),Vo(this).onAdMediaEnd.add(e=>{let{adType:t}=e;if("function"===typeof this.onComplete)try{this.onComplete()}catch(u_){console.error(u_)}if("function"===typeof this.onAdMediaEnd)try{this.onAdMediaEnd(t)}catch(u_){console.error(u_)}if("function"===typeof this.onPlayStateChanged)try{this.onPlayStateChanged(!1)}catch(u_){console.error(u_)}}),Vo(this).onAdEnd.add(e=>{let{adType:t}=e;if("function"===typeof this.onAdEnd)try{this.onAdEnd(t)}catch(u_){console.error(u_)}}),Vo(this).onClickThrough.add(()=>{if("function"===typeof this.onClickThrough)try{this.onClickThrough()}catch(u_){console.error(u_)}}),Vo(this).onAdSkipped.add(e=>{let{adType:t}=e;if("function"===typeof this.onAdSkipped)try{this.onAdSkipped(t)}catch(u_){console.error(u_)}});const t=()=>{if(this.paused=!1,this.adStarted&&"function"===typeof this.onPlayStateChanged)try{this.onPlayStateChanged(!0)}catch(u_){console.error(u_)}};Vo(this).onAdPodResume.add(t),Vo(this).onAdPodStart.add(t),Vo(this).onAdPodPause.add(()=>{if(this.paused=!0,"function"===typeof this.onPlayStateChanged)try{this.onPlayStateChanged(!1)}catch(u_){console.error(u_)}}),Vo(this).adSkippableState.add(e=>{if("function"===typeof this.onAdSkippableStateChange)try{this.onAdSkippableStateChange(e)}catch(u_){console.error(u_)}}),Vo(this).onAdPodImpression.add(()=>{if("function"===typeof this.onAdImpression)try{this.onAdImpression()}catch(u_){console.error(u_)}})}getCurrentContentType(){const e=Vo(this);if(e)return e.getCurrentContentType()}play(e){void 0===e&&(e=0===Vo(this).getVolume());const t=async()=>{Vo(this).setMuted(Vo(this).autoplayAbility.requireMute||e);try{await Vo(this).play()}catch(c_){xd.error({error:new Ea(c_,{code:"PUBLIC_CONTROLLER_PLAY_ERROR"})})}};void 0===Vo(this).getCurrentContentType()?Vo(this).onAdPodPlayAdMedia.addOne(t):t()}resume(){this.play()}pause(){Vo(this).pause()}skip(){xd.event({name:"PublicControllerSkip",probability:zd,data:{}}),Vo(this).skipAllViewers()}clickThrough(){Vo(this).clickThrough()}getPaused(){return Vo(this).getPaused()}getMuted(){return 0===Vo(this).getVolume()}getVolume(){return Vo(this).getVolume()}setVolume(e){Vo(this).setVolume(e)}getDuration(){return Vo(this).getDuration()}getAdWidth(){return Vo(this).getAdWidth()}getAdHeight(){return Vo(this).getAdHeight()}getCurrentTime(){return Vo(this).getCurrentTime()}getAdSkippableState(){return Vo(this).adSkippableState.getValue()}setStatsRootFields(e){xd.event({name:"UsingSetStatsRootFieldsInPublicController",probability:zd,data:void 0}),xd.setRootFields(e)}destroy(){Vo(this).destroy()}}const av={width:16,height:9},dv=(e,t,i)=>{const r=e.ownerDocument.defaultView.IntersectionObserver;let n=a;const o=new Promise(o=>{const s=new r(e=>{let[{isIntersecting:t,intersectionRatio:i}]=e;(t||i>0)&&(n(),o())},{threshold:i,rootMargin:t+" 0px"});s.observe(e),n=()=>{s.disconnect()}});return{teardown:n,promise:o}},lv=40,cv=/^(\d+\.)?\d+m?s$/,uv=/ms$/,hv=/calc\(([^\)]+)\)/,pv=/[-/*()]/;var fv=i(36),Av=i.n(fv);const{locals:mv}=Av.a,{STICKY_ANIMATION_DURATION_STYLE_VALUE:gv}=mv,yv=function e(t){if(hv.test(t)){const[,i]=t.match(hv);if(pv.test(i))throw new TypeError("Can't parse CSS duration string from ["+t+"]");const r=i.split("+").map(e=>e.trim());if(!r.every(e=>cv.test(e)))throw new TypeError("Can't parse CSS duration string from ["+t+"]");return r.reduce((t,i)=>t+e(i),0)}if(!cv.test(t))throw new TypeError("Can't parse CSS duration string from ["+t+"]");const i=parseFloat(t);return uv.test(t)?i:i*vd}(gv),vv=yv,_v="200%",wv=function(e){void 0===e&&(e=window);try{const t=e.document;return!!Boolean(t.body.attachShadow)&&fr(function(e,t){try{if(o(e.attachShadow))return e.attachShadow(t);if(o(e.createShadowRoot))return e.createShadowRoot();if(o(e.webkitCreateShadowRoot))return e.webkitCreateShadowRoot()}catch(u_){}return null}(t.createElement("div"),{mode:"open"}))}catch(t){return!1}},Ev=e=>{let{insertAfter:t,insertInto:i}=e;return t||i},Sv=o(window.WeakSet)?new window.WeakSet:[],bv={place(e){const t=Ev(e);return qs(Sv)?Sv.push(t):Sv.add(t)},free(e){const t=Ev(e);return qs(Sv)?Sv.splice(Sv.indexOf(t),1):Sv.delete(t)},isFree(e){const t=Ev(e);return qs(Sv)?-1===Sv.indexOf(t):!1===Sv.has(t)}},Tv=e=>{let{insertInto:t,className:i}=e;const r=it(document);return r.id="yaVideoPlayer_"+Math.floor(1e6*Math.random()),r.setAttribute("x-webkit-airplay","allow"),r.autoplay=!1,r.classList.add(i),r.volume=Hm,r.muted=!0,r.preload="auto",r.setAttribute("width","100%"),r.setAttribute("height","100%"),Jc(r,{display:"block",margin:"0",padding:"0"}),function(e){e.setAttribute("playsinline","playsinline"),e.setAttribute("webkit-playsinline","webkit-playsinline")}(r),Ve(t,r),r};var Cv=i(30),kv=i.n(Cv);const{locals:Iv}=kv.a;class Pv{constructor(e,t,i,r,o){if(this.container=void 0,this.buttonsContainer=void 0,this.wrapper=void 0,this.styleEl=void 0,this.unsubscribeButtonsClick=[],this.wrapper=e,this.styleEl=tt(this.wrapper,kv.a.toString()),this.container=ot(Iv.yaAdSdkEndScreen),t){const{randomBackgrounds:e}=t,i=we(e);n(this.container,{backgroundImage:"url('"+i+"')"})}this.buttonsContainer=ot(Iv.buttonsContainer),r&&this.addButton(Iv.row__goButton,op("LEARN_MORE",o),()=>{window.open(r,"_blank")}),this.addButton(Iv.row__replayButton,op("REPEAT",o),()=>{C(this.container),i()}),this.container.appendChild(this.buttonsContainer)}show(){this.wrapper&&this.wrapper.appendChild(this.container)}hide(){C(this.container)}destroy(){Ja(this.unsubscribeButtonsClick,e=>e),C(this.container),C(this.styleEl),this.wrapper=void 0}addButton(e,t,i){const r=ot(e,t);this.unsubscribeButtonsClick.push(d(r,"click",()=>{i()}));const n=ot(Iv.buttonsContainer__row);n.appendChild(r),this.buttonsContainer.appendChild(n)}}const Nv=e=>"undefined"===e,Dv=e=>{let{containerElementOrId:t,insertAfter:i,insertPosition:n,win:o=window}=e;const s=F(()=>o.document.querySelectorAll(""+i)),a={insertAfter:null,insertInto:null,win:o};if(!s||0===s.length||!r(i)||!i||Nv(i))return a.insertInto=function(e,t){return void 0===t&&(t=window),"string"===typeof e?t.document.getElementById(e):e}(t,o),a;const d=n||0;if(!Y(parseInt(""+d,10))&&!/^\d+%$/.test(""+d)&&!/^\d+$/.test(""+d))return new TypeError("Passed insertPosition value ["+n+"] cannot be parsed");const c=s.length;if(0===c)return a;const u=s[((e,t)=>{let i=r(e)?parseInt(e,10):e;if(r(e)&&-1!==e.indexOf("%")){const e=i/100;i=Math.round(e*(t-1))}else U(i)&&(i-=1);return i=l(i,0,t-1)})(d,c)];return a.insertAfter=u,a},Ov=e=>Boolean(e.insertAfter||e.insertInto),Rv=e=>{let{insertAfter:t,insertInto:i,win:r=window}=e;if(!t)return i;const n=r.document.createElement("div");return t.parentNode.insertBefore(n,t.nextSibling)};var Vv=i(15),Bv=i.n(Vv);const{locals:Mv}=Bv.a;class xv extends Zs{constructor(e){super(),this.shadowRootContainerElement=void 0,this.containerElement=void 0,this.initialContainerRect=void 0,this.placeholderElement=void 0,this.wrapperElement=void 0,this.stickyWrapperElement=void 0,this.videoNode=void 0,this.endScreen=void 0,this.showEndScreen=e=>{let{endScreenParams:t,onReplayButtonClick:i,clickLink:r,lang:n}=e;this.endScreen||(this.endScreen=new Pv(this.wrapperElement,t,i,r,n),this.addDestroyHandler(()=>{this.endScreen.destroy()})),this.endScreen.show()};const{insertPosition:t,insertAfter:i,containerElementOrId:r}=e;Nv(i)&&xd.event({name:"InPageInsertAfterIsSerializedUndefined",data:{containerElementOrId:String(r),insertPosition:t,insertAfter:i}});const n=Dv({insertPosition:t,insertAfter:i,containerElementOrId:r});if(da(n))throw this.destroy(),new Ea(n,{code:"INPAGE_CONTAINER_CONFIG_VALIDATION_ERROR",details:{containerElementOrId:String(r),insertPosition:t,insertAfter:i,error:n}});if(!Ov(n))throw this.destroy(),new Ea({code:"CANNOT_FIND_INPAGE_CONTAINER_ELEMENT",details:{containerElementOrId:String(r),insertPosition:t,insertAfter:i}});if(!bv.isFree(n))throw this.destroy(),new Ea({code:"INPAGE_CONTAINER_USED_TWICE",details:{containerElementOrId:String(r),insertPosition:t,insertAfter:i}});bv.place(n),this.addDestroyHandler(()=>{bv.free(n)});const o=Rv(n);this.initialContainerRect=o.getBoundingClientRect();const s=o.ownerDocument.defaultView,a=bn(o);wv(s)&&!a&&xd.error({error:new Ea({code:"INPAGE_CONTAINER_ELEMENT_NOT_SUPPORTS_SHADOW",details:{containerElementOrId:String(r),containerHTML:F(()=>o.outerHTML)}})}),a&&(a.className=Mv.yaInPageShadowContainerElement),this.shadowRootContainerElement=a||o,this.containerElement=o,this.addDestroyHandler(()=>{C(this.containerElement)}),this.placeholderElement=this.renderPlaceholder(),this.stickyWrapperElement=this.renderStickyWrapper(),this.placeholderElement.appendChild(this.stickyWrapperElement),this.wrapperElement=this.renderWrapper(),this.stickyWrapperElement.appendChild(this.wrapperElement),this.videoNode=Tv({insertInto:this.wrapperElement,className:Mv.yaInPageVideo}),this.shadowRootContainerElement.appendChild(this.placeholderElement),this.mountStyles()}makeHidden(){Jc(this.placeholderElement,{visibility:"hidden"})}makeVisible(){Jc(this.placeholderElement,{visibility:""})}mountStyles(){const e=tt(this.shadowRootContainerElement,Bv.a.toString());this.addDestroyHandler(()=>{C(e)})}renderPlaceholder(){const e=document.createElement("div");return e.className=Mv.yaInPagePlaceholderElement,e}renderStickyWrapper(){const e=document.createElement("div");return Jc(e,{width:"100%",height:"100%"}),e}renderWrapper(){const e=document.createElement("div");return e.classList.add(Mv.yaInPageWrapper),e}}let Lv=!1;const Fv={lock:()=>{Lv=!0},unLock:()=>{Lv=!1},isLocked:()=>Lv},Uv={stickTo:"auto",stickyColorScheme:"dark"},Hv=e=>"bottom-right"===e||"top-right"===e||"bottom-left"===e||"top-left"===e;class zv extends Zs{constructor(){super(),this.initialState="Inline",this.currentState=this.initialState,this.nextState=void 0,this.transitionWays={Inline:"Detached",Detached:"Sticky",Sticky:"Attached",Attached:"Inline"},this.onStateChange=[],this.subscribeForStateTransition=(e,t)=>this.subscribeForStateChange(i=>{if(e.previousState===i.previousState&&e.nextState===i.nextState)return t(i)}),this.addDestroyHandler(()=>{this.onStateChange.length=0})}getCurrentState(){return this.currentState}isWithinTransition(){return void 0!==this.nextState}getNextState(){return this.nextState}subscribeForStateChange(e){return this.onStateChange.push(e),()=>{this.onStateChange=Es(this.onStateChange,t=>t!==e)}}isValidTransition(e){return e===this.transitionWays[this.currentState]}async setState(e){if(!this.isValidTransition(e))throw new ReferenceError("StickyFSA: invalid transition from ["+this.currentState+"] to ["+e+"]");const t=this.currentState;this.nextState=e;for(const i of this.onStateChange)await i({previousState:t,nextState:e});this.currentState=e,this.nextState=void 0}}const Gv=hm,Wv=e=>{let{adWidth:t,adHeight:i,windowWidth:r,description:n}=e;if(!n)return!1;const o=Gv*(t/i);return!!U(o)&&o/r<.55},{locals:jv}=Bv.a,Yv=i(53);class qv extends Zs{constructor(e){super(),this.params=e,this.setDescription=a,this.description="",this.withDisabledAnimation=e=>{this.setAnimationEnabled(!1),e(),function(e){e.offsetLeft}(this.params.stickyWrapper),this.setAnimationEnabled(!0)},this.waitForAnimationEnd=()=>{const e=ha(yv),t=e=>e.target===this.params.stickyWrapper&&("width"===e.propertyName||"transform"===e.propertyName);let i=a;const r=new Promise(e=>i=d(this.params.stickyWrapper,"transitionend",i=>{t(i)&&e()})),n=()=>{e.clear(),i()};return this.addDestroyHandler(n),Promise.race([e.promise,r]).then(n)},this.render(),this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper,!0),Hv(this.params.stickyConfig.stickTo)?this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__variant__flyroll,!0):this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__variant__covering,!0)}updateAdditionalContentVisibility(){const e=this.params.getAdDimensions(),t=Hv(this.params.stickyConfig.stickTo)||Wv({adWidth:e.width,adHeight:e.height,windowWidth:this.params.win.innerWidth,description:this.description});this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__additionalContent_enabled,t)}setAnimatingStateClassName(e){this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__isAnimating,e)}handleClassNames(){let e=!1,t=!1;switch(this.params.stickyFSA.getNextState()||this.params.stickyFSA.getCurrentState()){case"Inline":e=!0,t=!1;break;case"Detached":e=!1,t=!1;break;case"Sticky":e=!1,t=!0;break;case"Attached":e=!0,t=!1;break;default:throw new Error("unhandled state, should never be executed")}this.setAttachStateClassNames(e),this.setStickyStateClassNames(t)}setAnimationEnabled(e){e?this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__unAnimated,!1):this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__unAnimated,!0)}render(){const{stickyWrapper:e}=this.params,t=e.appendChild(this.renderAdditionalContent()),i=e.appendChild(this.renderCross());this.addDestroyHandler(()=>{C(t),C(i)})}renderAdditionalContent(){const e=document.createElement("div");if(this.toggleClassName(e,jv.yaInpageAdditionalContent,!0),Hv(this.params.stickyConfig.stickTo)){const t=document.createElement("div");this.toggleClassName(t,jv.yaInpageAdditionalContent__adTitle,!0),t.innerHTML="\u0440\u0435\u043a\u043b\u0430\u043c\u0430",e.appendChild(t)}else{switch(this.params.stickyConfig.stickyColorScheme){case"dark":this.toggleClassName(e,jv.yaInpageAdditionalContent_dark,!0);break;default:a()}e.appendChild(this.renderDescription()),e.appendChild(this.renderActionButton())}const t=document.createElement("div");return this.toggleClassName(t,jv.yaInpageAdditionalContentContainer,!0),t.appendChild(e),t}renderDescription(){var e=this;const t=document.createElement("div");return this.toggleClassName(t,jv.yaInpageAdditionalContent__description,!0),this.addDestroyHandler(d(t,"click",this.params.onActionClick)),this.setDescription=function(i){void 0===i&&(i=""),e.description=i,t.innerText=i,e.updateAdditionalContentVisibility()},t}renderActionButton(){const e=document.createElement("div");this.toggleClassName(e,jv.yaInpageAdditionalContent__buttonClickableArea,!0);const t=document.createElement("div");return this.toggleClassName(t,jv.yaInpageAdditionalContent__button,!0),t.appendChild(e),t.innerText="\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435",this.addDestroyHandler(d(t,"click",this.params.onActionClick)),t}renderCross(){const e=document.createElement("div");switch(this.toggleClassName(e,jv.yaInpageCross,!0),this.params.stickyConfig.stickyColorScheme){case"dark":this.toggleClassName(e,jv.yaInpageCross_dark,!0);break;default:a()}return e.innerHTML=Yv,this.addDestroyHandler(d(e,"click",this.params.onCrossClick)),e}toggleClassName(e,t,i){const{classList:r}=e;return i?r.add(t):r.remove(t)}toggleStickyWrapperClassName(e,t){return this.toggleClassName(this.params.stickyWrapper,e,t)}setStickyStateClassNames(e){if(this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__inline,!e),this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__sticky,e),Hv(this.params.stickyConfig.stickTo)?this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__sticky__flyroll,e):this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__sticky__covering,e),!Hv(this.params.stickyConfig.stickTo))switch(this.params.stickyConfig.stickyColorScheme){case"dark":this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__sticky__covering_color_scheme_dark,e);break;case"light":this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__sticky__covering_color_scheme_light,e);break;default:a()}}setAttachStateClassNames(e){this.toggleStickyWrapperClassName(jv.yaInPageStickyWrapper__detached,!e)}}const Kv=pm,Xv=e=>{let{direction:t,offsets:i,getInpageCurrentRect:r,getViewDimensions:n,getStickyDimensions:o,getPlaceholderDimensions:s}=e;const a=i.x*-t.x,d=i.y*-t.y,l=r(),c=l.left,u=l.top,h=n(),p={x:(-1===t.x?0:h.width-l.width)-c+a,y:(-1===t.y?0:h.height-l.height)-u+d},f=o(),A=s(),m={x:f.width/A.width,y:f.height/A.height};return{origin:(1===t.y?"bottom":0===t.y?"center":"top")+" "+(1===t.x?"right":0===t.y?"center":"left"),translation:p,scale:m}},Qv={covering:{x:0,y:0},flyroll:{x:32,y:24}};class Jv{constructor(e){this.params=e,this.intrinsicStickPosition={horizontal:"right",vertical:"bottom"},this.actualizeStickPosition(),"auto"===this.params.stickyConfig.stickTo&&this.params.stickyFSA.subscribeForStateTransition({previousState:"Inline",nextState:"Detached"},()=>this.actualizeStickPosition())}getViewDimensions(){const{clientHeight:e,clientWidth:t}=this.params.win.document.documentElement;return{height:e,width:t}}getStickyDimensions(){const e=this.getViewDimensions().width;return Hv(this.params.stickyConfig.stickTo)&&e>=1600?{width:360,height:202}:{width:Kv,height:Gv}}getPlaceholderDimensions(){const{width:e,height:t}=this.params.getPlaceholderDOMRect();return{width:e,height:t}}fromDOMDimensionsToCSSDimensions(e){return{width:e.width+"px",height:e.height+"px"}}getTransformStyles(){const{intrinsicStickPosition:e}=this,t=Hv(this.params.stickyConfig.stickTo)?Qv.flyroll:Qv.covering,i={x:Hv(this.params.stickyConfig.stickTo)?"right"===e.horizontal?1:-1:0,y:"bottom"===e.vertical?1:-1},{origin:r,scale:n,translation:o}=Xv({direction:i,offsets:t,getInpageCurrentRect:()=>this.params.getStickyWrapperDOMRect(),getViewDimensions:()=>this.getViewDimensions(),getStickyDimensions:()=>this.getStickyDimensions(),getPlaceholderDimensions:()=>this.getPlaceholderDimensions()});return{transformOrigin:r,transform:"translate("+o.x+"px, "+o.y+"px) scale("+n.x+", "+n.y+")"}}getInlineStateRect(){const e="top"===this.intrinsicStickPosition.vertical?"0":"",t="bottom"===this.intrinsicStickPosition.vertical?"0":"",i="left"===this.intrinsicStickPosition.horizontal?"0":"";return Uo({top:e,right:"right"===this.intrinsicStickPosition.horizontal?"0":"",bottom:t,left:i},this.fromDOMDimensionsToCSSDimensions(this.getPlaceholderDimensions()))}getDetachedStateRect(){const{intrinsicStickPosition:e}=this,{left:t,right:i,top:r,bottom:n}=this.params.getStickyWrapperDOMRect(),{width:o,height:s}=this.getViewDimensions(),a="bottom"===e.vertical?s-n+"px":"";return Uo({top:"top"===e.vertical?r+"px":"",bottom:a,left:"left"===e.horizontal?t+"px":"",right:"right"===e.horizontal?o-i+"px":""},this.fromDOMDimensionsToCSSDimensions(this.getPlaceholderDimensions()))}getStickyStateRect(){const{intrinsicStickPosition:e}=this,t=Hv(this.params.stickyConfig.stickTo)?Qv.flyroll:Qv.covering,i="top"===e.vertical?t.y+"px":"",r="bottom"===e.vertical?t.y+"px":"",n="left"===e.horizontal?t.x+"px":"",o="right"===e.horizontal?t.x+"px":"",s=this.getStickyDimensions();return{top:i,right:o,bottom:r,left:n,width:Hv(this.params.stickyConfig.stickTo)?s.width+"px":"100%",height:s.height+"px"}}getAttachedStateRect(){const{intrinsicStickPosition:e}=this,{left:t,right:i,top:r,bottom:n}=this.params.getPlaceholderDOMRect(),{left:o,right:s,top:a,bottom:d,width:l,height:c}=this.params.getStickyWrapperDOMRect();return{top:"top"===e.vertical?a-r+"px":"",bottom:"bottom"===e.vertical?n-d+"px":"",left:"left"===e.horizontal?o-t+"px":"",right:"right"===e.horizontal?i-s+"px":"",width:l+"px",height:c+"px"}}actualizeStickPosition(){const{stickTo:e}=this.params.stickyConfig;if(this.intrinsicStickPosition={vertical:"top-right"===e||"top-left"===e||"top"===e?"top":"bottom",horizontal:"bottom-right"===e||"top-right"===e?"right":"left"},"auto"!==e)return;const t=this.params.getInlineContainerTopCornerPosition()<=0;this.intrinsicStickPosition.vertical=t?"top":"bottom"}}const Zv=["position","left","top","bottom","width","height","background","display","zIndex","transform"];class $v{constructor(e){this.elements=e,this.storedStyles=[]}save(){Ja(this.elements,e=>{this.storedStyles.push(this.extract(e))})}restore(){Ja(this.elements,(e,t)=>{n(e,this.storedStyles[t])}),this.storedStyles.length=0}extract(e){return ca(Zv,(t,i)=>(t[i]=e.style[i],t),{})}}class e_ extends Zs{constructor(e){super(),this.params=e,this.win=void 0,this.stickyInpageLayout=void 0,this.stickyFSA=void 0,this.stickyPositioning=void 0,this.stylesStore=void 0,this.stickyConfig=void 0,this.handleWindowResize=aa(()=>{this.stickyInpageLayout.updateAdditionalContentVisibility()}),this.setDescription=e=>this.stickyInpageLayout.setDescription(e),this.handleFromInlineToDetachTransition=()=>{this.stylesStore.save(),this.stickyInpageLayout.updateAdditionalContentVisibility(),this.stickyInpageLayout.withDisabledAnimation(()=>{n(this.params.stickyWrapper,Ho({position:"fixed"},this.stickyPositioning.getDetachedStateRect()))}),Hv(this.stickyConfig.stickTo)||n(this.params.wrapper,this.stickyPositioning.fromDOMDimensionsToCSSDimensions(this.stickyPositioning.getPlaceholderDimensions())),this.stickyInpageLayout.handleClassNames()},this.handleFromDetachToStickyTransition=async()=>{Hv(this.stickyConfig.stickTo)?n(this.params.stickyWrapper,this.stickyPositioning.getTransformStyles()):(n(this.params.stickyWrapper,this.stickyPositioning.getStickyStateRect()),n(this.params.wrapper,this.stickyPositioning.fromDOMDimensionsToCSSDimensions(this.stickyPositioning.getStickyDimensions()))),this.stickyInpageLayout.setAnimatingStateClassName(!0),await this.stickyInpageLayout.waitForAnimationEnd(),this.stickyInpageLayout.setAnimatingStateClassName(!1),this.stickyInpageLayout.withDisabledAnimation(()=>{n(this.params.stickyWrapper,Ho({transform:"",transformOrigin:""},this.stickyPositioning.getStickyStateRect()))}),this.stickyInpageLayout.handleClassNames()},this.handleFromStickyToAttachTransition=async()=>{this.stickyInpageLayout.withDisabledAnimation(()=>{n(this.params.stickyWrapper,Ho({position:"absolute"},this.stickyPositioning.getAttachedStateRect()))}),this.stickyInpageLayout.handleClassNames()},this.handleFromAttachToInlineTransition=async()=>{this.stickyInpageLayout.handleClassNames(),Hv(this.stickyConfig.stickTo)?(this.stickyInpageLayout.withDisabledAnimation(()=>{n(this.params.stickyWrapper,this.stickyPositioning.getInlineStateRect())}),this.stickyInpageLayout.withDisabledAnimation(()=>{n(this.params.stickyWrapper,this.stickyPositioning.getTransformStyles())}),n(this.params.stickyWrapper,{transform:""})):(n(this.params.stickyWrapper,this.stickyPositioning.getInlineStateRect()),n(this.params.wrapper,this.stickyPositioning.fromDOMDimensionsToCSSDimensions(this.stickyPositioning.getPlaceholderDimensions()))),this.stickyInpageLayout.setAnimatingStateClassName(!0),await this.stickyInpageLayout.waitForAnimationEnd(),this.stickyInpageLayout.setAnimatingStateClassName(!1),this.stickyInpageLayout.withDisabledAnimation(()=>this.stylesStore.restore())},this.win=this.params.placeholder.ownerDocument.defaultView,this.stickyFSA=new zv,this.addDestroyHandler(()=>this.stickyFSA.destroy()),this.stickyConfig=Ho({},Uv,z(this.params.stickyConfig)),this.stickyInpageLayout=new qv({stickyFSA:this.stickyFSA,stickyWrapper:this.params.stickyWrapper,win:this.win,stickyConfig:this.stickyConfig,getAdDimensions:this.params.getAdDimensions,onActionClick:this.params.onActionClick,onCrossClick:this.params.onCrossClick}),this.addDestroyHandler(()=>this.stickyInpageLayout.destroy()),this.stickyPositioning=new Jv({stickyFSA:this.stickyFSA,getInlineContainerTopCornerPosition:()=>this.params.stickyWrapper.getBoundingClientRect().top,stickyConfig:this.stickyConfig,win:this.win,getPlaceholderDOMRect:()=>this.params.placeholder.getBoundingClientRect(),getStickyWrapperDOMRect:()=>this.params.stickyWrapper.getBoundingClientRect()}),this.stylesStore=new $v([this.params.stickyWrapper,this.params.wrapper]),this.addDestroyHandler(d(this.win,"resize",this.handleWindowResize)),this.stickyFSA.subscribeForStateTransition({previousState:"Inline",nextState:"Detached"},this.handleFromInlineToDetachTransition),this.stickyFSA.subscribeForStateTransition({previousState:"Detached",nextState:"Sticky"},this.handleFromDetachToStickyTransition),this.stickyFSA.subscribeForStateTransition({previousState:"Sticky",nextState:"Attached"},this.handleFromStickyToAttachTransition),this.stickyFSA.subscribeForStateTransition({previousState:"Attached",nextState:"Inline"},this.handleFromAttachToInlineTransition)}async goSticky(){await this.stickyFSA.setState("Detached"),await this.stickyFSA.setState("Sticky")}async unSticky(){await this.stickyFSA.setState("Attached"),await this.stickyFSA.setState("Inline")}}const t_=e=>{e.controlsSettings=wt(e),e.controlsSettings.controlsVisibility[yc.skip]=!1,e.controlsSettings.controlsVisibility[yc.title]=!1,e.vastUrl&&st(e.vastUrl)&&(e.vastUrl=(e=>re(e,{tags:"inpage"}))(e.vastUrl)),e.backgroundBlur=!0,e.videoTimeout=1e4,e.vpaidTimeout=1e4},i_=e=>e?(t_(e),e):new Error('Parameter "adConfig" is required.'),r_=(e,t)=>"replayMode"in e?e.replayMode:t.replayMode,n_=e=>{let{win:t,inPageConfig:i,adBreak:r}=e;return!Pu(t)&&("boolean"===typeof i.stick?i.stick:r.stick)},o_=function(e){void 0===e&&(e=window);const t=e.navigator.userAgent;return-1!==t.indexOf("Opera Mini")||(-1!==t.indexOf("; wv)")&&-1!==t.indexOf(" OPR/")||-1!==t.indexOf(" OPiOS/"))}();class s_ extends Zs{constructor(e){super(),this.params=e,this.overlapVisibility=new ea(!1),this.recalculateElementOverlap=aa(()=>{if(this.isDestroyed)return;const e=!zo(this.params.element,this.params.points);this.overlapVisibility.dispatch(e)}),this.startObservingElementOverlap()}startObservingElementOverlap(){this.addDestroyHandler(M(this.recalculateElementOverlap));const{promise:e,clear:t}=ha(0);e.then(this.recalculateElementOverlap).catch(L),this.addDestroyHandler(t)}}const a_=[0,0];class d_ extends Zs{constructor(e){super(),this.visualVisibility=void 0;const t=new Uh(e,{considerDocumentVisibility:!1});this.addDestroyHandler(()=>t.destroy());const i=new ea(!1);t.onChangeVisibility(e=>i.dispatch(e));const r=new s_({element:e,points:[a_]});this.addDestroyHandler(()=>r.destroy()),this.visualVisibility=new ea(t.getVisibility()&&r.overlapVisibility.getValue()),mr([i,r.overlapVisibility],(e,t)=>e&&t,e=>this.visualVisibility.dispatch(e))}}class l_ extends Zs{constructor(e,t,i){super(),this.callback=i,this.containerWindow=void 0,this.containerDocument=void 0,this.adConfig=void 0,this.layout=void 0,this.placeholderSizeSensor=void 0,this.visualVisibility=void 0,this.displayController=void 0,this.displayControllerOnAdEndPromise=void 0,this.mediaAds=void 0,this.adLoader=void 0,this.replayMode=null,this.stickyInPageController=void 0,this.stickyConfig=void 0,this.publicController=void 0,this.isContainerSizeFixed=void 0,this.pausedByContainerVisibility=!1,this.pausedByDocumentVisibility=!1,this.isCurrentlyInStickyState=!1,this.documentVisibility=new ea(!1),this.destroy=e=>{this.isDestroyed||(Ct("inPage: destroy"),e&&(It(e),this.callback(e)),super.destroy(e))},this.handleWindowResize=()=>{Ct("inPage: handle window resize");const{displayController:e}=this;this.adjustAdHeight({width:e.getAdWidth(),height:e.getAdHeight()})},this.showAds=async()=>{try{this.displayControllerOnAdEndPromise||await this.initAdForPlaying();const{gui:e}=this.displayController;if(this.displayController.autoplayAbility.requireUserGesture?(e&&e.controls.play.unBlock(),e&&e.controls.play.removeHideReason(wc.INPAGE_RETAINS_CONTROL).show(),e&&this.displayController.onAdMediaStart.addOne(()=>{e.controls.play.addHideReason(wc.INPAGE_RETAINS_CONTROL)}),Ct("inPage: wait for media activation event to play ad"),this.displayController.setMuted(!1),xd.event({name:"InPageWaitingForUserGesture",probability:zd,data:{autoplayAbility:this.displayController.autoplayAbility}})):(Ct("inPage: start to play ad"),this.displayController.play(!0).catch(e=>{xd.error({error:new Ea(e,{code:"InPageOnReadyPlayError"})})}),xd.event({name:"InPageAutoplay",probability:zd,data:{autoplayAbility:this.displayController.autoplayAbility}})),await this.displayControllerOnAdEndPromise,this.displayControllerOnAdEndPromise=void 0,this.replayMode===Ry.auto)return;if(this.replayMode===Ry.manual){Ct("inPage: ad played. show end screen");const[e]=this.mediaAds.mediaAds,{endScreenParams:t,clickThrough:i}=e.vastAd,r=()=>{xd.event({name:"InPageReplayAdManually",probability:zd,data:{}}),this.showAds()};this.layout.showEndScreen({endScreenParams:t,onReplayButtonClick:r,clickLink:1===this.mediaAds.mediaAds.length?i:void 0,lang:this.adConfig.lang})}else Ct("inPage: finish playing ad"),this.isCurrentlyInStickyState&&await this.turnOffStickyMode({animated:!0}),this.destroy(void 0)}catch(c_){this.destroy(c_)}},this.handleDocumentVisibilityChange=e=>{this.displayController.getPaused()||e?e&&this.pausedByDocumentVisibility&&(Ct("inPage: resume by document visibility"),this.displayController.resume(),this.pausedByDocumentVisibility=!1,xd.event({name:"InPageDocumentVisibilityResume",probability:zd,data:{}})):(Ct("inPage: pause since document is hidden"),this.displayController.pause(),this.pausedByDocumentVisibility=!0,xd.event({name:"InPageDocumentVisibilityPause",probability:zd,data:{}}))},this.handlePlaceholderVisibilityChange=e=>{this.documentVisibility.getValue()&&(e?this.stickyInPageController&&this.canChangeStickyState({willBeSticky:!1})?(Ct("inPage: go into inline since container is visible"),this.changeStickyState({willBeSticky:!1})):!this.isCurrentlyInStickyState&&this.pausedByContainerVisibility&&this.displayController.getPaused()&&(Ct("inPage: pause playback since container is visible"),this.pausedByContainerVisibility=!1,this.displayController.resume(),xd.event({name:"InPageElementVisibilityResume",probability:zd,data:{}})):this.stickyInPageController&&this.canChangeStickyState({willBeSticky:!0})?(Ct("inPage: go into sticky since container is hidden"),this.changeStickyState({willBeSticky:!0})):this.isCurrentlyInStickyState||this.pausedByContainerVisibility||this.displayController.getPaused()||(Ct("inPage: pause since container is hidden"),this.pausedByContainerVisibility=!0,this.displayController.pause(),xd.event({name:"InPageElementVisibilityPause",probability:zd,data:{}})))},this.onceWhenCanShowInpage=()=>{if("function"===typeof this.publicController.onSlotVisible)try{this.publicController.onSlotVisible()}catch(u_){console.error(u_)}},this.handleStickyInpageCrossClick=()=>{this.stickyInPageController&&(Ct("inPage: handle cross click"),xd.event({name:"InPageStickyCrossClick",probability:zd,data:{}}),this.turnOffStickyMode({animated:!0}),this.visualVisibility.getValue()||this.displayController.getPaused()||(this.pausedByContainerVisibility=!0,this.displayController.pause()))},this.makeStickAction=async e=>{try{this.displayController.disableResizeHandling(),await e(),this.displayController.enableResizeHandling()}catch(c_){xd.error({error:new Ea(c_,{code:"InPageOnStickError"})})}},Ct("inPage: validate arguments");const r=i_(t);if(da(r))throw r;this.adConfig=r;const n={controlsVisibility:{[yc.play]:!1}};try{this.layout=new xv({containerElementOrId:e,insertAfter:this.adConfig.insertAfter,insertPosition:this.adConfig.insertPosition}),this.addDestroyHandler(()=>{this.layout.destroy()}),this.layout.makeHidden()}catch(u_){throw this.destroy(void 0),u_}const o=this.layout.initialContainerRect;if(0===o.width)throw this.destroy(void 0),new Ea({code:"INPAGE_CONTAINER_ZERO_WIDTH",details:{containerElementOrId:String(e),insertAfter:this.adConfig.insertAfter,insertPosition:this.adConfig.insertPosition}});this.isContainerSizeFixed=o.height>0,xd.event({name:"AddInPageVideo",probability:zd,data:{adConfig:t,containerElementOrId:String(e),containerRect:o}}),this.containerWindow=F(()=>this.layout.placeholderElement.ownerDocument.defaultView)||window,this.containerDocument=this.containerWindow.document,Ct("inPage: finish init"),this.adjustAdHeight(av),this.displayController=new my({config:t,videoNode:this.layout.videoNode,videoWrapperNode:this.layout.wrapperElement,vpaidControlsSettings:n}),this.subscribeDisplayControllerEvents(this.displayController),this.documentVisibility.add(this.handleDocumentVisibilityChange),this.documentVisibility.dispatch(S(this.containerDocument)),this.addDestroyHandler(b(this.containerDocument,e=>this.documentVisibility.dispatch(e))),this.displayController.gui&&this.displayController.gui.controls.play.addHideReason(wc.INPAGE_RETAINS_CONTROL),this.publicController=new sv(this.displayController),this.placeholderSizeSensor=new na(this.layout.placeholderElement),this.addDestroyHandler(()=>this.placeholderSizeSensor.destroy());const s=new d_(this.layout.placeholderElement);this.visualVisibility=s.visualVisibility,this.addDestroyHandler(()=>s.destroy()),this.layout.makeVisible(),Ct("inPage: call constructor callback"),this.callback(this.publicController),this.processInPage().catch(this.destroy)}async processInPage(){Ct("inPage: wait for loadVmap");const e=await this.loadVmap();this.replayMode=r_(this.adConfig,e),n_({win:window,inPageConfig:this.adConfig,adBreak:e})&&(Ct("inPage: initialize sticky"),this.stickyConfig=Go({stickTo:e.stickTo,stickyColorScheme:e.stickyColorScheme},z(oo(this.adConfig))),this.stickyInPageController=new e_({placeholder:this.layout.placeholderElement,stickyWrapper:this.layout.stickyWrapperElement,wrapper:this.layout.wrapperElement,stickyConfig:this.stickyConfig,getAdDimensions:()=>({width:this.displayController.getAdWidth(),height:this.displayController.getAdHeight()}),onActionClick:()=>this.displayController.clickThrough(),onCrossClick:this.handleStickyInpageCrossClick}),this.addDestroyHandler(()=>{this.turnOffStickyMode({animated:!1})}));const t=this.waitForShowing();Ct("inPage: wait for loadAd"),await this.loadAd(e),sa&&(Ct("inPage: wait for warming up"),await Promise.race([this.waitForWarmingUp(),t])),Ct("inPage: warm up ad"),await this.warmAdUp(),Ct("inPage: wait for to be visible"),await t,Ct("inPage: visibility reached"),this.onceWhenCanShowInpage();let i=this.showAds();this.replayMode===Ry.auto&&this.displayController.onAllAdPodComplete.add(async()=>{await i,this.isDestroyed||(Ct("inPage: play ad again"),xd.event({name:"InPageReplayAdAutomatically",probability:zd,data:{}}),i=this.showAds())})}subscribeDisplayControllerEvents(e){e.onDestroy.add(this.destroy),e.onAdPodStart.addOne(()=>{this.addDestroyHandler(d(this.containerWindow,"resize",aa(this.handleWindowResize))),this.handleWindowResize()}),e.onAdPodStart.addOne(async()=>{this.visualVisibility.add(function(e,t,i,r){function n(){null!==o&&clearTimeout(o),o=null}3===arguments.length&&"boolean"!==typeof i&&(r=i,i=!1);let o=null;const s=function(){const s=arguments;r=r||this,i&&null===o&&e.apply(r,s),n(),o=window.setTimeout((function(){i||e.apply(r,s),o=null}),t)};return s.cancel=n,s}(e=>{Ct("handle visual state change",e),this.handlePlaceholderVisibilityChange(e)},vv));const e=this.visualVisibility.getValue();Ct("handle AdPodStart with visualVisibility",e,this.displayController.slotVisibilitySensor.getVisibility()),this.handlePlaceholderVisibilityChange(e)}),e.onAdStop.add(()=>{this.displayController.destroy()}),e.onAdMediaStart.add(e=>{let{viewer:t}=e;this.stickyInPageController&&this.stickyInPageController.setDescription(t.mediaAd.getDescription())})}async loadVmap(){const e=Boolean(this.adConfig.partnerId&&void 0!==this.adConfig.category);this.adLoader=await nv(Go({},this.adConfig,{adBreakType:e?void 0:"inpage"}),void 0,void 0,this.displayController.getAdPlacementOptions());const t=this.adLoader.getInPageBlock();if(t)return t;throw new Ea({code:"NO_INPAGE_AD_BREAK_IN_VMAP",details:{config:this.adConfig}})}async waitForShowing(){const e=function(e,t,i){const r={promise:Promise.resolve(void 0),unsubscribe:()=>void 0};if(Fo(t,i))return Ct("whenCanShow: element is already visible"),r;if(Lo(t)&&Bo(t))return Ct("whenCanShow: element is at the end of the <body>"),r;const n=[],o=()=>{O(ss(n,e=>()=>F(e)))};let s=a;if(sa&&!zt(window)){const r=e,o=t.getBoundingClientRect().height*i,{promise:a,teardown:d}=dv(r,"-"+o+"px",0);n.push(()=>d()),a.then(()=>{Ct("whenCanShow: waitTillVisibleWithOffset complete with thresholdBoundary=["+o+"]"),s()}).catch(L)}return n.push(M(()=>{if(!s)return;const e=Fo(t,i),r=Lo(t)&&Bo(t);(e||r)&&(Ct("whenCanShow: visibility detected by interval isVisible=["+e+"] isAtTheEndOfTheBody=["+r+"]"),s(),o())})),{promise:new Promise(e=>{s=e}),unsubscribe:o}}(this.layout.shadowRootContainerElement,this.layout.placeholderElement,oa);this.addDestroyHandler(e.unsubscribe),await e.promise}async loadAd(e){this.mediaAds=await this.adLoader.load(e),this.mediaAds.mediaAds.length>1&&xd.event({name:"InPageHasMultipleMediaAds",probability:zd,data:{mediaAdsCount:this.mediaAds.mediaAds.length}})}async initAdForPlaying(){this.displayControllerOnAdEndPromise=this.displayController.onAdEnd.promise().then(a),await this.displayController.prepareToPlayAd(this.mediaAds)}async waitForWarmingUp(){if(!sa)return;const{promise:e,teardown:t}=dv(this.layout.shadowRootContainerElement,_v,0);return this.addDestroyHandler(t),e}async warmAdUp(){xd.event({name:"InPageWarmUpStart",probability:zd,data:{relativeCoordinates:v(this.layout.videoNode),verticalScroll:F(()=>this.layout.videoNode.ownerDocument.scrollingElement.scrollTop)}}),await this.initAdForPlaying()}adjustAdHeight(e){let{width:t,height:i}=e;Ct("inPage: adjust ad height to "+t+"x"+i),U(t)&&U(i)||(xd.event({name:"InPageAdjustsToInvalidAdSize",probability:zd,data:{width:t,height:i}}),t=av.width,i=av.height);const r=i/t,o=Math.floor(this.layout.placeholderElement.clientWidth*r);n(this.layout.placeholderElement,{height:this.isContainerSizeFixed?"100%":o+"px"})}turnOffStickyMode(e){let{animated:t=!0}=e;const i=()=>{this.stickyInPageController&&(this.stickyInPageController.destroy(),this.stickyInPageController=void 0,this.stickyConfig=void 0)},r=this.changeStickyState({willBeSticky:!1,animated:t});return la(r)?r.then(i):i()}canChangeStickyState(e){let{willBeSticky:t}=e;return!!this.stickyInPageController&&(this.isCurrentlyInStickyState!==t&&(!t||!Fv.isLocked()))}changeStickyState(e){let{willBeSticky:t,animated:i=!0}=e;const{stickyInPageController:r}=this;if(!r)return;const n=()=>{const e=this.stickyConfig.stickTo;if(xd.event({name:"InPageChangeStickyState",probability:zd,data:{willBeSticky:t,stickTo:e}}),Ct("inPage: change sticky state, willBeSticky=>"+t),t)return Fv.lock(),this.isCurrentlyInStickyState=!0,this.displayController.setGuiVisibility(!1),this.displayController.setSkinVisibility(!1),this.displayController.setBlurDisplay(!1),i?r.goSticky():void 0;{const e=()=>{this.displayController.setGuiVisibility(!0),this.displayController.setSkinVisibility(!0),this.displayController.setBlurDisplay(!0)};Fv.unLock(),this.isCurrentlyInStickyState=!1;const t=i?r.unSticky():void 0;return t?t.then(e).catch(L):e(),t}};return i?this.makeStickAction(n):n()}}!function(e,t){et({videoAd:{modules:{[za]:{[e]:t}}}},"ya")}("InPage",{addInPageVideo:(e,t,i)=>{Ct("inPage: add inpage video");const r="function"===typeof i?Qe(i,"INPAGE_CALLBACK_ERROR"):a;try{new l_(e,t,r)}catch(c_){It(c_),L(c_),r(c_)}}})}]);