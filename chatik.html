<!DOCTYPE html>
<html>
 <head>
 <script data-ad-client="ca-pub-7088445945474705" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
 <script data-ad-client="ca-pub-7088445945474705" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
 <link rel="shortcut icon" href="https://sun2-3.userapi.com/LS5KLD4M_s8P4s2goo6XZSIUx2eLzOka4ZqbAg/5NyARrS_nm8.jpg?ava=1" type="image/png">
 				<meta name="viewport" content="width=device-width, initial-scale=1">
 				<script data-ad-client="ca-pub-7088445945474705" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
 <script>
 document.title = "Chat";
 </script>
 <style  type = "text/css">
.topnav {
  position: fixed;
  top: 0; left: 0; right: 0;
  overflow: hidden;
  background-color: #000;
  height:50px;
}

.topnav a {
  float: left;
  display: block;
  color: #f2f2f2;
  text-align: center;
  padding: 16px 20px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #0c170c;
  color: white;
}

.topnav .icon {
  display: none;
}

@media screen and (max-width: 600px) {
  .topnav a:not(:first-child) {display: none;}
  .topnav a.icon {
    float: right;
    display: block;
  }
}

@media screen and (max-width: 600px) {
  .topnav.responsive {position: relative;}
  .topnav.responsive .icon {
    position: absolute;
    right: 0;
    top: 0;
  }
  .topnav.responsive a {
    float: none;
    display: block;
    text-align: left;
  }
}

   </style>
   <script>
   function auth()
   {
   document.location.href = "auth.html";
   }
   </script>
   <script>
  function myFunction() {
  var x = document.getElementById("myTopnav");
  if (x.className === "topnav") {
    x.className += " responsive";
  } else {
    x.className = "topnav";
  }
}
   </script>
 </head>
 <body  bgcolor="#232323">
  <div class = "topnav">
  <center><strong><p id = "title" class = "room"></center></strong></p>
  </div>
<p></p>

<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-database.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-analytics.js"></script>
<script src = "https://catworldweb.github.io/database.js">

 
 
   
  

  </script>
  <style>
  .room
  {
  color:orange;
  font-size:20px;
  }
  </style>
  <script>
  document.getElementById("title").innerHTML = room;
  </script>
  <script>
  



  </script>
  <script>
    function sendMessage() {
	
       
        var message = document.getElementById("message").value;
          if (myName != "" && message != "" )
	{
        
        firebase.database().ref(room).push().set({
            "sender": myName,
            "message": message,
        });
		
 document.getElementById("message").value = "";
      
        return false;
		}
    }
	
</script>


<p></p>

<style>
.text{
color:orange;
cursor:pointer;
}
</style>
<hr></hr><hr></hr><hr></hr>
<center>
<h1><font color = "yellow"> Публичный Чат </font></h1>
<a href = "plagin.html"><font size ="4px"><font color = "blue">Установить чат на свой сайт</font></font></a>
<script data-ad-client="ca-pub-7088445945474705" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>





<form >
<textarea id="message" placeholder = "Введите сообщение" autocomplete = "off" class = "displaymessage" ></textarea>
 <input type = "button" class = "senders", onclick = "return sendMessage();" width = "500"height = "100" value = "отправить">
 </center>
 <style>
 .senders{
border:3px solid white;
border-radius: 100px;
 }
 </style>
 
 				
 
 </form>
 <ul id = "messages"></ul>
 <script>
    
    firebase.database().ref(room).on("child_added", function (snapshot) {
	document.title = "(уведомление)Сообщение отправил:" + snapshot.val().sender;
	     var money = 0;
		 var d = new Date();
    var hours = d.getHours();
    var mins = d.getMinutes();
    var secs = d.getSeconds();


        var html = "";
        
        
		if (snapshot.val().sender != myName)
		{
        html += "<p><li id='message-" + snapshot.key + "' class= 'canvaschat'>";
       
        
        html += snapshot.val().sender + ": " + snapshot.val().message + " " + hours+":"+mins+":"+secs ;
        html += "</p></li>";
		}
		if (snapshot.val().sender == myName)
		{
		html += "<p><li id='message-" + snapshot.key + "' class= 'you'>";
       
        
        html += snapshot.val().sender + ": " + snapshot.val().message + " " + hours+":"+mins+":"+secs ;
        html += "</p></li>";
		}
 if (snapshot.val().sender == myName || myName =="кодер сишарпов") {
            html += "<p><button data-id='" + snapshot.key + "' onclick='deleteMessage(this);' class = 'send'>";
                html += "Delete";
            html += "</p></button>";
        }
          let audio = new Audio('https://catworldweb.github.io/audios.getkeep/u_edomlenie-9.mp3');
audio.play();
		console.log (snapshot.val().sender + ":" + snapshot.val().message);

        document.getElementById("messages").innerHTML += html;
    });
	
</script>

<script>
function deleteMessage(self) {
  
    var messageId = self.getAttribute("data-id");
 
 
    firebase.database().ref(room).child(messageId).remove();
}

firebase.database().ref(room).on("child_removed", function (snapshot) {
 
    document.getElementById("message-" + snapshot.key).innerHTML = "сообщение удалено";
});
</script>
 <style>
 .text{
 color: black;
 }
 .send
 {
 background-color: red;
 border:5px solid red;
 border-radius:15px;
 color:yellow;
 float:right;
 }
 .work
 {
  background-color: blue;
 border:5px solid blue;
 border-radius:15px;
 color:yellow;
 }
 .canvaschat
 {
 background-color:white;
 border:10px solid white;
 border-radius:15px;
 width: 300px;
 
 }
 .displaymessage
 {
 border: 10px solid white;
 border-radius:50px;
 }
 .you
 {
 background-color:white;
 border:10px solid white;
 border-radius:15px;
 width: 300px;
 float:right;
 }
 </style>
 </body>
 
</html>