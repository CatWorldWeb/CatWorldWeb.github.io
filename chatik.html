<!DOCTYPE html>
<html>
 <head>
 <script data-ad-client="ca-pub-7088445945474705" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
 <link rel="shortcut icon" href="https://sun2-3.userapi.com/LS5KLD4M_s8P4s2goo6XZSIUx2eLzOka4ZqbAg/5NyARrS_nm8.jpg?ava=1" type="image/png">
 				<meta name="viewport" content="width=device-width, initial-scale=1">
 				<script data-ad-client="ca-pub-7088445945474705" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
 <script>
 document.title = "Chat";
 </script>
 <style>
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
}

.topnav {
  position: fixed;
  top: 0; left: 0; right: 0;
  overflow: hidden;
  background-color: #000;
  height:50px;
}

.topnav a {
  float: left;
  display: block;
  color: #f2f2f2;
  text-align: center;
  padding: 16px 20px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #0c170c;
  color: white;
}

.topnav .icon {
  display: none;
}

@media screen and (max-width: 600px) {
  .topnav a:not(:first-child) {display: none;}
  .topnav a.icon {
    float: right;
    display: block;
  }
}

@media screen and (max-width: 600px) {
  .topnav.responsive {position: relative;}
  .topnav.responsive .icon {
    position: absolute;
    right: 0;
    top: 0;
  }
  .topnav.responsive a {
    float: none;
    display: block;
    text-align: left;
  }
}
   </style>
   <script>
   				var url ="https:/";
   </script>
   <script>
  function myFunction() {
  var x = document.getElementById("myTopnav");
  if (x.className === "topnav") {
    x.className += " responsive";
  } else {
    x.className = "topnav";
  }
}
   </script>
 </head>
 <body  bgcolor="#232323">
  <div class="topnav" id="myTopnav">
  <a href="index.html">Главная</a>
  <a href="games.html">Игры</a>
  <a href="partners.html">Партнёры</a>
  <a href="videos.html">CatTube</a>
  <a href="news.html">Новости</a>
  <a href="audio.html">Аудиозаписи</a>
  <a href="characters.html">Персонажи игр</a>
  <a href="chatik.html" class="active">Чатик</a>
  <a href="edit.html">Веб-редактор</a>
  <a href="contacts.html">Контакты</a>
  <a href="javascript:void(0);" class="icon" onclick="myFunction()">
     <i class="fa fa-bars"></i>
    </a>
   </div>


<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-database.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-analytics.js"></script>
<script src = "https://catworldweb.github.io/database.js">

 
  
   
  

  </script>
  <script>
  



  </script>
  <script>
    function sendMessage() {
	
       
        var message = document.getElementById("message").value;
          if (myName != "" && message != "" )
	{
        
        firebase.database().ref("messages").push().set({
            "sender": myName,
            "message": message,
        });
		
 document.getElementById("message").value = "";
      
        return false;
		}
    }
	
</script>

<p></p>
<hr></hr><hr></hr><hr></hr>
<p></p>
<center>
<h1><font color = "yellow"> Публичный Чат </font></h1>
<a href = "plagin.html"><font size ="4px"><font color = "blue">Установить чат на свой сайт</font></font></a>
<script data-ad-client="ca-pub-7088445945474705" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>





<form >
<textarea id="message" placeholder = "Введите сообщение" autocomplete = "off" class = "displaymessage" ></textarea>
 <img src ="https://psv4.userapi.com/c856524/u617056156/docs/d5/e32427e4c02b/2020_10_16_063654.png?extra=a56gA5lfWMkMAu58NkzP2LAys0fjoaw_ucVrkWjbLf3zz0_hHMmTVJZDQVBCInvk6QzaTUwBGa-HMC7OY5d5QsrGV3P2xI5VWkRCt6McvwwqX83yNawAm7EhwS6F48UzM0EHqEurjoEqNpjkTVjZtQpQA50" onclick = "return sendMessage();" width = "50" height = "50">
 
 				
 				
 
 </form>
 <ul id = "messages"></ul>
 <script>
    
    firebase.database().ref("messages").on("child_added", function (snapshot) {
	document.title = "(уведомление)Сообщение отправил:" + snapshot.val().sender;
	     var money = 0;
        var html = "";
        
        html+="<hr></hr>"
        html += "<li id='message-" + snapshot.key + "' class= 'canvaschat'>";
       
        
        html += snapshot.val().sender + ": " + snapshot.val().message;
        html += "</li>";
 if (snapshot.val().sender == myName || snapshot.val().sender =="хоррор") {
            html += "<button data-id='" + snapshot.key + "' onclick='deleteMessage(this);' class = 'send'>";
                html += "Delete";
            html += "</button>";
        }
          let audio = new Audio('https://catworldweb.github.io/audios.getkeep/u_edomlenie-9.mp3');
audio.play();
		console.log (snapshot.val().sender + ":" + snapshot.val().message);

        document.getElementById("messages").innerHTML += html;
    });
	
</script>

<script>
function deleteMessage(self) {
  
    var messageId = self.getAttribute("data-id");
 
 
    firebase.database().ref("messages").child(messageId).remove();
}

firebase.database().ref("messages").on("child_removed", function (snapshot) {
 
    document.getElementById("message-" + snapshot.key).innerHTML = "сообщение удалено";
});
</script>
 <style>
 .text{
 color: black;
 }
 .send
 {
 background-color: red;
 border:5px solid red;
 border-radius:15px;
 color:yellow;
 }
 .work
 {
  background-color: blue;
 border:5px solid blue;
 border-radius:15px;
 color:yellow;
 }
 .canvaschat
 {
 background-color:white;
 border:10px solid white;
 border-radius:15px;
 width: 300px;
 }
 .displaymessage
 {
 border: 10px solid white;
 border-radius:15px;
 </style>
 </body>
 
</html>